{
  "$type": "Models.Core.Simulations, Models",
  "Version": 197,
  "Name": "Simulations",
  "ResourceName": null,
  "Children": [
    {
      "$type": "Models.Storage.DataStore, Models",
      "CustomFileName": null,
      "Name": "DataStore",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Core.Simulation, Models",
      "Descriptors": null,
      "Name": "BasicSimulation",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Memo, Models",
          "Text": "In this example SPRUM is set to have a FullCanopy duration of 0 which means it grazes and rewinds its self after accumulating 300 degree days from the start of regrowth.  The amout of biomass removed each time SPRUM self grazes is specified in the OnCut BiomassRemovalEvent object\n",
          "Name": "Description",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Climate.Weather, Models",
          "ConstantsFile": null,
          "FileName": "%root%/Examples/WeatherFiles/NZ_Lincoln",
          "ExcelWorkSheetName": null,
          "Name": "Weather",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Clock, Models",
          "Start": "1999-08-01T00:00:00",
          "End": "2000-08-01T00:00:00",
          "Name": "Clock",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Summary, Models",
          "Verbosity": 100,
          "Name": "Summary",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
          "Name": "Soil Arbitrator",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Zone, Models",
          "Area": 1.0,
          "Slope": 0.0,
          "AspectAngle": 0.0,
          "Altitude": 50.0,
          "CanopyType": null,
          "Name": "Field",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": "MicroClimate",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Soil, Models",
              "RecordNumber": 0,
              "ASCOrder": null,
              "ASCSubOrder": null,
              "SoilType": "Generic soil",
              "LocalName": "",
              "Site": "",
              "NearestTown": "",
              "Region": "",
              "State": "",
              "Country": "New Zealand",
              "NaturalVegetation": null,
              "ApsoilNumber": null,
              "Latitude": 37.5,
              "Longitude": 172.5,
              "LocationAccuracy": null,
              "YearOfSampling": null,
              "DataSource": null,
              "Comments": "",
              "Name": "Soil",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Soils.Chemical, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "PH": [
                    6.0,
                    6.0,
                    6.0,
                    6.0,
                    6.0,
                    6.0,
                    6.0
                  ],
                  "PHUnits": 0,
                  "EC": null,
                  "ESP": null,
                  "CEC": null,
                  "ECMetadata": null,
                  "CLMetadata": null,
                  "CECMetadata": null,
                  "ESPMetadata": null,
                  "PHMetadata": null,
                  "Name": "Chemical",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Physical, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "ParticleSizeSand": [
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0
                  ],
                  "ParticleSizeSilt": [
                    60.0,
                    60.0,
                    60.0,
                    60.0,
                    60.0,
                    60.0,
                    60.0
                  ],
                  "ParticleSizeClay": [
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0
                  ],
                  "Rocks": [
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN"
                  ],
                  "Texture": null,
                  "BD": [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "AirDry": [
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09
                  ],
                  "LL15": [
                    0.15,
                    0.15,
                    0.15,
                    0.15,
                    0.15,
                    0.15,
                    0.15
                  ],
                  "DUL": [
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35
                  ],
                  "SAT": [
                    0.5,
                    0.5,
                    0.5,
                    0.5,
                    0.5,
                    0.5,
                    0.5
                  ],
                  "KS": [
                    500.0,
                    500.0,
                    500.0,
                    500.0,
                    500.0,
                    500.0,
                    500.0
                  ],
                  "BDMetadata": null,
                  "AirDryMetadata": null,
                  "LL15Metadata": null,
                  "DULMetadata": null,
                  "SATMetadata": null,
                  "KSMetadata": null,
                  "RocksMetadata": null,
                  "TextureMetadata": null,
                  "ParticleSizeSandMetadata": null,
                  "ParticleSizeSiltMetadata": null,
                  "ParticleSizeClayMetadata": null,
                  "Name": "Physical",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15
                      ],
                      "KL": [
                        0.08,
                        0.08,
                        0.08,
                        0.08,
                        0.08,
                        0.08,
                        0.08
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": null,
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "SPRUMSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.WaterModel.WaterBalance, Models",
                  "SummerDate": "1-Oct",
                  "SummerU": 8.0,
                  "SummerCona": 4.0,
                  "WinterDate": "1-Apr",
                  "WinterU": 4.0,
                  "WinterCona": 1.5,
                  "DiffusConst": 0.0,
                  "DiffusSlope": 0.0,
                  "Salb": 0.2,
                  "CN2Bare": 60.0,
                  "CNRed": 10.0,
                  "CNCov": 0.8,
                  "DischargeWidth": 0.0,
                  "CatchmentArea": 0.0,
                  "PSIDul": -100.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "SWCON": [
                    0.5,
                    0.5,
                    0.43,
                    0.375,
                    0.34,
                    0.35,
                    0.4,
                    0.48
                  ],
                  "KLAT": [
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN"
                  ],
                  "Name": "SoilWater",
                  "ResourceName": "WaterBalance",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Nutrients.Nutrient, Models",
                  "Name": "Nutrient",
                  "ResourceName": "Nutrient",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Organic, Models",
                  "FOMCNRatio": 30.0,
                  "Thickness": [
                    100.0,
                    200.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "Carbon": [
                    2.0,
                    1.8,
                    1.5,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "CarbonUnits": 0,
                  "SoilCNRatio": [
                    11.5,
                    11.5,
                    11.5,
                    11.5,
                    11.5,
                    11.5
                  ],
                  "FBiom": [
                    0.025,
                    0.025,
                    0.015,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "FInert": [
                    0.3,
                    0.4,
                    0.6,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "FOM": [
                    1243.931,
                    833.8319214727269,
                    457.61666105087295,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "CarbonMetadata": null,
                  "FOMMetadata": null,
                  "Name": "Organic",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Water, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.34999999999999976
                  ],
                  "FilledFromTop": true,
                  "Name": "Water",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "NO3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "NH4",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 1,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "Urea",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "Name": "Temperature",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Surface.SurfaceOrganicMatter, Models",
              "SurfOM": [],
              "Canopies": [],
              "InitialResidueName": "wheat",
              "InitialResidueType": "wheat",
              "InitialResidueMass": 2000.0,
              "InitialStandingFraction": 0.0,
              "InitialCPR": 0.0,
              "InitialCNR": 80.0,
              "Name": "surface organic matter",
              "ResourceName": "SurfaceOrganicMatter",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Irrigation, Models",
              "Name": "Irrigation",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Fertiliser, Models",
              "Name": "Fertiliser",
              "ResourceName": "Fertiliser",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Report, Models",
              "VariableNames": [
                "[Clock].Today",
                "[SPRUM].DaysAfterSowing",
                "[SPRUM].Phenology.CurrentPhaseName",
                "[SPRUM].Phenology.CurrentStageName",
                "[SPRUM].Phenology.Stage",
                "[SPRUM].Residue.Wt",
                "[Phenology].AccumulatedTT",
                "[SPRUM].Total.Wt",
                "[SPRUM].Total.N",
                "[SPRUM].Root.Network.Depth",
                "[SPRUM].Leaf.Canopy.CoverGreen",
                "[SPRUM].Leaf.Wt",
                "[SPRUM].Root.Wt"
              ],
              "EventNames": [
                "[Clock].DoReport"
              ],
              "GroupByVariableName": null,
              "Name": "Report",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Phenology": null,
              "Arbitrator": null,
              "structure": null,
              "Leaf": null,
              "Root": null,
              "Name": "SPRUM",
              "ResourceName": "SPRUM",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Newtonsoft.Json;",
                "using Models.PMF.Phen;",
                "using Models.Soils.Nutrients;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "using Models.Soils;",
                "using System.Xml.Serialization;",
                "using APSIM.Shared.Utilities;",
                "using Models.PMF.Organs;",
                "using Models.Interfaces;",
                "",
                "        ",
                "namespace Models",
                "{",
                "   [Serializable] ",
                "   [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                "    public class Script : Model",
                "    {      ",
                "        [Link] private ISummary summary;",
                "        [Link] private Irrigation Irrigation;",
                "        [Link] private Clock Clock;",
                "        [Link] private Soil Soil;",
                "        [Link] private Plant SPRUM;",
                "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Root.Network\")]",
                "        private RootNetwork root;",
                "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Phenology\")]",
                "        private Phenology phenology;",
                "        [Link]",
                "        private IPhysical soilPhysical;",
                "        [Link]",
                "        private ISoilWater waterBalance;",
                "       //Communication to other modules",
                "       ",
                "       //User inputs from properties tab",
                "       [Description(\"Irrigation on (yes or no)\")]",
                "       public string Irrigation_Yes_No { get; set; }",
                "       [Description(\"SeasonStart (dd-MMM)\")]",
                "       public string Season_Start { get; set; }",
                "       [Description(\"SeasonEnd (dd-MMM)\")]",
                "       public string Season_End { get; set; }",
                "       [Description(\"Season Allocation (mm)\")]",
                "       public double Season_Allocation { get; set; }",
                "       [Description(\"% PAWC to refill soil to (0-1)\")]",
                "       public double Refull_Frac { get; set; }",
                "       [Description(\"% PAWC to trigger irrigation (0-1)\")]",
                "       public double Trigger_Frac { get; set; }",
                "       [Description(\"Minimum days for irrigation to return\")]",
                "       public double Return_days { get; set; }",
                "       [Description(\"Maximum irrigation application (mm)\")]",
                "       public double Maximum_Irrigation_Amount { get; set; }",
                "       [Description(\"Depth to calculate PAWC (mm)\")]",
                "       public double Top_Depth { get; set; }",
                "       ",
                "       //Class members",
                "       [JsonIgnore] private bool IrrigationIsAvailable { get; set; }",
                "       [JsonIgnore] public bool SeasonIsOpen { get; set; }",
                "       [JsonIgnore] private bool CropIsActive { get; set; }",
                "       [JsonIgnore] private bool IrrigatorIsAvailable { get; set; }",
                "       [JsonIgnore] private bool SoilIsDry { get; set; }",
                "       [JsonIgnore] public double Top_DUL { get; set; }",
                "       [JsonIgnore] public double Top_Refull { get; set; }",
                "       [JsonIgnore] public double Top_Trigger { get; set; }",
                "       [JsonIgnore] public double Top_LL { get; set; }",
                "       [JsonIgnore] public double Top_SW { get; set; }",
                "       [JsonIgnore] public double Accumulated_depth { get; set; }   ",
                "       [JsonIgnore] public double Days_since_irrigation { get; set; }",
                "       [JsonIgnore] public double Amount_to_apply { get; set; }",
                "       [JsonIgnore] public double Season_Application { get; set; }",
                "        ",
                "       //Variables for date logic testing",
                "       [JsonIgnore] public string StartString {get; set;}",
                "       [JsonIgnore] public string EndString {get; set;}",
                "       [JsonIgnore] public DateTime StartDate {get; set;}",
                "       [JsonIgnore] public DateTime EndDate {get; set;}",
                "       [JsonIgnore] public int TodayYear {get; set;}",
                "       [JsonIgnore] public int TodayMonth {get; set;}",
                "       [JsonIgnore] public int StartMonth {get; set;}",
                "       [JsonIgnore] public int EndMonth {get; set;}",
                "       [JsonIgnore] public int TodayDay {get; set;}",
                "       [JsonIgnore] public int StartDay {get; set;}",
                "       [JsonIgnore] public int EndDay {get; set;}",
                "       ",
                "    ",
                "       //Calculate static soil variables",
                "       [EventSubscribe(\"StartOfSimulation\")]",
                "       private void OnStartOfSimulation(object sender, EventArgs e)",
                "       {   ",
                "          //Calculated soil water variables",
                "          Accumulated_depth = 0;",
                "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                "          {",
                "             Top_LL += soilPhysical.LL15mm[layer];",
                "             Top_DUL += soilPhysical.DULmm[layer];",
                "             Accumulated_depth += soilPhysical.Thickness[layer];",
                "          }",
                "          Top_Refull = Top_LL + (Top_DUL - Top_LL) * Refull_Frac;",
                "       }",
                "       ",
                "      ",
                "       //Determine daily requirement for irrigation",
                "        [EventSubscribe(\"StartOfDay\")]",
                "           private void OnStartOfDay(object sender, EventArgs e)",
                "           { ",
                "          //Can we irrigate?",
                "          IrrigationIsAvailable = false; ",
                "          if (Irrigation_Yes_No == \"yes\")",
                "             IrrigationIsAvailable = true; ",
                "    ",
                "          //Are we Allowed to Irrigate?",
                "          TodayYear = Clock.Today.Year;",
                "          StartString = Season_Start + \"-\" + TodayYear.ToString();",
                "          EndString = Season_End + \"-\" + TodayYear.ToString();",
                "          StartDate = DateTime.Parse(StartString);",
                "          EndDate = DateTime.Parse(EndString);",
                "          TodayMonth = Clock.Today.Month;",
                "          TodayDay = Clock.Today.Day;",
                "          StartDay = StartDate.Day;",
                "          StartMonth = StartDate.Month;",
                "          EndDay = EndDate.Day;",
                "          EndMonth = EndDate.Month;",
                "          ",
                "          SeasonIsOpen = false;",
                "          //if we are in the spring and after the start date then yes",
                "          if((Clock.Today.Month > 6) && (Clock.Today >= StartDate))",
                "          SeasonIsOpen = true;",
                "          //if we are in the autumn and before the end date then yes",
                "          if((Clock.Today.Month <= 6) && (Clock.Today <= EndDate))",
                "          SeasonIsOpen = true;",
                "          ",
                "          //Is there a crop in the ground that needs irrigation?",
                "          CropIsActive = false;",
                "          if ((phenology.Stage >= 3.0) && (phenology.Stage < 6.0))",
                "                CropIsActive = true;",
                "          ",
                "          //Is the irrigator available?",
                "          IrrigatorIsAvailable = false;",
                "          Days_since_irrigation += 1;",
                "          if (Days_since_irrigation >= Return_days)",
                "             IrrigatorIsAvailable = true;",
                "          ",
                "          //Is the soil dry enough to require irrigation?",
                "          SoilIsDry = false;",
                "          double CurrentRootDepth = 0;",
                "          double RootDepth = root.Depth;",
                "          CurrentRootDepth = Math.Max(RootDepth, CurrentRootDepth);",
                "          ",
                "          double RelativeRootDepth = Math.Min(1.0, CurrentRootDepth / Top_Depth);",
                "          Top_Trigger = Math.Min(Top_Refull, Top_DUL - (Top_DUL - Top_LL) * RelativeRootDepth * (1-Trigger_Frac)); ",
                "          ",
                "          Accumulated_depth = 0;",
                "          Top_SW = 0;",
                "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                "          {",
                "             Top_SW += waterBalance.SWmm[layer];",
                "             Accumulated_depth += soilPhysical.Thickness[layer];",
                "          }",
                "          if (Top_SW <= Top_Trigger)",
                "             SoilIsDry = true;",
                "                ",
                "          //Lets bloody well irrigate then!!!!",
                "          if((IrrigationIsAvailable) && (SeasonIsOpen) && (CropIsActive) && (IrrigatorIsAvailable) && (SoilIsDry)) //The conditions are rife for irrigation",
                "          {",
                "             Amount_to_apply = Math.Min(Top_Refull - Top_SW, Maximum_Irrigation_Amount);",
                "             Amount_to_apply = Math.Min(Amount_to_apply, Season_Allocation - Season_Application); ",
                "             Amount_to_apply = Math.Max(Amount_to_apply, 0.0);",
                "             Irrigation.Apply(Amount_to_apply);",
                "             Days_since_irrigation = 0;",
                "             Season_Application += Amount_to_apply;",
                "             summary.WriteMessage(this, \"Automatic Irrigation\", MessageType.Diagnostic);",
                "            ",
                "          }",
                "       }",
                "    }",
                "}",
                "             ",
                "             "
              ],
              "Parameters": [
                {
                  "Key": "Irrigation_Yes_No",
                  "Value": "yes"
                },
                {
                  "Key": "Season_Start",
                  "Value": "1-Oct"
                },
                {
                  "Key": "Season_End",
                  "Value": "30-Apr"
                },
                {
                  "Key": "Season_Allocation",
                  "Value": "1000"
                },
                {
                  "Key": "Refull_Frac",
                  "Value": "0.9"
                },
                {
                  "Key": "Trigger_Frac",
                  "Value": "0.7"
                },
                {
                  "Key": "Return_days",
                  "Value": "3"
                },
                {
                  "Key": "Maximum_Irrigation_Amount",
                  "Value": "40"
                },
                {
                  "Key": "Top_Depth",
                  "Value": "600"
                }
              ],
              "Name": "AutomaticIrrigation",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "using APSIM.Shared.Utilities;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        ",
                "        [Separator(\"A component to apply fertiliser on one or more dates on every year of the simulation\")]",
                "",
                "        [Description(\"Type of fertiliser to apply? \")] ",
                "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                "",
                "        [Description(\"Enter the fertilisation dates as dd-mmm with comma separation (any year information entered will be ignored): \")] ",
                "        public string[] FertiliserDates { get; set; } ",
                "",
                "        [Description(\"Amount of fertiliser to be applied (kg /ha)\")] ",
                "        public double Amount { get; set; }",
                "",
                "        [Description(\"Is the above amount to be applied each time? (yes/ticked)? Or is it the total annual amount across all dates (no/unticked)\")] ",
                "        public bool AmountType { get; set; }",
                "        ",
                "        [EventSubscribe(\"DoManagement\")]",
                "        private void OnDoManagement(object sender, EventArgs e)",
                "        {",
                "            foreach (string ddMMM in FertiliserDates)",
                "            {",
                "                if (DateUtilities.DatesEqual(ddMMM, Clock.Today))",
                "                {",
                "                    if (AmountType)",
                "                        Fertiliser.Apply(amount: Amount, type: FertiliserType);",
                "                    else",
                "                        Fertiliser.Apply(amount: Amount / FertiliserDates.Length, type: FertiliserType);",
                "                }",
                "            }",
                "        }",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "FertiliserType",
                  "Value": "NO3N"
                },
                {
                  "Key": "FertiliserDates",
                  "Value": "1-Aug, 15-Aug, 1-Sep, 15-Sep, 1-Nov, 15-Nov, 1-dec, 15-dec, 1-Jan, 15-Jan, 1-Feb, 15-Feb, 1-Mar, 15-Mar"
                },
                {
                  "Key": "Amount",
                  "Value": "0"
                },
                {
                  "Key": "AmountType",
                  "Value": "False"
                }
              ],
              "Name": "ApplyFertOnDates",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.SimplePlantModels.SprumPastureInstance, Models",
              "EstablishDate": null,
              "AgeAtSimulationStart": 1.0,
              "YearsToMaxDimension": 1.0,
              "RUE": 1.0,
              "Presidue": 0.15,
              "RsenRate": 0.01,
              "Proot": 0.1,
              "PSBaseT": 5.0,
              "PSLOptT": 20.0,
              "PSUOptT": 25.0,
              "PSMaxT": 35.0,
              "GRINZ": false,
              "MaxRD": 600.0,
              "MaxHeight": 300.0,
              "MaxPrunedHeight": 100.0,
              "MaxCover": 0.97,
              "MinCover": 0.1,
              "ExtinctCoeff": 0.7,
              "RegrowthDuration": 300.0,
              "FullCanopyDuration": 0.0,
              "BaseT": 5.0,
              "OptT": 25.0,
              "MaxT": 35.0,
              "RootNConc": 0.01,
              "LeafNConc": 0.05,
              "ResidueNConc": 0.01,
              "LegumePropn": 1.0,
              "GSMax": 0.006,
              "R50": 120.0,
              "SurfaceKL": 0.1,
              "WaterStress": false,
              "Name": "BasePasture",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Management.BiomassRemovalEvents, Models",
              "NameOfPlantToRemoveFrom": "SPRUM",
              "RemovalType": 0,
              "StageToSet": "StartRegrowth",
              "RemovalDates": null,
              "BiomassRemovalFractions": [
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Residue",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.0,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.0,
                  "DeadToResidue": 0.0
                },
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Leaf",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.7,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.25,
                  "DeadToResidue": 0.5
                },
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Nodule",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.0,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.0,
                  "DeadToResidue": 0.0
                },
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Root",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.0,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.0,
                  "DeadToResidue": 0.0
                }
              ],
              "Name": "OnCut",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "cover",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": 0,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Leaf.Canopy.CoverGreen",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": false,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Series1",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "Biomass",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": -16736653,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Leaf.Wt",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": true,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Leaf",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": -1663232,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Residue.Wt",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": true,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Residual",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": -2793984,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Root.Wt",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": true,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Root",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Core.Simulation, Models",
      "Descriptors": null,
      "Name": "GrazingFromBiomassRemovalEvents",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Memo, Models",
          "Text": "In this example SPRUM is set to have a very long FullCanopy duration so it does not reach the end of this phase and triger its own grazing.  Instead grazing dates are specifed in the BiomassRemovalEvents object named \"OnCut\"\n",
          "Name": "Description",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Climate.Weather, Models",
          "ConstantsFile": null,
          "FileName": "%root%/Examples/WeatherFiles/NZ_Lincoln",
          "ExcelWorkSheetName": null,
          "Name": "Weather",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Clock, Models",
          "Start": "1999-08-01T00:00:00",
          "End": "2000-08-01T00:00:00",
          "Name": "Clock",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Summary, Models",
          "Verbosity": 100,
          "Name": "Summary",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
          "Name": "Soil Arbitrator",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Zone, Models",
          "Area": 1.0,
          "Slope": 0.0,
          "AspectAngle": 0.0,
          "Altitude": 50.0,
          "CanopyType": null,
          "Name": "Field",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": "MicroClimate",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Soil, Models",
              "RecordNumber": 0,
              "ASCOrder": null,
              "ASCSubOrder": null,
              "SoilType": "Generic soil",
              "LocalName": "",
              "Site": "",
              "NearestTown": "",
              "Region": "",
              "State": "",
              "Country": "New Zealand",
              "NaturalVegetation": null,
              "ApsoilNumber": null,
              "Latitude": 37.5,
              "Longitude": 172.5,
              "LocationAccuracy": null,
              "YearOfSampling": null,
              "DataSource": null,
              "Comments": "",
              "Name": "Soil",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Soils.Chemical, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "PH": [
                    6.0,
                    6.0,
                    6.0,
                    6.0,
                    6.0,
                    6.0,
                    6.0
                  ],
                  "PHUnits": 0,
                  "EC": null,
                  "ESP": null,
                  "CEC": null,
                  "ECMetadata": null,
                  "CLMetadata": null,
                  "CECMetadata": null,
                  "ESPMetadata": null,
                  "PHMetadata": null,
                  "Name": "Chemical",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Physical, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "ParticleSizeSand": [
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0
                  ],
                  "ParticleSizeSilt": [
                    60.0,
                    60.0,
                    60.0,
                    60.0,
                    60.0,
                    60.0,
                    60.0
                  ],
                  "ParticleSizeClay": [
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0,
                    20.0
                  ],
                  "Rocks": [
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN"
                  ],
                  "Texture": null,
                  "BD": [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "AirDry": [
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09
                  ],
                  "LL15": [
                    0.15,
                    0.15,
                    0.15,
                    0.15,
                    0.15,
                    0.15,
                    0.15
                  ],
                  "DUL": [
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35
                  ],
                  "SAT": [
                    0.5,
                    0.5,
                    0.5,
                    0.5,
                    0.5,
                    0.5,
                    0.5
                  ],
                  "KS": [
                    500.0,
                    500.0,
                    500.0,
                    500.0,
                    500.0,
                    500.0,
                    500.0
                  ],
                  "BDMetadata": null,
                  "AirDryMetadata": null,
                  "LL15Metadata": null,
                  "DULMetadata": null,
                  "SATMetadata": null,
                  "KSMetadata": null,
                  "RocksMetadata": null,
                  "TextureMetadata": null,
                  "ParticleSizeSandMetadata": null,
                  "ParticleSizeSiltMetadata": null,
                  "ParticleSizeClayMetadata": null,
                  "Name": "Physical",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15
                      ],
                      "KL": [
                        0.08,
                        0.08,
                        0.08,
                        0.08,
                        0.08,
                        0.08,
                        0.08
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": null,
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "SPRUMSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.WaterModel.WaterBalance, Models",
                  "SummerDate": "1-Oct",
                  "SummerU": 8.0,
                  "SummerCona": 4.0,
                  "WinterDate": "1-Apr",
                  "WinterU": 4.0,
                  "WinterCona": 1.5,
                  "DiffusConst": 0.0,
                  "DiffusSlope": 0.0,
                  "Salb": 0.2,
                  "CN2Bare": 60.0,
                  "CNRed": 10.0,
                  "CNCov": 0.8,
                  "DischargeWidth": 0.0,
                  "CatchmentArea": 0.0,
                  "PSIDul": -100.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "SWCON": [
                    0.5,
                    0.5,
                    0.43,
                    0.375,
                    0.34,
                    0.35,
                    0.4,
                    0.48
                  ],
                  "KLAT": [
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN",
                    "NaN"
                  ],
                  "Name": "SoilWater",
                  "ResourceName": "WaterBalance",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Nutrients.Nutrient, Models",
                  "Name": "Nutrient",
                  "ResourceName": "Nutrient",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Organic, Models",
                  "FOMCNRatio": 30.0,
                  "Thickness": [
                    100.0,
                    200.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "Carbon": [
                    2.0,
                    1.8,
                    1.5,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "CarbonUnits": 0,
                  "SoilCNRatio": [
                    11.5,
                    11.5,
                    11.5,
                    11.5,
                    11.5,
                    11.5
                  ],
                  "FBiom": [
                    0.025,
                    0.025,
                    0.015,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "FInert": [
                    0.3,
                    0.4,
                    0.6,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "FOM": [
                    1243.931,
                    833.8319214727269,
                    457.61666105087295,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "CarbonMetadata": null,
                  "FOMMetadata": null,
                  "Name": "Organic",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Water, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.35,
                    0.34999999999999976
                  ],
                  "FilledFromTop": true,
                  "Name": "Water",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "NO3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "NH4",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    200.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 1,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "Urea",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "Name": "Temperature",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Surface.SurfaceOrganicMatter, Models",
              "SurfOM": [],
              "Canopies": [],
              "InitialResidueName": "wheat",
              "InitialResidueType": "wheat",
              "InitialResidueMass": 2000.0,
              "InitialStandingFraction": 0.0,
              "InitialCPR": 0.0,
              "InitialCNR": 80.0,
              "Name": "surface organic matter",
              "ResourceName": "SurfaceOrganicMatter",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Irrigation, Models",
              "Name": "Irrigation",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Fertiliser, Models",
              "Name": "Fertiliser",
              "ResourceName": "Fertiliser",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Report, Models",
              "VariableNames": [
                "[Clock].Today",
                "[SPRUM].DaysAfterSowing",
                "[SPRUM].Phenology.CurrentPhaseName",
                "[SPRUM].Phenology.Stage",
                "[SPRUM].Residue.Wt",
                "[Phenology].AccumulatedTT",
                "[SPRUM].Total.Wt",
                "[SPRUM].Total.N",
                "[SPRUM].Root.Network.Depth",
                "[SPRUM].Leaf.Canopy.CoverGreen",
                "[SPRUM].Leaf.Wt",
                "[SPRUM].Root.Wt"
              ],
              "EventNames": [
                "[Clock].DoReport"
              ],
              "GroupByVariableName": null,
              "Name": "Report",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Phenology": null,
              "Arbitrator": null,
              "structure": null,
              "Leaf": null,
              "Root": null,
              "Name": "SPRUM",
              "ResourceName": "SPRUM",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Newtonsoft.Json;",
                "using Models.PMF.Phen;",
                "using Models.Soils.Nutrients;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "using Models.Soils;",
                "using System.Xml.Serialization;",
                "using APSIM.Shared.Utilities;",
                "using Models.PMF.Organs;",
                "using Models.Interfaces;",
                "",
                "        ",
                "namespace Models",
                "{",
                "   [Serializable] ",
                "   [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                "    public class Script : Model",
                "    {      ",
                "        [Link] private ISummary summary;",
                "        [Link] private Irrigation Irrigation;",
                "        [Link] private Clock Clock;",
                "        [Link] private Soil Soil;",
                "        [Link] private Plant SPRUM;",
                "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Root.Network\")]",
                "        private RootNetwork root;",
                "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Phenology\")]",
                "        private Phenology phenology;",
                "        [Link]",
                "        private IPhysical soilPhysical;",
                "        [Link]",
                "        private ISoilWater waterBalance;",
                "       //Communication to other modules",
                "       ",
                "       //User inputs from properties tab",
                "       [Description(\"Irrigation on (yes or no)\")]",
                "       public string Irrigation_Yes_No { get; set; }",
                "       [Description(\"SeasonStart (dd-MMM)\")]",
                "       public string Season_Start { get; set; }",
                "       [Description(\"SeasonEnd (dd-MMM)\")]",
                "       public string Season_End { get; set; }",
                "       [Description(\"Season Allocation (mm)\")]",
                "       public double Season_Allocation { get; set; }",
                "       [Description(\"% PAWC to refill soil to (0-1)\")]",
                "       public double Refull_Frac { get; set; }",
                "       [Description(\"% PAWC to trigger irrigation (0-1)\")]",
                "       public double Trigger_Frac { get; set; }",
                "       [Description(\"Minimum days for irrigation to return\")]",
                "       public double Return_days { get; set; }",
                "       [Description(\"Maximum irrigation application (mm)\")]",
                "       public double Maximum_Irrigation_Amount { get; set; }",
                "       [Description(\"Depth to calculate PAWC (mm)\")]",
                "       public double Top_Depth { get; set; }",
                "       ",
                "       //Class members",
                "       [JsonIgnore] private bool IrrigationIsAvailable { get; set; }",
                "       [JsonIgnore] public bool SeasonIsOpen { get; set; }",
                "       [JsonIgnore] private bool CropIsActive { get; set; }",
                "       [JsonIgnore] private bool IrrigatorIsAvailable { get; set; }",
                "       [JsonIgnore] private bool SoilIsDry { get; set; }",
                "       [JsonIgnore] public double Top_DUL { get; set; }",
                "       [JsonIgnore] public double Top_Refull { get; set; }",
                "       [JsonIgnore] public double Top_Trigger { get; set; }",
                "       [JsonIgnore] public double Top_LL { get; set; }",
                "       [JsonIgnore] public double Top_SW { get; set; }",
                "       [JsonIgnore] public double Accumulated_depth { get; set; }   ",
                "       [JsonIgnore] public double Days_since_irrigation { get; set; }",
                "       [JsonIgnore] public double Amount_to_apply { get; set; }",
                "       [JsonIgnore] public double Season_Application { get; set; }",
                "        ",
                "       //Variables for date logic testing",
                "       [JsonIgnore] public string StartString {get; set;}",
                "       [JsonIgnore] public string EndString {get; set;}",
                "       [JsonIgnore] public DateTime StartDate {get; set;}",
                "       [JsonIgnore] public DateTime EndDate {get; set;}",
                "       [JsonIgnore] public int TodayYear {get; set;}",
                "       [JsonIgnore] public int TodayMonth {get; set;}",
                "       [JsonIgnore] public int StartMonth {get; set;}",
                "       [JsonIgnore] public int EndMonth {get; set;}",
                "       [JsonIgnore] public int TodayDay {get; set;}",
                "       [JsonIgnore] public int StartDay {get; set;}",
                "       [JsonIgnore] public int EndDay {get; set;}",
                "       ",
                "    ",
                "       //Calculate static soil variables",
                "       [EventSubscribe(\"StartOfSimulation\")]",
                "       private void OnStartOfSimulation(object sender, EventArgs e)",
                "       {   ",
                "          //Calculated soil water variables",
                "          Accumulated_depth = 0;",
                "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                "          {",
                "             Top_LL += soilPhysical.LL15mm[layer];",
                "             Top_DUL += soilPhysical.DULmm[layer];",
                "             Accumulated_depth += soilPhysical.Thickness[layer];",
                "          }",
                "          Top_Refull = Top_LL + (Top_DUL - Top_LL) * Refull_Frac;",
                "       }",
                "       ",
                "      ",
                "       //Determine daily requirement for irrigation",
                "        [EventSubscribe(\"StartOfDay\")]",
                "           private void OnStartOfDay(object sender, EventArgs e)",
                "           { ",
                "          //Can we irrigate?",
                "          IrrigationIsAvailable = false; ",
                "          if (Irrigation_Yes_No == \"yes\")",
                "             IrrigationIsAvailable = true; ",
                "    ",
                "          //Are we Allowed to Irrigate?",
                "          TodayYear = Clock.Today.Year;",
                "          StartString = Season_Start + \"-\" + TodayYear.ToString();",
                "          EndString = Season_End + \"-\" + TodayYear.ToString();",
                "          StartDate = DateTime.Parse(StartString);",
                "          EndDate = DateTime.Parse(EndString);",
                "          TodayMonth = Clock.Today.Month;",
                "          TodayDay = Clock.Today.Day;",
                "          StartDay = StartDate.Day;",
                "          StartMonth = StartDate.Month;",
                "          EndDay = EndDate.Day;",
                "          EndMonth = EndDate.Month;",
                "          ",
                "          SeasonIsOpen = false;",
                "          //if we are in the spring and after the start date then yes",
                "          if((Clock.Today.Month > 6) && (Clock.Today >= StartDate))",
                "          SeasonIsOpen = true;",
                "          //if we are in the autumn and before the end date then yes",
                "          if((Clock.Today.Month <= 6) && (Clock.Today <= EndDate))",
                "          SeasonIsOpen = true;",
                "          ",
                "          //Is there a crop in the ground that needs irrigation?",
                "          CropIsActive = false;",
                "          if ((phenology.Stage >= 3.0) && (phenology.Stage < 6.0))",
                "                CropIsActive = true;",
                "          ",
                "          //Is the irrigator available?",
                "          IrrigatorIsAvailable = false;",
                "          Days_since_irrigation += 1;",
                "          if (Days_since_irrigation >= Return_days)",
                "             IrrigatorIsAvailable = true;",
                "          ",
                "          //Is the soil dry enough to require irrigation?",
                "          SoilIsDry = false;",
                "          double CurrentRootDepth = 0;",
                "          double RootDepth = root.Depth;",
                "          CurrentRootDepth = Math.Max(RootDepth, CurrentRootDepth);",
                "          ",
                "          double RelativeRootDepth = Math.Min(1.0, CurrentRootDepth / Top_Depth);",
                "          Top_Trigger = Math.Min(Top_Refull, Top_DUL - (Top_DUL - Top_LL) * RelativeRootDepth * (1-Trigger_Frac)); ",
                "          ",
                "          Accumulated_depth = 0;",
                "          Top_SW = 0;",
                "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                "          {",
                "             Top_SW += waterBalance.SWmm[layer];",
                "             Accumulated_depth += soilPhysical.Thickness[layer];",
                "          }",
                "          if (Top_SW <= Top_Trigger)",
                "             SoilIsDry = true;",
                "                ",
                "          //Lets bloody well irrigate then!!!!",
                "          if((IrrigationIsAvailable) && (SeasonIsOpen) && (CropIsActive) && (IrrigatorIsAvailable) && (SoilIsDry)) //The conditions are rife for irrigation",
                "          {",
                "             Amount_to_apply = Math.Min(Top_Refull - Top_SW, Maximum_Irrigation_Amount);",
                "             Amount_to_apply = Math.Min(Amount_to_apply, Season_Allocation - Season_Application); ",
                "             Amount_to_apply = Math.Max(Amount_to_apply, 0.0);",
                "             Irrigation.Apply(Amount_to_apply);",
                "             Days_since_irrigation = 0;",
                "             Season_Application += Amount_to_apply;",
                "             summary.WriteMessage(this, \"Automatic Irrigation\", MessageType.Diagnostic);",
                "            ",
                "          }",
                "       }",
                "    }",
                "}",
                "             ",
                "             "
              ],
              "Parameters": [
                {
                  "Key": "Irrigation_Yes_No",
                  "Value": "yes"
                },
                {
                  "Key": "Season_Start",
                  "Value": "1-Oct"
                },
                {
                  "Key": "Season_End",
                  "Value": "30-Apr"
                },
                {
                  "Key": "Season_Allocation",
                  "Value": "1000"
                },
                {
                  "Key": "Refull_Frac",
                  "Value": "0.9"
                },
                {
                  "Key": "Trigger_Frac",
                  "Value": "0.7"
                },
                {
                  "Key": "Return_days",
                  "Value": "3"
                },
                {
                  "Key": "Maximum_Irrigation_Amount",
                  "Value": "40"
                },
                {
                  "Key": "Top_Depth",
                  "Value": "600"
                }
              ],
              "Name": "AutomaticIrrigation",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "using APSIM.Shared.Utilities;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        ",
                "        [Separator(\"A component to apply fertiliser on one or more dates on every year of the simulation\")]",
                "",
                "        [Description(\"Type of fertiliser to apply? \")] ",
                "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                "",
                "        [Description(\"Enter the fertilisation dates as dd-mmm with comma separation (any year information entered will be ignored): \")] ",
                "        public string[] FertiliserDates { get; set; } ",
                "",
                "        [Description(\"Amount of fertiliser to be applied (kg /ha)\")] ",
                "        public double Amount { get; set; }",
                "",
                "        [Description(\"Is the above amount to be applied each time? (yes/ticked)? Or is it the total annual amount across all dates (no/unticked)\")] ",
                "        public bool AmountType { get; set; }",
                "        ",
                "        [EventSubscribe(\"DoManagement\")]",
                "        private void OnDoManagement(object sender, EventArgs e)",
                "        {",
                "            foreach (string ddMMM in FertiliserDates)",
                "            {",
                "                if (DateUtilities.DatesEqual(ddMMM, Clock.Today))",
                "                {",
                "                    if (AmountType)",
                "                        Fertiliser.Apply(amount: Amount, type: FertiliserType);",
                "                    else",
                "                        Fertiliser.Apply(amount: Amount / FertiliserDates.Length, type: FertiliserType);",
                "                }",
                "            }",
                "        }",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "FertiliserType",
                  "Value": "NO3N"
                },
                {
                  "Key": "FertiliserDates",
                  "Value": "1-Aug, 15-Aug, 1-Sep, 15-Sep, 1-Nov, 15-Nov, 1-dec, 15-dec, 1-Jan, 15-Jan, 1-Feb, 15-Feb, 1-Mar, 15-Mar"
                },
                {
                  "Key": "Amount",
                  "Value": "0"
                },
                {
                  "Key": "AmountType",
                  "Value": "False"
                }
              ],
              "Name": "ApplyFertOnDates",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.SimplePlantModels.SprumPastureInstance, Models",
              "EstablishDate": null,
              "AgeAtSimulationStart": 1.0,
              "YearsToMaxDimension": 1.0,
              "RUE": 1.0,
              "Presidue": 0.15,
              "RsenRate": 0.01,
              "Proot": 0.1,
              "PSBaseT": 5.0,
              "PSLOptT": 20.0,
              "PSUOptT": 25.0,
              "PSMaxT": 35.0,
              "GRINZ": false,
              "MaxRD": 600.0,
              "MaxHeight": 300.0,
              "MaxPrunedHeight": 100.0,
              "MaxCover": 0.97,
              "MinCover": 0.1,
              "ExtinctCoeff": 0.7,
              "RegrowthDuration": 300.0,
              "FullCanopyDuration": 10000.0,
              "BaseT": 5.0,
              "OptT": 25.0,
              "MaxT": 35.0,
              "RootNConc": 0.01,
              "LeafNConc": 0.05,
              "ResidueNConc": 0.01,
              "LegumePropn": 1.0,
              "GSMax": 0.006,
              "R50": 120.0,
              "SurfaceKL": 0.1,
              "WaterStress": false,
              "Name": "BasePasture",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Management.BiomassRemovalEvents, Models",
              "NameOfPlantToRemoveFrom": "SPRUM",
              "RemovalType": 0,
              "StageToSet": "StartRegrowth",
              "RemovalDates": [
                "1-12-1999",
                "20/2/2000",
                "2000-4-15"
              ],
              "BiomassRemovalFractions": [
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Residue",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.0,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.0,
                  "DeadToResidue": 0.0
                },
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Leaf",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.7,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.25,
                  "DeadToResidue": 0.5
                },
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Nodule",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.0,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.0,
                  "DeadToResidue": 0.0
                },
                {
                  "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                  "PlantName": "SPRUM",
                  "OrganName": "Root",
                  "TypeString": "Cutting",
                  "LiveToRemove": 0.0,
                  "DeadToRemove": 0.0,
                  "LiveToResidue": 0.0,
                  "DeadToResidue": 0.0
                }
              ],
              "Name": "OnCut",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "cover",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": 0,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Leaf.Canopy.CoverGreen",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": false,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Series1",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "Biomass",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": -16736653,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Leaf.Wt",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": true,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Leaf",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": -1663232,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Residue.Wt",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": true,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Residual",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": -2793984,
              "FactorToVaryColours": null,
              "FactorToVaryMarkers": null,
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "Clock.Today",
              "YFieldName": "SPRUM.Root.Wt",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": true,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Root",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Factorial.Experiment, Models",
      "DisabledSimNames": null,
      "Name": "PotentialYieldTest",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Memo, Models",
          "Text": "In this example we set up an experment using SPRUM to examin the effects of different potentil growth rates and fertiliser supply rates on pasture growth and soil nitrogen variables\n\n",
          "Name": "Description",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Factorial.Factors, Models",
          "Name": "Factors",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Factorial.Permutation, Models",
              "Name": "Permutation",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Factorial.Factor, Models",
                  "Specification": "",
                  "Name": "PotentialYield",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].RUE = 0.5"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Low",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].RUE = 0.75"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Mid",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].RUE = 1.0"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "High",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Factorial.Factor, Models",
                  "Specification": "",
                  "Name": "NReplacement",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[ApplyFertOnDates].Script.Amount = 100"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "100kgN",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[ApplyFertOnDates].Script.Amount = 300"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "300kgN",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[ApplyFertOnDates].Script.Amount = 600"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "600kgN",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Simulation, Models",
          "Descriptors": null,
          "Name": "CropCompBase",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Climate.Weather, Models",
              "ConstantsFile": null,
              "FileName": "%root%/Examples/WeatherFiles/NZ_Lincoln",
              "ExcelWorkSheetName": null,
              "Name": "Weather",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Clock, Models",
              "Start": "1999-08-01T00:00:00",
              "End": "2000-08-01T00:00:00",
              "Name": "Clock",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Summary, Models",
              "Verbosity": 100,
              "Name": "Summary",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
              "Name": "Soil Arbitrator",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Core.Zone, Models",
              "Area": 1.0,
              "Slope": 0.0,
              "AspectAngle": 0.0,
              "Altitude": 50.0,
              "CanopyType": null,
              "Name": "Field",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.MicroClimate, Models",
                  "a_interception": 0.0,
                  "b_interception": 1.0,
                  "c_interception": 0.0,
                  "d_interception": 0.0,
                  "SoilHeatFluxFraction": 0.4,
                  "MinimumHeightDiffForNewLayer": 0.0,
                  "NightInterceptionFraction": 0.5,
                  "ReferenceHeight": 2.0,
                  "Name": "MicroClimate",
                  "ResourceName": "MicroClimate",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Soil, Models",
                  "RecordNumber": 0,
                  "ASCOrder": null,
                  "ASCSubOrder": null,
                  "SoilType": "Generic soil",
                  "LocalName": "",
                  "Site": "",
                  "NearestTown": "",
                  "Region": "",
                  "State": "",
                  "Country": "New Zealand",
                  "NaturalVegetation": null,
                  "ApsoilNumber": null,
                  "Latitude": 37.5,
                  "Longitude": 172.5,
                  "LocationAccuracy": null,
                  "YearOfSampling": null,
                  "DataSource": null,
                  "Comments": "",
                  "Name": "Soil",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.Chemical, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "PH": [
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0
                      ],
                      "PHUnits": 0,
                      "EC": null,
                      "ESP": null,
                      "CEC": null,
                      "ECMetadata": null,
                      "CLMetadata": null,
                      "CECMetadata": null,
                      "ESPMetadata": null,
                      "PHMetadata": null,
                      "Name": "Chemical",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Physical, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "ParticleSizeSand": [
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0
                      ],
                      "ParticleSizeSilt": [
                        60.0,
                        60.0,
                        60.0,
                        60.0,
                        60.0,
                        60.0,
                        60.0
                      ],
                      "ParticleSizeClay": [
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0
                      ],
                      "Rocks": [
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN"
                      ],
                      "Texture": null,
                      "BD": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "AirDry": [
                        0.09,
                        0.09,
                        0.09,
                        0.09,
                        0.09,
                        0.09,
                        0.09
                      ],
                      "LL15": [
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15
                      ],
                      "DUL": [
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35
                      ],
                      "SAT": [
                        0.5,
                        0.5,
                        0.5,
                        0.5,
                        0.5,
                        0.5,
                        0.5
                      ],
                      "KS": [
                        500.0,
                        500.0,
                        500.0,
                        500.0,
                        500.0,
                        500.0,
                        500.0
                      ],
                      "BDMetadata": null,
                      "AirDryMetadata": null,
                      "LL15Metadata": null,
                      "DULMetadata": null,
                      "SATMetadata": null,
                      "KSMetadata": null,
                      "RocksMetadata": null,
                      "TextureMetadata": null,
                      "ParticleSizeSandMetadata": null,
                      "ParticleSizeSiltMetadata": null,
                      "ParticleSizeClayMetadata": null,
                      "Name": "Physical",
                      "ResourceName": null,
                      "Children": [
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.15,
                            0.15,
                            0.15,
                            0.15,
                            0.15,
                            0.15,
                            0.15
                          ],
                          "KL": [
                            0.08,
                            0.08,
                            0.08,
                            0.08,
                            0.08,
                            0.08,
                            0.08
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": null,
                          "KLMetadata": null,
                          "XFMetadata": null,
                          "Name": "SPRUMSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.WaterModel.WaterBalance, Models",
                      "SummerDate": "1-Oct",
                      "SummerU": 8.0,
                      "SummerCona": 4.0,
                      "WinterDate": "1-Apr",
                      "WinterU": 4.0,
                      "WinterCona": 1.5,
                      "DiffusConst": 0.0,
                      "DiffusSlope": 0.0,
                      "Salb": 0.2,
                      "CN2Bare": 60.0,
                      "CNRed": 10.0,
                      "CNCov": 0.8,
                      "DischargeWidth": 0.0,
                      "CatchmentArea": 0.0,
                      "PSIDul": -100.0,
                      "Thickness": [
                        150.0,
                        150.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "SWCON": [
                        0.5,
                        0.5,
                        0.43,
                        0.375,
                        0.34,
                        0.35,
                        0.4,
                        0.48
                      ],
                      "KLAT": [
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN"
                      ],
                      "Name": "SoilWater",
                      "ResourceName": "WaterBalance",
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Nutrients.Nutrient, Models",
                      "Name": "Nutrient",
                      "ResourceName": "Nutrient",
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Organic, Models",
                      "FOMCNRatio": 30.0,
                      "Thickness": [
                        100.0,
                        200.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0
                      ],
                      "Carbon": [
                        2.0,
                        1.8,
                        1.5,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "CarbonUnits": 0,
                      "SoilCNRatio": [
                        11.5,
                        11.5,
                        11.5,
                        11.5,
                        11.5,
                        11.5
                      ],
                      "FBiom": [
                        0.025,
                        0.025,
                        0.015,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FInert": [
                        0.3,
                        0.4,
                        0.6,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "FOM": [
                        1243.931,
                        833.8319214727269,
                        457.61666105087295,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "CarbonMetadata": null,
                      "FOMMetadata": null,
                      "Name": "Organic",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Water, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.34999999999999976
                      ],
                      "FilledFromTop": true,
                      "Name": "Water",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NO3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NH4",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 1,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "Urea",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                      "Thickness": null,
                      "InitialValues": null,
                      "Name": "Temperature",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Surface.SurfaceOrganicMatter, Models",
                  "SurfOM": [],
                  "Canopies": [],
                  "InitialResidueName": "wheat",
                  "InitialResidueType": "wheat",
                  "InitialResidueMass": 2000.0,
                  "InitialStandingFraction": 0.0,
                  "InitialCPR": 0.0,
                  "InitialCNR": 80.0,
                  "Name": "surface organic matter",
                  "ResourceName": "SurfaceOrganicMatter",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Irrigation, Models",
                  "Name": "Irrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Fertiliser, Models",
                  "Name": "Fertiliser",
                  "ResourceName": "Fertiliser",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Report, Models",
                  "VariableNames": [
                    "[Clock].Today",
                    "[SPRUM].IsAlive",
                    "[SPRUM].DaysAfterSowing",
                    "[SPRUM].Phenology.CurrentPhaseName",
                    "[SPRUM].Phenology.Stage",
                    "[SPRUM].Residue.Wt",
                    "[Phenology].AccumulatedTT",
                    "[SPRUM].Total.Wt",
                    "[SPRUM].Total.N",
                    "[SPRUM].Leaf.Photosynthesis",
                    "[SPRUM].Leaf.Canopy.Transpiration",
                    "[SPRUM].Root.Network.Depth",
                    "[SPRUM].Leaf.Canopy.CoverGreen",
                    "[SPRUM].Leaf.Canopy.LAI",
                    "[SPRUM].Height",
                    "[SPRUM].Leaf.Wt",
                    "[SPRUM].RootUptakesArbitrator.NitrogenUptake.Gpm2",
                    "[SPRUM].Root.Wt",
                    "[SPRUM].Root.Network.NUptakeLayered",
                    "[Fertiliser].NitrogenApplied",
                    "[Soil].Water.MM",
                    "[Soil].Nutrient.MineralN",
                    "[Soil].Nutrient.MineralisedN",
                    "[NO3].Flow"
                  ],
                  "EventNames": [
                    "[Clock].DoReport"
                  ],
                  "GroupByVariableName": null,
                  "Name": "Report",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Newtonsoft.Json;",
                    "using Models.PMF.Phen;",
                    "using Models.Soils.Nutrients;",
                    "using System;",
                    "using Models.Core;",
                    "using Models.PMF;",
                    "using Models.Soils;",
                    "using System.Xml.Serialization;",
                    "using APSIM.Shared.Utilities;",
                    "using Models.PMF.Organs;",
                    "using Models.Interfaces;",
                    "",
                    "        ",
                    "namespace Models",
                    "{",
                    "   [Serializable] ",
                    "   [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                    "    public class Script : Model",
                    "    {      ",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Irrigation Irrigation;",
                    "        [Link] private Clock Clock;",
                    "        [Link] private Soil Soil;",
                    "        [Link] private Plant SPRUM;",
                    "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Root.Network\")]",
                    "        private RootNetwork root;",
                    "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Phenology\")]",
                    "        private Phenology phenology;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private ISoilWater waterBalance;",
                    "       //Communication to other modules",
                    "       ",
                    "       //User inputs from properties tab",
                    "       [Description(\"Irrigation on (yes or no)\")]",
                    "       public string Irrigation_Yes_No { get; set; }",
                    "       [Description(\"SeasonStart (dd-MMM)\")]",
                    "       public string Season_Start { get; set; }",
                    "       [Description(\"SeasonEnd (dd-MMM)\")]",
                    "       public string Season_End { get; set; }",
                    "       [Description(\"Season Allocation (mm)\")]",
                    "       public double Season_Allocation { get; set; }",
                    "       [Description(\"% PAWC to refill soil to (0-1)\")]",
                    "       public double Refull_Frac { get; set; }",
                    "       [Description(\"% PAWC to trigger irrigation (0-1)\")]",
                    "       public double Trigger_Frac { get; set; }",
                    "       [Description(\"Minimum days for irrigation to return\")]",
                    "       public double Return_days { get; set; }",
                    "       [Description(\"Maximum irrigation application (mm)\")]",
                    "       public double Maximum_Irrigation_Amount { get; set; }",
                    "       [Description(\"Depth to calculate PAWC (mm)\")]",
                    "       public double Top_Depth { get; set; }",
                    "       ",
                    "       //Class members",
                    "       [JsonIgnore] private bool IrrigationIsAvailable { get; set; }",
                    "       [JsonIgnore] public bool SeasonIsOpen { get; set; }",
                    "       [JsonIgnore] private bool CropIsActive { get; set; }",
                    "       [JsonIgnore] private bool IrrigatorIsAvailable { get; set; }",
                    "       [JsonIgnore] private bool SoilIsDry { get; set; }",
                    "       [JsonIgnore] public double Top_DUL { get; set; }",
                    "       [JsonIgnore] public double Top_Refull { get; set; }",
                    "       [JsonIgnore] public double Top_Trigger { get; set; }",
                    "       [JsonIgnore] public double Top_LL { get; set; }",
                    "       [JsonIgnore] public double Top_SW { get; set; }",
                    "       [JsonIgnore] public double Accumulated_depth { get; set; }   ",
                    "       [JsonIgnore] public double Days_since_irrigation { get; set; }",
                    "       [JsonIgnore] public double Amount_to_apply { get; set; }",
                    "       [JsonIgnore] public double Season_Application { get; set; }",
                    "        ",
                    "       //Variables for date logic testing",
                    "       [JsonIgnore] public string StartString {get; set;}",
                    "       [JsonIgnore] public string EndString {get; set;}",
                    "       [JsonIgnore] public DateTime StartDate {get; set;}",
                    "       [JsonIgnore] public DateTime EndDate {get; set;}",
                    "       [JsonIgnore] public int TodayYear {get; set;}",
                    "       [JsonIgnore] public int TodayMonth {get; set;}",
                    "       [JsonIgnore] public int StartMonth {get; set;}",
                    "       [JsonIgnore] public int EndMonth {get; set;}",
                    "       [JsonIgnore] public int TodayDay {get; set;}",
                    "       [JsonIgnore] public int StartDay {get; set;}",
                    "       [JsonIgnore] public int EndDay {get; set;}",
                    "       ",
                    "    ",
                    "       //Calculate static soil variables",
                    "       [EventSubscribe(\"StartOfSimulation\")]",
                    "       private void OnStartOfSimulation(object sender, EventArgs e)",
                    "       {   ",
                    "          //Calculated soil water variables",
                    "          Accumulated_depth = 0;",
                    "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                    "          {",
                    "             Top_LL += soilPhysical.LL15mm[layer];",
                    "             Top_DUL += soilPhysical.DULmm[layer];",
                    "             Accumulated_depth += soilPhysical.Thickness[layer];",
                    "          }",
                    "          Top_Refull = Top_LL + (Top_DUL - Top_LL) * Refull_Frac;",
                    "       }",
                    "       ",
                    "      ",
                    "       //Determine daily requirement for irrigation",
                    "        [EventSubscribe(\"StartOfDay\")]",
                    "           private void OnStartOfDay(object sender, EventArgs e)",
                    "           { ",
                    "          //Can we irrigate?",
                    "          IrrigationIsAvailable = false; ",
                    "          if (Irrigation_Yes_No == \"yes\")",
                    "             IrrigationIsAvailable = true; ",
                    "    ",
                    "          //Are we Allowed to Irrigate?",
                    "          TodayYear = Clock.Today.Year;",
                    "          StartString = Season_Start + \"-\" + TodayYear.ToString();",
                    "          EndString = Season_End + \"-\" + TodayYear.ToString();",
                    "          StartDate = DateTime.Parse(StartString);",
                    "          EndDate = DateTime.Parse(EndString);",
                    "          TodayMonth = Clock.Today.Month;",
                    "          TodayDay = Clock.Today.Day;",
                    "          StartDay = StartDate.Day;",
                    "          StartMonth = StartDate.Month;",
                    "          EndDay = EndDate.Day;",
                    "          EndMonth = EndDate.Month;",
                    "          ",
                    "          SeasonIsOpen = false;",
                    "          //if we are in the spring and after the start date then yes",
                    "          if((Clock.Today.Month > 6) && (Clock.Today >= StartDate))",
                    "          SeasonIsOpen = true;",
                    "          //if we are in the autumn and before the end date then yes",
                    "          if((Clock.Today.Month <= 6) && (Clock.Today <= EndDate))",
                    "          SeasonIsOpen = true;",
                    "          ",
                    "          //Is there a crop in the ground that needs irrigation?",
                    "          CropIsActive = false;",
                    "          if ((phenology.Stage >= 3.0) && (phenology.Stage < 6.0))",
                    "                CropIsActive = true;",
                    "          ",
                    "          //Is the irrigator available?",
                    "          IrrigatorIsAvailable = false;",
                    "          Days_since_irrigation += 1;",
                    "          if (Days_since_irrigation >= Return_days)",
                    "             IrrigatorIsAvailable = true;",
                    "          ",
                    "          //Is the soil dry enough to require irrigation?",
                    "          SoilIsDry = false;",
                    "          double CurrentRootDepth = 0;",
                    "          double RootDepth = root.Depth;",
                    "          CurrentRootDepth = Math.Max(RootDepth, CurrentRootDepth);",
                    "          ",
                    "          double RelativeRootDepth = Math.Min(1.0, CurrentRootDepth / Top_Depth);",
                    "          Top_Trigger = Math.Min(Top_Refull, Top_DUL - (Top_DUL - Top_LL) * RelativeRootDepth * (1-Trigger_Frac)); ",
                    "          ",
                    "          Accumulated_depth = 0;",
                    "          Top_SW = 0;",
                    "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                    "          {",
                    "             Top_SW += waterBalance.SWmm[layer];",
                    "             Accumulated_depth += soilPhysical.Thickness[layer];",
                    "          }",
                    "          if (Top_SW <= Top_Trigger)",
                    "             SoilIsDry = true;",
                    "                ",
                    "          //Lets bloody well irrigate then!!!!",
                    "          if((IrrigationIsAvailable) && (SeasonIsOpen) && (CropIsActive) && (IrrigatorIsAvailable) && (SoilIsDry)) //The conditions are rife for irrigation",
                    "          {",
                    "             Amount_to_apply = Math.Min(Top_Refull - Top_SW, Maximum_Irrigation_Amount);",
                    "             Amount_to_apply = Math.Min(Amount_to_apply, Season_Allocation - Season_Application); ",
                    "             Amount_to_apply = Math.Max(Amount_to_apply, 0.0);",
                    "             Irrigation.Apply(Amount_to_apply);",
                    "             Days_since_irrigation = 0;",
                    "             Season_Application += Amount_to_apply;",
                    "             summary.WriteMessage(this, \"Automatic Irrigation\", MessageType.Diagnostic);",
                    "            ",
                    "          }",
                    "       }",
                    "    }",
                    "}",
                    "             ",
                    "             "
                  ],
                  "Parameters": [
                    {
                      "Key": "Irrigation_Yes_No",
                      "Value": "yes"
                    },
                    {
                      "Key": "Season_Start",
                      "Value": "1-Oct"
                    },
                    {
                      "Key": "Season_End",
                      "Value": "30-Apr"
                    },
                    {
                      "Key": "Season_Allocation",
                      "Value": "1000"
                    },
                    {
                      "Key": "Refull_Frac",
                      "Value": "0.9"
                    },
                    {
                      "Key": "Trigger_Frac",
                      "Value": "0.7"
                    },
                    {
                      "Key": "Return_days",
                      "Value": "3"
                    },
                    {
                      "Key": "Maximum_Irrigation_Amount",
                      "Value": "40"
                    },
                    {
                      "Key": "Top_Depth",
                      "Value": "600"
                    }
                  ],
                  "Name": "AutomaticIrrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Models.Soils;",
                    "using System;",
                    "using Models.Core;",
                    "using Models.PMF;",
                    "using APSIM.Shared.Utilities;",
                    "namespace Models",
                    "{",
                    "    [Serializable]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] Clock Clock;",
                    "        [Link] Fertiliser Fertiliser;",
                    "        ",
                    "        [Separator(\"A component to apply fertiliser on one or more dates on every year of the simulation\")]",
                    "",
                    "        [Description(\"Type of fertiliser to apply? \")] ",
                    "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                    "",
                    "        [Description(\"Enter the fertilisation dates as dd-mmm with comma separation (any year information entered will be ignored): \")] ",
                    "        public string[] FertiliserDates { get; set; } ",
                    "",
                    "        [Description(\"Amount of fertiliser to be applied (kg /ha)\")] ",
                    "        public double Amount { get; set; }",
                    "",
                    "        [Description(\"Is the above amount to be applied each time? (yes/ticked)? Or is it the total annual amount across all dates (no/unticked)\")] ",
                    "        public bool AmountType { get; set; }",
                    "        ",
                    "        [EventSubscribe(\"DoManagement\")]",
                    "        private void OnDoManagement(object sender, EventArgs e)",
                    "        {",
                    "            foreach (string ddMMM in FertiliserDates)",
                    "            {",
                    "                if (DateUtilities.DatesEqual(ddMMM, Clock.Today))",
                    "                {",
                    "                    if (AmountType)",
                    "                        Fertiliser.Apply(amount: Amount, type: FertiliserType);",
                    "                    else",
                    "                        Fertiliser.Apply(amount: Amount / FertiliserDates.Length, type: FertiliserType);",
                    "                }",
                    "            }",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "FertiliserType",
                      "Value": "NO3N"
                    },
                    {
                      "Key": "FertiliserDates",
                      "Value": "1-Aug, 15-Aug, 1-Sep, 15-Sep, 1-Nov, 15-Nov, 1-dec, 15-dec, 1-Jan, 15-Jan, 1-Feb, 15-Feb, 1-Mar, 15-Mar"
                    },
                    {
                      "Key": "Amount",
                      "Value": "0"
                    },
                    {
                      "Key": "AmountType",
                      "Value": "False"
                    }
                  ],
                  "Name": "ApplyFertOnDates",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.PMF.Plant, Models",
                  "Phenology": null,
                  "Arbitrator": null,
                  "structure": null,
                  "Leaf": null,
                  "Root": null,
                  "Name": "SPRUM",
                  "ResourceName": "SPRUM",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.PMF.SimplePlantModels.SprumPastureInstance, Models",
                  "EstablishDate": null,
                  "AgeAtSimulationStart": 1.0,
                  "YearsToMaxDimension": 1.0,
                  "RUE": 1.0,
                  "Presidue": 0.15,
                  "RsenRate": 0.01,
                  "Proot": 0.1,
                  "PSBaseT": 5.0,
                  "PSLOptT": 20.0,
                  "PSUOptT": 25.0,
                  "PSMaxT": 35.0,
                  "GRINZ": false,
                  "MaxRD": 600.0,
                  "MaxHeight": 300.0,
                  "MaxPrunedHeight": 100.0,
                  "MaxCover": 0.97,
                  "MinCover": 0.5,
                  "ExtinctCoeff": 0.7,
                  "RegrowthDuration": 300.0,
                  "FullCanopyDuration": 0.0,
                  "BaseT": 5.0,
                  "OptT": 25.0,
                  "MaxT": 35.0,
                  "RootNConc": 0.01,
                  "LeafNConc": 0.05,
                  "ResidueNConc": 0.01,
                  "LegumePropn": 0.0,
                  "GSMax": 0.006,
                  "R50": 120.0,
                  "SurfaceKL": 0.1,
                  "WaterStress": false,
                  "Name": "BasePasture",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Management.BiomassRemovalEvents, Models",
                  "NameOfPlantToRemoveFrom": "SPRUM",
                  "RemovalType": 0,
                  "StageToSet": null,
                  "RemovalDates": null,
                  "BiomassRemovalFractions": [
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Residue",
                      "TypeString": "Cutting",
                      "LiveToRemove": 0.0,
                      "DeadToRemove": 0.0,
                      "LiveToResidue": 0.5,
                      "DeadToResidue": 0.5
                    },
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Leaf",
                      "TypeString": "Cutting",
                      "LiveToRemove": 1.0,
                      "DeadToRemove": 1.0,
                      "LiveToResidue": 0.0,
                      "DeadToResidue": 0.0
                    },
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Nodule",
                      "TypeString": "Cutting",
                      "LiveToRemove": 0.0,
                      "DeadToRemove": 0.0,
                      "LiveToResidue": 0.0,
                      "DeadToResidue": 0.0
                    },
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Root",
                      "TypeString": "Cutting",
                      "LiveToRemove": 0.0,
                      "DeadToRemove": 0.0,
                      "LiveToResidue": 0.0,
                      "DeadToResidue": 0.0
                    }
                  ],
                  "Name": "OnCut",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": 0.0,
              "Maximum": 1.0,
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "Cover",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": 0,
              "FactorToVaryColours": "PotentialYield",
              "FactorToVaryMarkers": "NReplacement",
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "SPRUM.DaysAfterSowing",
              "YFieldName": "SPRUM.Leaf.Canopy.CoverGreen",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": false,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Series",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "Name": "Biomass",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Photosynthesis Accum",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -16736653,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "NReplacement",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Leaf.Photosynthesis",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": false,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": true,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Photosynthesis",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Residues",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -3376729,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "NReplacement",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Clock.Today",
                  "YFieldName": "SPRUM.Residue.Wt",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": false,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Residues",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Leaf",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -1663232,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "NReplacement",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Leaf.Wt",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": false,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Leaf",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Root",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -11094807,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "NReplacement",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Root.Wt",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": false,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Root",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "Name": "Nitrogen",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.DaysAfterSowing",
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.Root.NUptake",
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Uptake",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -3376729,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "NReplacement",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.RootUptakesArbitrator.NitrogenUptake.Gpm2",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": false,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Uptake",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.DaysAfterSowing",
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.Total.N",
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Total N",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -16736653,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "NReplacement",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Total.N",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "TotalN",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Factorial.Experiment, Models",
      "DisabledSimNames": null,
      "Name": "NFixationTest",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Memo, Models",
          "Text": "In this example we use SPRUM in an experiment to compare the effects of different legume contents on pasture production",
          "Name": "Description",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Factorial.Factors, Models",
          "Name": "Factors",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Factorial.Permutation, Models",
              "Name": "Permutation",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Factorial.Factor, Models",
                  "Specification": "",
                  "Name": "PotentialYield",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].RUE = 0.5"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Low",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].RUE = 0.75"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Mid",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].RUE = 1.0"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "High",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Factorial.Factor, Models",
                  "Specification": "",
                  "Name": "Legume",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].LegumePropn = 1.0"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Legume",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].LegumePropn = 0.2"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Mix",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[BasePasture].LegumePropn = 0.0"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Grass",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Simulation, Models",
          "Descriptors": null,
          "Name": "LegCompBase",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Climate.Weather, Models",
              "ConstantsFile": null,
              "FileName": "%root%/Examples/WeatherFiles/NZ_Lincoln",
              "ExcelWorkSheetName": null,
              "Name": "Weather",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Clock, Models",
              "Start": "1999-08-01T00:00:00",
              "End": "2000-08-01T00:00:00",
              "Name": "Clock",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Summary, Models",
              "Verbosity": 100,
              "Name": "Summary",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
              "Name": "Soil Arbitrator",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Core.Zone, Models",
              "Area": 1.0,
              "Slope": 0.0,
              "AspectAngle": 0.0,
              "Altitude": 50.0,
              "CanopyType": null,
              "Name": "Field",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.MicroClimate, Models",
                  "a_interception": 0.0,
                  "b_interception": 1.0,
                  "c_interception": 0.0,
                  "d_interception": 0.0,
                  "SoilHeatFluxFraction": 0.4,
                  "MinimumHeightDiffForNewLayer": 0.0,
                  "NightInterceptionFraction": 0.5,
                  "ReferenceHeight": 2.0,
                  "Name": "MicroClimate",
                  "ResourceName": "MicroClimate",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Soil, Models",
                  "RecordNumber": 0,
                  "ASCOrder": null,
                  "ASCSubOrder": null,
                  "SoilType": "Generic soil",
                  "LocalName": "",
                  "Site": "",
                  "NearestTown": "",
                  "Region": "",
                  "State": "",
                  "Country": "New Zealand",
                  "NaturalVegetation": null,
                  "ApsoilNumber": null,
                  "Latitude": 37.5,
                  "Longitude": 172.5,
                  "LocationAccuracy": null,
                  "YearOfSampling": null,
                  "DataSource": null,
                  "Comments": "",
                  "Name": "Soil",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.Chemical, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "PH": [
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0
                      ],
                      "PHUnits": 0,
                      "EC": null,
                      "ESP": null,
                      "CEC": null,
                      "ECMetadata": null,
                      "CLMetadata": null,
                      "CECMetadata": null,
                      "ESPMetadata": null,
                      "PHMetadata": null,
                      "Name": "Chemical",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Physical, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "ParticleSizeSand": [
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0
                      ],
                      "ParticleSizeSilt": [
                        60.0,
                        60.0,
                        60.0,
                        60.0,
                        60.0,
                        60.0,
                        60.0
                      ],
                      "ParticleSizeClay": [
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0,
                        20.0
                      ],
                      "Rocks": [
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN"
                      ],
                      "Texture": null,
                      "BD": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "AirDry": [
                        0.09,
                        0.09,
                        0.09,
                        0.09,
                        0.09,
                        0.09,
                        0.09
                      ],
                      "LL15": [
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15,
                        0.15
                      ],
                      "DUL": [
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35
                      ],
                      "SAT": [
                        0.5,
                        0.5,
                        0.5,
                        0.5,
                        0.5,
                        0.5,
                        0.5
                      ],
                      "KS": [
                        500.0,
                        500.0,
                        500.0,
                        500.0,
                        500.0,
                        500.0,
                        500.0
                      ],
                      "BDMetadata": null,
                      "AirDryMetadata": null,
                      "LL15Metadata": null,
                      "DULMetadata": null,
                      "SATMetadata": null,
                      "KSMetadata": null,
                      "RocksMetadata": null,
                      "TextureMetadata": null,
                      "ParticleSizeSandMetadata": null,
                      "ParticleSizeSiltMetadata": null,
                      "ParticleSizeClayMetadata": null,
                      "Name": "Physical",
                      "ResourceName": null,
                      "Children": [
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.15,
                            0.15,
                            0.15,
                            0.15,
                            0.15,
                            0.15,
                            0.15
                          ],
                          "KL": [
                            0.08,
                            0.08,
                            0.08,
                            0.08,
                            0.08,
                            0.08,
                            0.08
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": null,
                          "KLMetadata": null,
                          "XFMetadata": null,
                          "Name": "SPRUMSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.WaterModel.WaterBalance, Models",
                      "SummerDate": "1-Oct",
                      "SummerU": 8.0,
                      "SummerCona": 4.0,
                      "WinterDate": "1-Apr",
                      "WinterU": 4.0,
                      "WinterCona": 1.5,
                      "DiffusConst": 0.0,
                      "DiffusSlope": 0.0,
                      "Salb": 0.2,
                      "CN2Bare": 60.0,
                      "CNRed": 10.0,
                      "CNCov": 0.8,
                      "DischargeWidth": 0.0,
                      "CatchmentArea": 0.0,
                      "PSIDul": -100.0,
                      "Thickness": [
                        150.0,
                        150.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "SWCON": [
                        0.5,
                        0.5,
                        0.43,
                        0.375,
                        0.34,
                        0.35,
                        0.4,
                        0.48
                      ],
                      "KLAT": [
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN",
                        "NaN"
                      ],
                      "Name": "SoilWater",
                      "ResourceName": "WaterBalance",
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Nutrients.Nutrient, Models",
                      "Name": "Nutrient",
                      "ResourceName": "Nutrient",
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Organic, Models",
                      "FOMCNRatio": 30.0,
                      "Thickness": [
                        100.0,
                        200.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0
                      ],
                      "Carbon": [
                        2.0,
                        1.8,
                        1.5,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "CarbonUnits": 0,
                      "SoilCNRatio": [
                        11.5,
                        11.5,
                        11.5,
                        11.5,
                        11.5,
                        11.5
                      ],
                      "FBiom": [
                        0.025,
                        0.025,
                        0.015,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FInert": [
                        0.3,
                        0.4,
                        0.6,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "FOM": [
                        1243.931,
                        833.8319214727269,
                        457.61666105087295,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "CarbonMetadata": null,
                      "FOMMetadata": null,
                      "Name": "Organic",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Water, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.35,
                        0.34999999999999976
                      ],
                      "FilledFromTop": true,
                      "Name": "Water",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NO3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NH4",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        300.0,
                        200.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 1,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "Urea",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                      "Thickness": null,
                      "InitialValues": null,
                      "Name": "Temperature",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Surface.SurfaceOrganicMatter, Models",
                  "SurfOM": [],
                  "Canopies": [],
                  "InitialResidueName": "wheat",
                  "InitialResidueType": "wheat",
                  "InitialResidueMass": 2000.0,
                  "InitialStandingFraction": 0.0,
                  "InitialCPR": 0.0,
                  "InitialCNR": 80.0,
                  "Name": "surface organic matter",
                  "ResourceName": "SurfaceOrganicMatter",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Irrigation, Models",
                  "Name": "Irrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Fertiliser, Models",
                  "Name": "Fertiliser",
                  "ResourceName": "Fertiliser",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Report, Models",
                  "VariableNames": [
                    "[Clock].Today",
                    "[SPRUM].IsAlive",
                    "[SPRUM].DaysAfterSowing",
                    "[SPRUM].Phenology.CurrentPhaseName",
                    "[SPRUM].Phenology.Stage",
                    "[SPRUM].Phenology.Age.YearDecimal",
                    "[SPRUM].Residue.Wt",
                    "[Phenology].AccumulatedTT",
                    "[SPRUM].Total.Wt",
                    "[SPRUM].Total.N",
                    "[SPRUM].Leaf.Photosynthesis",
                    "[SPRUM].Leaf.Canopy.Transpiration",
                    "[SPRUM].Root.Network.Depth",
                    "[SPRUM].Leaf.Canopy.CoverGreen",
                    "[SPRUM].Leaf.Canopy.LAI",
                    "[SPRUM].Height",
                    "[SPRUM].Leaf.Wt",
                    "[SPRUM].RootUptakesArbitrator.NitrogenUptake.Gpm2",
                    "[SPRUM].Root.Wt",
                    "[SPRUM].Root.Network.NUptakeLayered",
                    "[Fertiliser].NitrogenApplied",
                    "[Soil].Water.MM",
                    "[Soil].Nutrient.MineralN",
                    "[Soil].Nutrient.MineralisedN",
                    "[NO3].Flow"
                  ],
                  "EventNames": [
                    "[Clock].DoReport"
                  ],
                  "GroupByVariableName": null,
                  "Name": "Report",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.PMF.Plant, Models",
                  "Phenology": null,
                  "Arbitrator": null,
                  "structure": null,
                  "Leaf": null,
                  "Root": null,
                  "Name": "SPRUM",
                  "ResourceName": "SPRUM",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Newtonsoft.Json;",
                    "using Models.PMF.Phen;",
                    "using Models.Soils.Nutrients;",
                    "using System;",
                    "using Models.Core;",
                    "using Models.PMF;",
                    "using Models.Soils;",
                    "using System.Xml.Serialization;",
                    "using APSIM.Shared.Utilities;",
                    "using Models.PMF.Organs;",
                    "using Models.Interfaces;",
                    "",
                    "        ",
                    "namespace Models",
                    "{",
                    "   [Serializable] ",
                    "   [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                    "    public class Script : Model",
                    "    {      ",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Irrigation Irrigation;",
                    "        [Link] private Clock Clock;",
                    "        [Link] private Soil Soil;",
                    "        [Link] private Plant SPRUM;",
                    "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Root.Network\")]",
                    "        private RootNetwork root;",
                    "        [Link(Type = LinkType.Path, Path = \"[SPRUM].Phenology\")]",
                    "        private Phenology phenology;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private ISoilWater waterBalance;",
                    "       //Communication to other modules",
                    "       ",
                    "       //User inputs from properties tab",
                    "       [Description(\"Irrigation on (yes or no)\")]",
                    "       public string Irrigation_Yes_No { get; set; }",
                    "       [Description(\"SeasonStart (dd-MMM)\")]",
                    "       public string Season_Start { get; set; }",
                    "       [Description(\"SeasonEnd (dd-MMM)\")]",
                    "       public string Season_End { get; set; }",
                    "       [Description(\"Season Allocation (mm)\")]",
                    "       public double Season_Allocation { get; set; }",
                    "       [Description(\"% PAWC to refill soil to (0-1)\")]",
                    "       public double Refull_Frac { get; set; }",
                    "       [Description(\"% PAWC to trigger irrigation (0-1)\")]",
                    "       public double Trigger_Frac { get; set; }",
                    "       [Description(\"Minimum days for irrigation to return\")]",
                    "       public double Return_days { get; set; }",
                    "       [Description(\"Maximum irrigation application (mm)\")]",
                    "       public double Maximum_Irrigation_Amount { get; set; }",
                    "       [Description(\"Depth to calculate PAWC (mm)\")]",
                    "       public double Top_Depth { get; set; }",
                    "       ",
                    "       //Class members",
                    "       [JsonIgnore] private bool IrrigationIsAvailable { get; set; }",
                    "       [JsonIgnore] public bool SeasonIsOpen { get; set; }",
                    "       [JsonIgnore] private bool CropIsActive { get; set; }",
                    "       [JsonIgnore] private bool IrrigatorIsAvailable { get; set; }",
                    "       [JsonIgnore] private bool SoilIsDry { get; set; }",
                    "       [JsonIgnore] public double Top_DUL { get; set; }",
                    "       [JsonIgnore] public double Top_Refull { get; set; }",
                    "       [JsonIgnore] public double Top_Trigger { get; set; }",
                    "       [JsonIgnore] public double Top_LL { get; set; }",
                    "       [JsonIgnore] public double Top_SW { get; set; }",
                    "       [JsonIgnore] public double Accumulated_depth { get; set; }   ",
                    "       [JsonIgnore] public double Days_since_irrigation { get; set; }",
                    "       [JsonIgnore] public double Amount_to_apply { get; set; }",
                    "       [JsonIgnore] public double Season_Application { get; set; }",
                    "        ",
                    "       //Variables for date logic testing",
                    "       [JsonIgnore] public string StartString {get; set;}",
                    "       [JsonIgnore] public string EndString {get; set;}",
                    "       [JsonIgnore] public DateTime StartDate {get; set;}",
                    "       [JsonIgnore] public DateTime EndDate {get; set;}",
                    "       [JsonIgnore] public int TodayYear {get; set;}",
                    "       [JsonIgnore] public int TodayMonth {get; set;}",
                    "       [JsonIgnore] public int StartMonth {get; set;}",
                    "       [JsonIgnore] public int EndMonth {get; set;}",
                    "       [JsonIgnore] public int TodayDay {get; set;}",
                    "       [JsonIgnore] public int StartDay {get; set;}",
                    "       [JsonIgnore] public int EndDay {get; set;}",
                    "       ",
                    "    ",
                    "       //Calculate static soil variables",
                    "       [EventSubscribe(\"StartOfSimulation\")]",
                    "       private void OnStartOfSimulation(object sender, EventArgs e)",
                    "       {   ",
                    "          //Calculated soil water variables",
                    "          Accumulated_depth = 0;",
                    "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                    "          {",
                    "             Top_LL += soilPhysical.LL15mm[layer];",
                    "             Top_DUL += soilPhysical.DULmm[layer];",
                    "             Accumulated_depth += soilPhysical.Thickness[layer];",
                    "          }",
                    "          Top_Refull = Top_LL + (Top_DUL - Top_LL) * Refull_Frac;",
                    "       }",
                    "       ",
                    "      ",
                    "       //Determine daily requirement for irrigation",
                    "        [EventSubscribe(\"StartOfDay\")]",
                    "           private void OnStartOfDay(object sender, EventArgs e)",
                    "           { ",
                    "          //Can we irrigate?",
                    "          IrrigationIsAvailable = false; ",
                    "          if (Irrigation_Yes_No == \"yes\")",
                    "             IrrigationIsAvailable = true; ",
                    "    ",
                    "          //Are we Allowed to Irrigate?",
                    "          TodayYear = Clock.Today.Year;",
                    "          StartString = Season_Start + \"-\" + TodayYear.ToString();",
                    "          EndString = Season_End + \"-\" + TodayYear.ToString();",
                    "          StartDate = DateTime.Parse(StartString);",
                    "          EndDate = DateTime.Parse(EndString);",
                    "          TodayMonth = Clock.Today.Month;",
                    "          TodayDay = Clock.Today.Day;",
                    "          StartDay = StartDate.Day;",
                    "          StartMonth = StartDate.Month;",
                    "          EndDay = EndDate.Day;",
                    "          EndMonth = EndDate.Month;",
                    "          ",
                    "          SeasonIsOpen = false;",
                    "          //if we are in the spring and after the start date then yes",
                    "          if((Clock.Today.Month > 6) && (Clock.Today >= StartDate))",
                    "          SeasonIsOpen = true;",
                    "          //if we are in the autumn and before the end date then yes",
                    "          if((Clock.Today.Month <= 6) && (Clock.Today <= EndDate))",
                    "          SeasonIsOpen = true;",
                    "          ",
                    "          //Is there a crop in the ground that needs irrigation?",
                    "          CropIsActive = false;",
                    "          if ((phenology.Stage >= 3.0) && (phenology.Stage < 6.0))",
                    "                CropIsActive = true;",
                    "          ",
                    "          //Is the irrigator available?",
                    "          IrrigatorIsAvailable = false;",
                    "          Days_since_irrigation += 1;",
                    "          if (Days_since_irrigation >= Return_days)",
                    "             IrrigatorIsAvailable = true;",
                    "          ",
                    "          //Is the soil dry enough to require irrigation?",
                    "          SoilIsDry = false;",
                    "          double CurrentRootDepth = 0;",
                    "          double RootDepth = root.Depth;",
                    "          CurrentRootDepth = Math.Max(RootDepth, CurrentRootDepth);",
                    "          ",
                    "          double RelativeRootDepth = Math.Min(1.0, CurrentRootDepth / Top_Depth);",
                    "          Top_Trigger = Math.Min(Top_Refull, Top_DUL - (Top_DUL - Top_LL) * RelativeRootDepth * (1-Trigger_Frac)); ",
                    "          ",
                    "          Accumulated_depth = 0;",
                    "          Top_SW = 0;",
                    "          for (int layer = 0; Accumulated_depth < Top_Depth; layer++)",
                    "          {",
                    "             Top_SW += waterBalance.SWmm[layer];",
                    "             Accumulated_depth += soilPhysical.Thickness[layer];",
                    "          }",
                    "          if (Top_SW <= Top_Trigger)",
                    "             SoilIsDry = true;",
                    "                ",
                    "          //Lets bloody well irrigate then!!!!",
                    "          if((IrrigationIsAvailable) && (SeasonIsOpen) && (CropIsActive) && (IrrigatorIsAvailable) && (SoilIsDry)) //The conditions are rife for irrigation",
                    "          {",
                    "             Amount_to_apply = Math.Min(Top_Refull - Top_SW, Maximum_Irrigation_Amount);",
                    "             Amount_to_apply = Math.Min(Amount_to_apply, Season_Allocation - Season_Application); ",
                    "             Amount_to_apply = Math.Max(Amount_to_apply, 0.0);",
                    "             Irrigation.Apply(Amount_to_apply);",
                    "             Days_since_irrigation = 0;",
                    "             Season_Application += Amount_to_apply;",
                    "             summary.WriteMessage(this, \"Automatic Irrigation\", MessageType.Diagnostic);",
                    "            ",
                    "          }",
                    "       }",
                    "    }",
                    "}",
                    "             ",
                    "             "
                  ],
                  "Parameters": [
                    {
                      "Key": "Irrigation_Yes_No",
                      "Value": "yes"
                    },
                    {
                      "Key": "Season_Start",
                      "Value": "1-Oct"
                    },
                    {
                      "Key": "Season_End",
                      "Value": "30-Apr"
                    },
                    {
                      "Key": "Season_Allocation",
                      "Value": "1000"
                    },
                    {
                      "Key": "Refull_Frac",
                      "Value": "0.9"
                    },
                    {
                      "Key": "Trigger_Frac",
                      "Value": "0.7"
                    },
                    {
                      "Key": "Return_days",
                      "Value": "3"
                    },
                    {
                      "Key": "Maximum_Irrigation_Amount",
                      "Value": "40"
                    },
                    {
                      "Key": "Top_Depth",
                      "Value": "600"
                    }
                  ],
                  "Name": "AutomaticIrrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Models.Soils;",
                    "using System;",
                    "using Models.Core;",
                    "using Models.PMF;",
                    "using APSIM.Shared.Utilities;",
                    "namespace Models",
                    "{",
                    "    [Serializable]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] Clock Clock;",
                    "        [Link] Fertiliser Fertiliser;",
                    "        ",
                    "        [Separator(\"A component to apply fertiliser on one or more dates on every year of the simulation\")]",
                    "",
                    "        [Description(\"Type of fertiliser to apply? \")] ",
                    "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                    "",
                    "        [Description(\"Enter the fertilisation dates as dd-mmm with comma separation (any year information entered will be ignored): \")] ",
                    "        public string[] FertiliserDates { get; set; } ",
                    "",
                    "        [Description(\"Amount of fertiliser to be applied (kg /ha)\")] ",
                    "        public double Amount { get; set; }",
                    "",
                    "        [Description(\"Is the above amount to be applied each time? (yes/ticked)? Or is it the total annual amount across all dates (no/unticked)\")] ",
                    "        public bool AmountType { get; set; }",
                    "        ",
                    "        [EventSubscribe(\"DoManagement\")]",
                    "        private void OnDoManagement(object sender, EventArgs e)",
                    "        {",
                    "            foreach (string ddMMM in FertiliserDates)",
                    "            {",
                    "                if (DateUtilities.DatesEqual(ddMMM, Clock.Today))",
                    "                {",
                    "                    if (AmountType)",
                    "                        Fertiliser.Apply(amount: Amount, type: FertiliserType);",
                    "                    else",
                    "                        Fertiliser.Apply(amount: Amount / FertiliserDates.Length, type: FertiliserType);",
                    "                }",
                    "            }",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "FertiliserType",
                      "Value": "NO3N"
                    },
                    {
                      "Key": "FertiliserDates",
                      "Value": "1-Aug, 15-Aug, 1-Sep, 15-Sep, 1-Nov, 15-Nov, 1-dec, 15-dec, 1-Jan, 15-Jan, 1-Feb, 15-Feb, 1-Mar, 15-Mar"
                    },
                    {
                      "Key": "Amount",
                      "Value": "0"
                    },
                    {
                      "Key": "AmountType",
                      "Value": "False"
                    }
                  ],
                  "Name": "ApplyFertOnDates",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.PMF.SimplePlantModels.SprumPastureInstance, Models",
                  "EstablishDate": null,
                  "AgeAtSimulationStart": 1.0,
                  "YearsToMaxDimension": 1.0,
                  "RUE": 1.0,
                  "Presidue": 0.15,
                  "RsenRate": 0.01,
                  "Proot": 0.2,
                  "PSBaseT": 5.0,
                  "PSLOptT": 20.0,
                  "PSUOptT": 25.0,
                  "PSMaxT": 35.0,
                  "GRINZ": false,
                  "MaxRD": 600.0,
                  "MaxHeight": 300.0,
                  "MaxPrunedHeight": 100.0,
                  "MaxCover": 0.95,
                  "MinCover": 0.5,
                  "ExtinctCoeff": 0.5,
                  "RegrowthDuration": 300.0,
                  "FullCanopyDuration": 0.0,
                  "BaseT": 5.0,
                  "OptT": 25.0,
                  "MaxT": 35.0,
                  "RootNConc": 0.01,
                  "LeafNConc": 0.05,
                  "ResidueNConc": 0.01,
                  "LegumePropn": 0.0,
                  "GSMax": 0.006,
                  "R50": 120.0,
                  "SurfaceKL": 0.1,
                  "WaterStress": false,
                  "Name": "BasePasture",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Management.BiomassRemovalEvents, Models",
                  "NameOfPlantToRemoveFrom": "SPRUM",
                  "RemovalType": 0,
                  "StageToSet": null,
                  "RemovalDates": null,
                  "BiomassRemovalFractions": [
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Residue",
                      "TypeString": "Cutting",
                      "LiveToRemove": 0.0,
                      "DeadToRemove": 0.0,
                      "LiveToResidue": 0.5,
                      "DeadToResidue": 0.5
                    },
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Leaf",
                      "TypeString": "Cutting",
                      "LiveToRemove": 1.0,
                      "DeadToRemove": 1.0,
                      "LiveToResidue": 0.0,
                      "DeadToResidue": 0.0
                    },
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Nodule",
                      "TypeString": "Cutting",
                      "LiveToRemove": 0.0,
                      "DeadToRemove": 0.0,
                      "LiveToResidue": 0.0,
                      "DeadToResidue": 0.0
                    },
                    {
                      "$type": "Models.Management.BiomassRemovalOfPlantOrganType, Models",
                      "PlantName": "SPRUM",
                      "OrganName": "Root",
                      "TypeString": "Cutting",
                      "LiveToRemove": 0.0,
                      "DeadToRemove": 0.0,
                      "LiveToResidue": 0.25,
                      "DeadToResidue": 0.25
                    }
                  ],
                  "Name": "OnCut",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": null,
              "Maximum": null,
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": 0.0,
              "Maximum": 1.0,
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "Cover",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": 0,
              "FactorToVaryColours": "Legume",
              "FactorToVaryMarkers": "PotentialYield",
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "SPRUM.DaysAfterSowing",
              "YFieldName": "SPRUM.Leaf.Canopy.CoverGreen",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": false,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Series",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "Name": "Biomass",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Photosynthesis Accum",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -16736653,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "Legume",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Leaf.Photosynthesis",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": true,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Photosynthesis",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Residue",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -3376729,
                  "FactorToVaryColours": "Legume",
                  "FactorToVaryMarkers": "PotentialYield",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Clock.Today",
                  "YFieldName": "SPRUM.Residue.Wt",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Product",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Leaf",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -1663232,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "Legume",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Leaf.Wt",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Leaf",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Root",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -11094807,
                  "FactorToVaryColours": "PotentialYield",
                  "FactorToVaryMarkers": "Legume",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Root.Wt",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Root",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "Name": "Nitrogen",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.DaysAfterSowing",
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.Root.NUptake",
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Uptake",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -3376729,
                  "FactorToVaryColours": "Legume",
                  "FactorToVaryMarkers": "PotentialYield",
                  "FactorToVaryLines": "Legume",
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.RootUptakesArbitrator.NitrogenUptake.Gpm2",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Uptake",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.DaysAfterSowing",
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "SPRUM.Total.N",
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Total N",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -16736653,
                  "FactorToVaryColours": "Legume",
                  "FactorToVaryMarkers": "PotentialYield",
                  "FactorToVaryLines": null,
                  "Marker": 0,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "SPRUM.DaysAfterSowing",
                  "YFieldName": "SPRUM.Total.N",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "TotalN",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": "NaN",
              "Maximum": "NaN",
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": "NaN",
              "Maximum": "NaN",
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "Height",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": 0,
              "FactorToVaryColours": "Legume",
              "FactorToVaryMarkers": "PotentialYield",
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "SPRUM.DaysAfterSowing",
              "YFieldName": "SPRUM.Height",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": false,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Series",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Graph, Models",
          "Caption": null,
          "Axis": [
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 3,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": "NaN",
              "Maximum": "NaN",
              "Interval": null
            },
            {
              "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
              "Title": null,
              "Position": 0,
              "Inverted": false,
              "CrossesAtZero": false,
              "LabelOnOneLine": false,
              "Minimum": "NaN",
              "Maximum": "NaN",
              "Interval": null
            }
          ],
          "LegendPosition": 0,
          "LegendOrientation": 0,
          "AnnotationLocation": 0,
          "DisabledSeries": [],
          "LegendOutsideGraph": false,
          "Name": "Age",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Series, Models",
              "Type": 1,
              "XAxis": 3,
              "YAxis": 0,
              "ColourArgb": 0,
              "FactorToVaryColours": "PotentialYield",
              "FactorToVaryMarkers": "Legume",
              "FactorToVaryLines": null,
              "Marker": 0,
              "MarkerSize": 0,
              "Line": 0,
              "LineThickness": 0,
              "TableName": "Report",
              "XFieldName": "SPRUM.DaysAfterSowing",
              "YFieldName": "SPRUM.Phenology.Age.YearDecimal",
              "X2FieldName": null,
              "Y2FieldName": null,
              "ShowInLegend": false,
              "IncludeSeriesNameInLegend": false,
              "Cumulative": false,
              "CumulativeX": false,
              "Filter": null,
              "Name": "Series",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Memo, Models",
      "Text": "Below we have provided a couple of SprumPastureInstances as a start point for users.  These are not to be considered as validated models and the user must review and adjust parameter settings based on their own knowledge of the pastures being simulated and on careful review of the behaviour of simulations using SPRUM",
      "Name": "Example SprumPastureInstances",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.PMF.SimplePlantModels.SprumPastureInstance, Models",
      "EstablishDate": "10-Mar",
      "AgeAtSimulationStart": 0.0,
      "YearsToMaxDimension": 2.0,
      "RUE": 1.6,
      "Presidue": 0.15,
      "RsenRate": 0.01,
      "Proot": 0.1,
      "PSBaseT": 5.0,
      "PSLOptT": 25.0,
      "PSUOptT": 25.0,
      "PSMaxT": 40.0,
      "GRINZ": false,
      "MaxRD": 2500.0,
      "MaxHeight": 500.0,
      "MaxPrunedHeight": 50.0,
      "MaxCover": 0.97,
      "MinCover": 0.05,
      "ExtinctCoeff": 0.85,
      "RegrowthDuration": 300.0,
      "FullCanopyDuration": 10000.0,
      "BaseT": 8.0,
      "OptT": 25.0,
      "MaxT": 35.0,
      "RootNConc": 0.01,
      "LeafNConc": 0.05,
      "ResidueNConc": 0.01,
      "LegumePropn": 1.0,
      "GSMax": 0.008,
      "R50": 175.0,
      "SurfaceKL": 0.1,
      "WaterStress": true,
      "Name": "Lucerne",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.PMF.SimplePlantModels.SprumPastureInstance, Models",
      "EstablishDate": "24-Mar",
      "AgeAtSimulationStart": 0.0,
      "YearsToMaxDimension": 1.0,
      "RUE": 1.0,
      "Presidue": 0.15,
      "RsenRate": 0.01,
      "Proot": 0.1,
      "PSBaseT": 0.0,
      "PSLOptT": 16.0,
      "PSUOptT": 16.0,
      "PSMaxT": 25.0,
      "GRINZ": false,
      "MaxRD": 800.0,
      "MaxHeight": 300.0,
      "MaxPrunedHeight": 100.0,
      "MaxCover": 0.97,
      "MinCover": 0.1,
      "ExtinctCoeff": 0.6,
      "RegrowthDuration": 500.0,
      "FullCanopyDuration": 10000.0,
      "BaseT": 0.0,
      "OptT": 20.0,
      "MaxT": 30.0,
      "RootNConc": 0.01,
      "LeafNConc": 0.025,
      "ResidueNConc": 0.01,
      "LegumePropn": 0.0,
      "GSMax": 0.004,
      "R50": 150.0,
      "SurfaceKL": 0.1,
      "WaterStress": true,
      "Name": "Ryegrass",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    }
  ],
  "Enabled": true,
  "ReadOnly": false
}