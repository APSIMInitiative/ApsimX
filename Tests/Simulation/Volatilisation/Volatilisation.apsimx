{
  "$type": "Models.Core.Simulations, Models",
  "Version": 190,
  "Name": "Simulations",
  "ResourceName": null,
  "Children": [
    {
      "$type": "Models.Storage.DataStore, Models",
      "useFirebird": false,
      "CustomFileName": null,
      "Name": "DataStore",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Memo, Models",
      "Text": "# This is work in progress - please do not use for any project delivery work at this stage\n\n\n- send warning if model is SoilWater or top soil layer is > 10 mm\n- send comments to Summary if any of the above\n- test that no volatilisation if SoilWater\n\n- why is there colatilisaiton when Exco is 1?\n\n- get some of those parameters off the UI\n- what is going on with the two depth parameters and are both actually needed\n- can the second depth parameter be converted to something that is not layerign dependent?\n\n- sensitivity to layering\n- pH should rise in only a few days, drop below and then rise\n\n\n### test the code \n- rain/irrigation sensitivity - 3-10 mm range - works as intended\n\n\n### Depth_for_NH3 and f_NV[z]\n- Depth_for_NH3  is barely used, really only for the maximum layer for the loop on gas exxchange\n- f_NV[z] is needed (but perhaps not in this format) as the fractional exchange\n- it should not be by layer though - change to somethign basaed on depth",
      "Name": "ToDo",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Factorial.Experiment, Models",
      "DisabledSimNames": null,
      "Name": "RainFactorWorksAsIntended",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Memo, Models",
          "Text": "it takes 6 days of rain to completely suppress volatilisaiton (when exco = 1) \n\n\nthe patter with amoutn is as expected/intended\n",
          "Name": "RainFactor",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Factorial.Factors, Models",
          "Name": "Factors",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Factorial.Factor, Models",
              "Specification": "[ModifyRain].Script.AssertedRainfallAmount = 0 to 5 step 1",
              "Name": "Factor",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Simulation, Models",
          "Descriptors": null,
          "Name": "Sim4",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Clock, Models",
              "Start": "1980-01-03T00:00:00",
              "End": "1980-01-31T00:00:00",
              "Name": "Clock",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Climate.Weather, Models",
              "ConstantsFile": null,
              "FileName": "%root%/Examples/WeatherFiles/NZ_Lincoln.met",
              "ExcelWorkSheetName": null,
              "Latitude": -43.624,
              "Tav": 11.4,
              "Amp": 11.5,
              "Name": "Weather",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Interfaces;",
                "using System.Linq;",
                "using APSIM.Shared.Utilities;",
                "using Models.PMF;",
                "using Models.Soils;",
                "using Models.Soils.Nutrients;",
                "using Models.Core;",
                "using System;",
                "using Models.Soils.Nutrients;",
                "",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] private Clock clock;",
                "        [Link] private IWeather weather;",
                "",
                "        [Separator(\"???\")]",
                "        [Description(\"Amount of rainfall\")]",
                "        public double AssertedRainfallAmount { get; set; }",
                "",
                "        [Description(\"Date of first rain day\")]",
                "        public DateTime AssertedRainfallDate { get; set; }",
                "",
                "        [Description(\"Duration of the rainfall event (days)\")]",
                "        public double AssertedRainfallDuration { get; set; }",
                "",
                "        [EventSubscribe(\"StartOfSimulation\")]",
                "        private void FindSoilNOrNutrient(object sender, EventArgs e)",
                "        {",
                "        }",
                "",
                "        [EventSubscribe(\"DoManagement\")]",
                "        private void OnDoManagement(object sender, EventArgs e)",
                "        {",
                "            if ((clock.Today >= AssertedRainfallDate) && (clock.Today <= AssertedRainfallDate.AddDays(AssertedRainfallDuration))) ",
                "                weather.Rain = AssertedRainfallAmount;           ",
                "            else ",
                "                weather.Rain = 0.0;",
                "        }",
                "",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "AssertedRainfallAmount",
                  "Value": "6"
                },
                {
                  "Key": "AssertedRainfallDate",
                  "Value": "01/15/1980 00:00:00"
                },
                {
                  "Key": "AssertedRainfallDuration",
                  "Value": "6"
                }
              ],
              "Name": "ModifyRain",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": "MicroClimate",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.ForageDigestibility.Forages, Models",
              "Parameters": [
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "SurfaceOrganicMatter.Residue",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Leaf",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stem",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stolon",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Leaf",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stem",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stolon",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                }
              ],
              "Name": "Forages",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
              "Name": "SoilArbitrator",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Summary, Models",
              "Verbosity": 100,
              "Name": "Summary",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Core.Zone, Models",
              "Area": 1.0,
              "Slope": 0.0,
              "AspectAngle": 0.0,
              "Altitude": 50.0,
              "Name": "Field",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.AgPasture.SimpleGrazing, Models",
                  "GrazingRotationType": 0,
                  "SimpleGrazingFrequencyString": "end of month",
                  "SimpleMinGrazable": 0.0,
                  "SimpleGrazingResidual": 1500.0,
                  "PreGrazeDMArray": null,
                  "PostGrazeDMArray": null,
                  "FlexibleExpressionForTimingOfGrazing": null,
                  "FlexibleGrazePostDM": 0.0,
                  "MaximumRotationLengthArray": null,
                  "MinimumRotationLengthArray": null,
                  "NoGrazingStartString": null,
                  "NoGrazingEndString": null,
                  "FractionDefoliatedBiomassToSoil": [
                    0.0
                  ],
                  "FractionDefoliatedNToSoil": [
                    0.0
                  ],
                  "FractionExcretedNToDung": [
                    0.0
                  ],
                  "CNRatioDung": 0.0,
                  "DepthUrineIsAdded": 0.0,
                  "SendDungElsewhere": 0.0,
                  "SendUrineElsewhere": 0.0,
                  "FractionPopulationDecline": 0.0,
                  "TramplingOn": false,
                  "MaximumPropLitterMovedToSoil": 0.1,
                  "PastureConsumedAtMaximumRateOfLitterRemoval": 1200.0,
                  "SpeciesCutProportions": null,
                  "Name": "SimpleGrazing",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Models.Interfaces;",
                    "using System.Linq;",
                    "using APSIM.Shared.Utilities;",
                    "using Models.PMF;",
                    "using Models.Soils;",
                    "using Models.Soils.Nutrients;",
                    "using Models.Core;",
                    "using System;",
                    "using Models.Soils.Nutrients;",
                    "",
                    "namespace Models",
                    "{",
                    "    [Serializable]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private Clock clock;",
                    "        [Link] private Fertiliser fertiliser;",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Soil soil;",
                    "        private Nutrient nutrient;",
                    "        private Nutrient soilN;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private Nutrient Nutrient;",
                    "        [Link(Path=\"[SurfaceOrganicMatter].SurfaceResidue.Decomposition\")]",
                    "        private OrganicFlow ResidueDecomposition;",
                    "",
                    "",
                    "        [Separator(\"Fertiliser will be applied on the date(s) below\")]",
                    "        [Description(\"Apply fertiliser on the same day(s) each year? If no, then must include the year of appliaction below\")]",
                    "        public bool EachYear { get; set; }",
                    "",
                    "        [Description(\"Dates for one or more fertiliser applications (dd-mmm or dd-mmm-yyyy) as a list with a comma between dates\")]",
                    "        public string[] Dates { get; set; }",
                    "",
                    "        [Separator(\"Test for the mineral N in the soil and don't apply the fertiliser if greater than X kgN/ha is stored in the soil above a depth of Y mm\")]",
                    "        [Description(\"Use a critical soil mineral N to prevent application above a threshold?\")]",
                    "        public bool UseCritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Don't add fertiliser if N in the soil to the depth below exceeds (kg/ha)\")]",
                    "        public double CritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Depth to which the amount of N in the soil should be calculated (mm)\")]",
                    "        public double CritNDepth { get; set; }",
                    "",
                    "        [Separator(\"Fertiliser application details\")]",
                    "        [Description(\"Depth at which to apply the fertiliser (mm)\")]",
                    "        public double Depth { get; set; }",
                    "",
                    "        [Description(\"Amount of fertiliser to apply (kg N /ha) per application\")]",
                    "        public double Amount { get; set; }",
                    "",
                    "        [Description(\"Fertiliser type - select from the list\")]",
                    "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                    "",
                    "",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void FindSoilNOrNutrient(object sender, EventArgs e)",
                    "        {",
                    "            nutrient = this.FindInScope<Nutrient>() as Nutrient;",
                    "            soilN = this.FindInScope<Nutrient>() as Nutrient;",
                    "",
                    "            if (nutrient == null && soilN == null)",
                    "                throw new Exception(string.Format(\"Error in script {0}: Unable to find nutrient or soilN.\", Name));",
                    "        }",
                    "",
                    "        [EventSubscribe(\"DoManagement\")]",
                    "        private void OnDoManagement(object sender, EventArgs e)",
                    "        {",
                    "            if (OnApplicationDate())",
                    "            {",
                    "                if (NContentBelowThreshold())",
                    "                    fertiliser.Apply(Amount, FertiliserType, Depth);",
                    "                else",
                    "                    summary.WriteMessage(this, \"Skipping fertiliser application due to soil mineral N content being above critical threshold.\", MessageType.Diagnostic);",
                    "            }",
                    "        }",
                    "",
                    "        /// <summary>Checks if today's date is one of the specified fertiliser application dates.</summary>",
                    "        private bool OnApplicationDate()",
                    "        {",
                    "            if (EachYear)",
                    "                return Dates.Any(d => DateUtilities.DatesEqual(d, clock.Today));",
                    "            ",
                    "            DateTime[] dates = Dates.Select(d => DateTime.ParseExact(d, \"d-MMM-yyyy\", null)).ToArray();",
                    "            return dates.Any(d => SameDate(d, clock.Today));",
                    "        }",
                    "",
                    "        /// <summary>Checks if N content in soil is below critical threshold.</summary>",
                    "        private bool NContentBelowThreshold()",
                    "        {",
                    "            if (!UseCritNThreshold)",
                    "                return true;",
                    "            ",
                    "            double[] weights = GetLayerWeights();",
                    "            double cumSoilN = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                if (nutrient != null)",
                    "                    cumSoilN += weights[i] * nutrient.MineralN[i];",
                    "                else if (soilN != null)",
                    "                    cumSoilN += weights[i] * soilN.MineralN[i];",
                    "            }",
                    "",
                    "            return cumSoilN <= CritNThreshold;",
                    "        }",
                    "",
                    "        private double[] GetLayerWeights()",
                    "        {",
                    "            double[] weights = new double[soilPhysical.Thickness.Length];",
                    "            double cumDepth = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                cumDepth += soilPhysical.Thickness[i];",
                    "                if (cumDepth < CritNDepth)",
                    "                    weights[i] = 1;",
                    "                else if (cumDepth - soilPhysical.Thickness[i] <= CritNDepth)",
                    "                    weights[i] = (CritNDepth - (cumDepth - soilPhysical.Thickness[i])) / soilPhysical.Thickness[i];",
                    "                else",
                    "                    weights[i] = 0;",
                    "            }",
                    "",
                    "            return weights;",
                    "        }",
                    "",
                    "        private bool SameDate(DateTime d1, DateTime d2)",
                    "        {",
                    "            return d1.Year == d2.Year && d1.DayOfYear == d2.DayOfYear;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "EachYear",
                      "Value": "True"
                    },
                    {
                      "Key": "Dates",
                      "Value": "15-jan"
                    },
                    {
                      "Key": "UseCritNThreshold",
                      "Value": "False"
                    },
                    {
                      "Key": "CritNThreshold",
                      "Value": "50"
                    },
                    {
                      "Key": "CritNDepth",
                      "Value": "75"
                    },
                    {
                      "Key": "Depth",
                      "Value": "0"
                    },
                    {
                      "Key": "Amount",
                      "Value": "50"
                    },
                    {
                      "Key": "FertiliserType",
                      "Value": "UreaN"
                    }
                  ],
                  "Name": "Fertilise",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Newtonsoft.Json;",
                    "using APSIM.Shared.Utilities;",
                    "using System.Xml.Serialization;",
                    "using Models.Soils;",
                    "using Models.PMF;",
                    "using Models.Core;",
                    "using System;",
                    "using System.Linq;",
                    "using Models.Interfaces;",
                    "",
                    "",
                    "        ",
                    "namespace Models",
                    "{",
                    "    [Serializable] ",
                    "    [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Irrigation Irrigation;",
                    "        [Link] private Clock Clock;",
                    "        [Link] private Soil Soil;",
                    "        [Link(IsOptional = true)] private IPlant existingCrop;",
                    "        private DateTime StartDate;",
                    "        private DateTime EndDate;",
                    "        private double TopDUL;",
                    "        private double TopLL;",
                    "        private int nLayers;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private ISoilWater waterBalance;",
                    "        //Communication to other modules",
                    "       ",
                    "        //User inputs from properties tab",
                    "        [Description(\"Turn irrigation on?\")]",
                    "        public bool allowIrrigation { get; set; }",
                    "        [Description(\"Start of irrigation season (dd-MMM)\")]",
                    "        public string seasonStart { get; set; }",
                    "        [Description(\"End of irrigation season (dd-MMM)\")]",
                    "        public string seasonEnd { get; set; }",
                    "        [Description(\"Season allocation (mm)\")]",
                    "        public double seasonsAllocation { get; set; }",
                    "        [Description(\"Deficit to trigger irrigation (% PAWC)\")]",
                    "        public double triggerDeficit { get; set; }",
                    "        [Description(\"Deficit to stop irrigaton (% PAWC)\")]",
                    "        public double targetDeficit { get; set; }",
                    "        [Description(\"Minimum days for irrigation to return\")]",
                    "        public double returndays { get; set; }",
                    "        [Description(\"Maximum irrigation application (mm/day)\")]",
                    "        public double maximumAmount { get; set; }",
                    "        [Description(\"Depth to calculate PAWC (mm)\")]",
                    "        public double depthPAWC { get; set; }",
                    "",
                    "        //Class members",
                    "        [JsonIgnore] public double TopSWdeficit { get; set; }",
                    "        [JsonIgnore] public double TopSWC { get; set; }",
                    "        [JsonIgnore] public double DaysSinceIrrigation { get; set; }",
                    "        [JsonIgnore] public double AmountToApply { get; set; }",
                    "        [JsonIgnore] public double SeasonAppliedAmount { get; set; }",
                    "        ",
                    "        private bool IrrigationIsAllowed { get; set; }",
                    "        private bool SeasonIsOpen { get; set; }",
                    "        private bool CropIsActive { get; set; }",
                    "        private bool IrrigatorIsAvailable { get; set; }",
                    "        private bool SoilIsDry { get; set; }",
                    "",
                    "    ",
                    "        //Calculate static soil variables",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void OnStartOfSimulation(object sender, EventArgs e)",
                    "        {   ",
                    "            //Set the season dates",
                    "            StartDate = DateTime.Parse(seasonStart + \"-\" + Clock.Today.Year.ToString());",
                    "            EndDate = DateTime.Parse(seasonEnd + \"-\" + Clock.Today.Year.ToString());",
                    "            ",
                    "            //Can we irrigate at all?",
                    "            IrrigationIsAllowed = false; ",
                    "            if (allowIrrigation)",
                    "                IrrigationIsAllowed = true; ",
                    "",
                    "            //Calculate soil water variables",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            nLayers = soilPhysical.Thickness.Length;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopLL += soilPhysical.LL15mm[layer] * fracLayer;",
                    "                TopDUL += soilPhysical.DULmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "        }",
                    "             ",
                    "        //Determine daily requirement for irrigation",
                    "        [EventSubscribe(\"StartOfDay\")]",
                    "        private void OnStartOfDay(object sender, EventArgs e)",
                    "        {",
                    "            //Can we irrigate today?          ",
                    "            SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);",
                    "            if (!SeasonIsOpen)",
                    "                SeasonAppliedAmount = 0;",
                    "",
                    "            //Is there a crop in the ground that needs irrigation?",
                    "            CropIsActive = false;",
                    "            if ((existingCrop != null) && (existingCrop.IsAlive))",
                    "                CropIsActive = true;",
                    "            //if ((existingCrop.Phenology.Stage >= 3.0) && (existingCrop.Phenology.Stage < 6.0))",
                    "          ",
                    "            //Is the irrigator available?",
                    "            IrrigatorIsAvailable = false;",
                    "            DaysSinceIrrigation += 1;",
                    "            if (DaysSinceIrrigation >= returndays)",
                    "                IrrigatorIsAvailable = true;",
                    "          ",
                    "            //Is the soil dry enough to require irrigation?",
                    "            SoilIsDry = false;",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            TopSWC = 0.0;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            //for (int layer = 0; depthFromSurface < depthPAWC + soilPhysical.Thickness[layer]; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopSWC += waterBalance.SWmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "            ",
                    "            TopSWdeficit = TopSWC - TopDUL;",
                    "            if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)",
                    "                SoilIsDry = true;",
                    "                ",
                    "            //Are all the conditions ratifying irrigation",
                    "            if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)",
                    "            {",
                    "                //Lets bloody well irrigate then!!!!",
                    "                AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;",
                    "                AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));",
                    "                Irrigation.Apply(AmountToApply);",
                    "                DaysSinceIrrigation = 0;",
                    "                SeasonAppliedAmount += AmountToApply;",
                    "            }",
                    "        }",
                    "        ",
                    "        ///Checks whether theDate is between iniDate and endDate (non-year specific)",
                    "        private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)",
                    "        {",
                    "            bool result = false;",
                    "            if (iniDate.DayOfYear < endDate.DayOfYear)",
                    "            {",
                    "                // period is within one year, ex: summer in the northern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            else",
                    "            {",
                    "                // period goes over the end of the year, ex: summer in the southern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            ",
                    "            return result;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "allowIrrigation",
                      "Value": "False"
                    },
                    {
                      "Key": "seasonStart",
                      "Value": "1-sep"
                    },
                    {
                      "Key": "seasonEnd",
                      "Value": "30-apr"
                    },
                    {
                      "Key": "seasonsAllocation",
                      "Value": "10000"
                    },
                    {
                      "Key": "triggerDeficit",
                      "Value": "50"
                    },
                    {
                      "Key": "targetDeficit",
                      "Value": "100"
                    },
                    {
                      "Key": "returndays",
                      "Value": "21"
                    },
                    {
                      "Key": "maximumAmount",
                      "Value": "100"
                    },
                    {
                      "Key": "depthPAWC",
                      "Value": "300"
                    }
                  ],
                  "Name": "AutomaticIrrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Irrigation, Models",
                  "Name": "Irrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Fertiliser, Models",
                  "Name": "Fertiliser",
                  "ResourceName": "Fertiliser",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Surface.SurfaceOrganicMatter, Models",
                  "SurfOM": [],
                  "Canopies": [],
                  "InitialResidueName": "Sward",
                  "InitialResidueType": "grass",
                  "InitialResidueMass": 1000.0,
                  "InitialStandingFraction": 0.0,
                  "InitialCPR": 0.0,
                  "InitialCNR": 15.0,
                  "Name": "SurfaceOrganicMatter",
                  "ResourceName": "SurfaceOrganicMatter",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 1500.0,
                  "InitialRootDM": 450.0,
                  "InitialRootDepth": 750.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPRyegrass",
                  "ResourceName": "AGPRyegrass",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 500.0,
                  "InitialRootDM": 150.0,
                  "InitialRootDepth": 350.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPWhiteClover",
                  "ResourceName": "AGPWhiteClover",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Soil, Models",
                  "RecordNumber": 1241,
                  "ASCOrder": "Pumice",
                  "ASCSubOrder": null,
                  "SoilType": "Sandy loam",
                  "LocalName": "Oropi (Sandy loam (Te Puke No1329))",
                  "Site": "No.2 Rd",
                  "NearestTown": "Te Puke",
                  "Region": "BayOfPlenty",
                  "State": null,
                  "Country": "New Zealand",
                  "NaturalVegetation": "long term grass",
                  "ApsoilNumber": "1329",
                  "Latitude": -37.863,
                  "Longitude": 176.291,
                  "LocationAccuracy": "+/-50 m",
                  "YearOfSampling": "1982",
                  "DataSource": "The database of New Zealand soils was compiled by AgResearch (www.agresearch.co.nz) and based on soil properties gathered, mainly from publications, in the course of conducting several simulation-based research projects but particularly from the Pastoral 21 Environment program which was funded by the New Zealand Ministry for Business, Innovation and Employment,  Dairy NZ, Fonterra and Meat & Wool NZ.",
                  "Comments": "The data is a combination of published or supplied measurements, pedotransfer functions, and expert opinion. See Cichota et al. (2013; Soil Research 51: 92-111, http://dx.doi.org/10.1071/SR12338) for a description of the pedotransfer functions. The soil carbon and fresh organic matter settings have been set as those broadly appropriate for permanent productive pastoral systems, see Cichota el al. (2012; Soil Research 50: 694-707, http://dx.doi.org/10.1071/SR12208). Users should take care to adapt these to local conditions before using the data in simulations. FOM values estimated to be 900 kg/ha of FOM in top 600mm of soil and another 100 kg/ha below.",
                  "Name": "Soil",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.Physical, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0
                      ],
                      "ParticleSizeSand": [
                        59.63,
                        63.7,
                        50.12,
                        61.19
                      ],
                      "ParticleSizeSilt": [
                        34.37,
                        31.68,
                        38.56,
                        25.3
                      ],
                      "ParticleSizeClay": [
                        6.0,
                        4.62,
                        11.32,
                        13.51
                      ],
                      "Rocks": [
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "Texture": null,
                      "BD": [
                        0.91,
                        0.93,
                        0.81,
                        0.82
                      ],
                      "AirDry": [
                        0.054,
                        0.043,
                        0.072,
                        0.073
                      ],
                      "LL15": [
                        0.165,
                        0.13,
                        0.219,
                        0.221
                      ],
                      "DUL": [
                        0.403,
                        0.321,
                        0.409,
                        0.388
                      ],
                      "SAT": [
                        0.56,
                        0.566,
                        0.606,
                        0.615
                      ],
                      "KS": [
                        20963.266,
                        16928.41,
                        10150.978,
                        9243.651
                      ],
                      "BDMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "AirDryMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "LL15Metadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "DULMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "SATMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "KSMetadata": null,
                      "RocksMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "TextureMetadata": null,
                      "ParticleSizeSandMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "ParticleSizeSiltMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "ParticleSizeClayMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "Name": "Physical",
                      "ResourceName": null,
                      "Children": [
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.165,
                            0.13,
                            0.219,
                            0.221
                          ],
                          "KL": [
                            0.06,
                            0.06,
                            0.057,
                            0.04
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPRyegrassSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        },
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.165,
                            0.13,
                            0.219,
                            0.221
                          ],
                          "KL": [
                            0.06,
                            0.06,
                            0.057,
                            0.04
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPWhiteCloverSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Organic, Models",
                      "FOMCNRatio": 40.0,
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "Carbon": [
                        5.4,
                        2.5,
                        2.6,
                        0.9,
                        0.8
                      ],
                      "CarbonUnits": 0,
                      "SoilCNRatio": [
                        12.273,
                        12.273,
                        12.273,
                        12.273,
                        12.273
                      ],
                      "FBiom": [
                        0.075,
                        0.017,
                        0.008,
                        0.008,
                        0.008
                      ],
                      "FInert": [
                        0.638,
                        0.801,
                        0.924,
                        0.97,
                        0.994
                      ],
                      "FOM": [
                        123.78494877889968,
                        91.70214550156204,
                        50.32720450604473,
                        24.991750138606616,
                        9.193951074886918
                      ],
                      "CarbonMetadata": null,
                      "FOMMetadata": null,
                      "Name": "Organic",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Chemical, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "PH": [
                        6.5,
                        6.5,
                        6.5,
                        6.5,
                        6.5
                      ],
                      "PHUnits": 0,
                      "EC": null,
                      "ESP": null,
                      "CEC": [
                        15.7,
                        9.4,
                        10.4,
                        8.1,
                        10.1
                      ],
                      "ECMetadata": null,
                      "CLMetadata": null,
                      "CECMetadata": null,
                      "ESPMetadata": null,
                      "PHMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "Name": "Chemical",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Nutrients.Nutrient, Models",
                      "Name": "Nutrient",
                      "ResourceName": "Nutrient",
                      "Children": [
                        {
                          "$type": "Models.Soils.Nutrients.NH3Volatilisation, Models",
                          "DepthEmissable1": 30.0,
                          "DepthEmissable2": 100.0,
                          "k_BC": 0.03,
                          "k_pH_hyd": 1.0,
                          "k_pH_nit": 1.0,
                          "k_pH_x": 0.2,
                          "k_AFPV": 300.0,
                          "f_AV": 0.5,
                          "CritRain1": 3.0,
                          "CritRain2": 10.0,
                          "pH": null,
                          "EmissabilityNH3": null,
                          "NH3ppm": null,
                          "NH3": null,
                          "NH3Gas": null,
                          "EmissionNH3": null,
                          "NH4Sol": null,
                          "PotGasExchangeNH": 0.0,
                          "GasExchangeNH": null,
                          "AirFilledPoreVolume": null,
                          "NH3toNHxRatio": null,
                          "NH3GtoNH3ARatio": null,
                          "pK_NHx": null,
                          "pG_NH3": null,
                          "RainFactor": 0.0,
                          "Name": "NH3Volatilisation",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Swim3, Models",
                      "Salb": 0.13,
                      "CN2Bare": 0.0,
                      "CNRed": 0.0,
                      "CNCov": 0.8,
                      "KDul": 1.0,
                      "PSIDul": -100.0,
                      "VC": true,
                      "DTMin": 0.0,
                      "DTMax": 1400.0,
                      "MaxWaterIncrement": 10.0,
                      "SpaceWeightingFactor": 0.0,
                      "SoluteSpaceWeightingFactor": 1.0,
                      "Dis": 0.0,
                      "Disp": 1.0,
                      "A": 2.0,
                      "DTHC": 0.1,
                      "DTHP": 2.0,
                      "vcon1": 7.28E-09,
                      "vcon2": 7.26E-07,
                      "eo_time": "06:00",
                      "eo_durn": 720.0,
                      "default_rain_time": "00:00",
                      "default_rain_duration": 720.0,
                      "Diagnostics": false,
                      "Name": "Swim3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Water, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.403,
                        0.321,
                        0.409,
                        0.388,
                        0.489
                      ],
                      "InitialPAWmm": 727.7,
                      "RelativeTo": "LL15",
                      "FilledFromTop": false,
                      "Name": "Water",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        6.0,
                        2.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NO3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NH4",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 1,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "Urea",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.LayerStructure, Models",
                      "Thickness": [
                        5.0,
                        5.0,
                        10.0,
                        10.0,
                        20.0,
                        50.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0
                      ],
                      "Name": "LayerStructure",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                      "Thickness": null,
                      "InitialValues": null,
                      "Name": "Temperature",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Report, Models",
                  "VariableNames": [
                    "[Clock].Today as Date",
                    "[Weather].Rain as Rain",
                    "[Irrigation].IrrigationApplied as Irrigation",
                    "",
                    "//[AGPRyegrass].HarvestedWt + [AGPWhiteClover].HarvestedWt as HarvestedWt   //the amount harvested (kg DM /ha)",
                    "//[AGPRyegrass].AboveGroundWt + [AGPWhiteClover].AboveGroundWt as AboveGroundWt   ",
                    "",
                    "sum([Nutrient].NH3Volatilisation.EmissionNH3) as Volat",
                    "sum([Nutrient].Urea.kgha[1:2]) as Urea30mm",
                    "sum([Nutrient].NH4.kgha[1:2]) as NH430mm",
                    "sum([Nutrient].NO3.kgha[1:2]) as NO330mm",
                    "mean([Nutrient].NH3Volatilisation.pH[1:2]) as pH",
                    "[Nutrient].NH3Volatilisation.RainFactor as RainFactor"
                  ],
                  "EventNames": [
                    "[Clock].EndOfDay"
                  ],
                  "GroupByVariableName": null,
                  "Name": "Report",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "GraphsPerPage": 6,
          "Name": "Folder",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Volatilisation",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "Volat",
                  "Position": 2,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "VolatilisationCum",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 2,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": true,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "RainFactor",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "RainFactor",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "RainFactor",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Rainfall",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -11094807,
                  "FactorToVaryColours": null,
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Rain",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Rain",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Factorial.Experiment, Models",
      "DisabledSimNames": null,
      "Name": "ExcoWasNotAsExpected",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Memo, Models",
          "Text": "it takes 6 days of rain to completely suppress volatilisaiton (when exco = 1) \n\n\nthe patter with amoutn is as expected/intended\n",
          "Name": "RainFactor",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Factorial.Factors, Models",
          "Name": "Factors",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Factorial.Factor, Models",
              "Specification": "[NH4].Exco[1] =  0, 0.5, 1, 2, 5, 10, 100, 1000",
              "Name": "Factor",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Simulation, Models",
          "Descriptors": null,
          "Name": "Sim1",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Clock, Models",
              "Start": "1980-01-01T00:00:00",
              "End": "1980-01-20T00:00:00",
              "Name": "Clock",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Climate.Weather, Models",
              "ConstantsFile": null,
              "FileName": "%root%/Examples/WeatherFiles/NZ_Lincoln.met",
              "ExcelWorkSheetName": null,
              "Latitude": -43.624,
              "Tav": 11.4,
              "Amp": 11.5,
              "Name": "Weather",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Interfaces;",
                "using System.Linq;",
                "using APSIM.Shared.Utilities;",
                "using Models.PMF;",
                "using Models.Soils;",
                "using Models.Soils.Nutrients;",
                "using Models.Core;",
                "using System;",
                "using Models.Soils.Nutrients;",
                "",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] private Clock clock;",
                "        [Link] private IWeather weather;",
                "",
                "        [Separator(\"???\")]",
                "        [Description(\"Amount of rainfall\")]",
                "        public double AssertedRainfallAmount { get; set; }",
                "",
                "        [Description(\"Date of first rain day\")]",
                "        public DateTime AssertedRainfallDate { get; set; }",
                "",
                "        [Description(\"Duration of the rainfall event (days)\")]",
                "        public double AssertedRainfallDuration { get; set; }",
                "",
                "        [EventSubscribe(\"StartOfSimulation\")]",
                "        private void FindSoilNOrNutrient(object sender, EventArgs e)",
                "        {",
                "        }",
                "",
                "        [EventSubscribe(\"DoManagement\")]",
                "        private void OnDoManagement(object sender, EventArgs e)",
                "        {",
                "            if ((clock.Today >= AssertedRainfallDate) && (clock.Today <= AssertedRainfallDate.AddDays(AssertedRainfallDuration))) ",
                "                weather.Rain = AssertedRainfallAmount;           ",
                "            else ",
                "                weather.Rain = 0.0;",
                "            //",
                "        }",
                "",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "AssertedRainfallAmount",
                  "Value": "0"
                },
                {
                  "Key": "AssertedRainfallDate",
                  "Value": "01/15/1980 00:00:00"
                },
                {
                  "Key": "AssertedRainfallDuration",
                  "Value": "6"
                }
              ],
              "Name": "ModifyRain",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": "MicroClimate",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.ForageDigestibility.Forages, Models",
              "Parameters": [
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "SurfaceOrganicMatter.Residue",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Leaf",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stem",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stolon",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Leaf",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stem",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stolon",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                }
              ],
              "Name": "Forages",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
              "Name": "SoilArbitrator",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Summary, Models",
              "Verbosity": 100,
              "Name": "Summary",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Core.Zone, Models",
              "Area": 1.0,
              "Slope": 0.0,
              "AspectAngle": 0.0,
              "Altitude": 50.0,
              "Name": "Field",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.AgPasture.SimpleGrazing, Models",
                  "GrazingRotationType": 0,
                  "SimpleGrazingFrequencyString": "end of month",
                  "SimpleMinGrazable": 0.0,
                  "SimpleGrazingResidual": 1500.0,
                  "PreGrazeDMArray": null,
                  "PostGrazeDMArray": null,
                  "FlexibleExpressionForTimingOfGrazing": null,
                  "FlexibleGrazePostDM": 0.0,
                  "MaximumRotationLengthArray": null,
                  "MinimumRotationLengthArray": null,
                  "NoGrazingStartString": null,
                  "NoGrazingEndString": null,
                  "FractionDefoliatedBiomassToSoil": [
                    0.0
                  ],
                  "FractionDefoliatedNToSoil": [
                    0.0
                  ],
                  "FractionExcretedNToDung": [
                    0.0
                  ],
                  "CNRatioDung": 0.0,
                  "DepthUrineIsAdded": 0.0,
                  "SendDungElsewhere": 0.0,
                  "SendUrineElsewhere": 0.0,
                  "FractionPopulationDecline": 0.0,
                  "TramplingOn": false,
                  "MaximumPropLitterMovedToSoil": 0.1,
                  "PastureConsumedAtMaximumRateOfLitterRemoval": 1200.0,
                  "SpeciesCutProportions": null,
                  "Name": "SimpleGrazing",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Models.Interfaces;",
                    "using System.Linq;",
                    "using APSIM.Shared.Utilities;",
                    "using Models.PMF;",
                    "using Models.Soils;",
                    "using Models.Soils.Nutrients;",
                    "using Models.Core;",
                    "using System;",
                    "using Models.Soils.Nutrients;",
                    "",
                    "namespace Models",
                    "{",
                    "    [Serializable]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private Clock clock;",
                    "        [Link] private Fertiliser fertiliser;",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Soil soil;",
                    "        private Nutrient nutrient;",
                    "        private Nutrient soilN;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private Nutrient Nutrient;",
                    "        [Link(Path=\"[SurfaceOrganicMatter].SurfaceResidue.Decomposition\")]",
                    "        private OrganicFlow ResidueDecomposition;",
                    "",
                    "",
                    "        [Separator(\"Fertiliser will be applied on the date(s) below\")]",
                    "        [Description(\"Apply fertiliser on the same day(s) each year? If no, then must include the year of appliaction below\")]",
                    "        public bool EachYear { get; set; }",
                    "",
                    "        [Description(\"Dates for one or more fertiliser applications (dd-mmm or dd-mmm-yyyy) as a list with a comma between dates\")]",
                    "        public string[] Dates { get; set; }",
                    "",
                    "        [Separator(\"Test for the mineral N in the soil and don't apply the fertiliser if greater than X kgN/ha is stored in the soil above a depth of Y mm\")]",
                    "        [Description(\"Use a critical soil mineral N to prevent application above a threshold?\")]",
                    "        public bool UseCritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Don't add fertiliser if N in the soil to the depth below exceeds (kg/ha)\")]",
                    "        public double CritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Depth to which the amount of N in the soil should be calculated (mm)\")]",
                    "        public double CritNDepth { get; set; }",
                    "",
                    "        [Separator(\"Fertiliser application details\")]",
                    "        [Description(\"Depth at which to apply the fertiliser (mm)\")]",
                    "        public double Depth { get; set; }",
                    "",
                    "        [Description(\"Amount of fertiliser to apply (kg N /ha) per application\")]",
                    "        public double Amount { get; set; }",
                    "",
                    "        [Description(\"Fertiliser type - select from the list\")]",
                    "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                    "",
                    "",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void FindSoilNOrNutrient(object sender, EventArgs e)",
                    "        {",
                    "            nutrient = this.FindInScope<Nutrient>() as Nutrient;",
                    "            soilN = this.FindInScope<Nutrient>() as Nutrient;",
                    "",
                    "            if (nutrient == null && soilN == null)",
                    "                throw new Exception(string.Format(\"Error in script {0}: Unable to find nutrient or soilN.\", Name));",
                    "        }",
                    "",
                    "        [EventSubscribe(\"DoManagement\")]",
                    "        private void OnDoManagement(object sender, EventArgs e)",
                    "        {",
                    "            if (OnApplicationDate())",
                    "            {",
                    "                if (NContentBelowThreshold())",
                    "                    fertiliser.Apply(Amount, FertiliserType, Depth);",
                    "                else",
                    "                    summary.WriteMessage(this, \"Skipping fertiliser application due to soil mineral N content being above critical threshold.\", MessageType.Diagnostic);",
                    "            }",
                    "        }",
                    "",
                    "        /// <summary>Checks if today's date is one of the specified fertiliser application dates.</summary>",
                    "        private bool OnApplicationDate()",
                    "        {",
                    "            if (EachYear)",
                    "                return Dates.Any(d => DateUtilities.DatesEqual(d, clock.Today));",
                    "            ",
                    "            DateTime[] dates = Dates.Select(d => DateTime.ParseExact(d, \"d-MMM-yyyy\", null)).ToArray();",
                    "            return dates.Any(d => SameDate(d, clock.Today));",
                    "        }",
                    "",
                    "        /// <summary>Checks if N content in soil is below critical threshold.</summary>",
                    "        private bool NContentBelowThreshold()",
                    "        {",
                    "            if (!UseCritNThreshold)",
                    "                return true;",
                    "            ",
                    "            double[] weights = GetLayerWeights();",
                    "            double cumSoilN = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                if (nutrient != null)",
                    "                    cumSoilN += weights[i] * nutrient.MineralN[i];",
                    "                else if (soilN != null)",
                    "                    cumSoilN += weights[i] * soilN.MineralN[i];",
                    "            }",
                    "",
                    "            return cumSoilN <= CritNThreshold;",
                    "        }",
                    "",
                    "        private double[] GetLayerWeights()",
                    "        {",
                    "            double[] weights = new double[soilPhysical.Thickness.Length];",
                    "            double cumDepth = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                cumDepth += soilPhysical.Thickness[i];",
                    "                if (cumDepth < CritNDepth)",
                    "                    weights[i] = 1;",
                    "                else if (cumDepth - soilPhysical.Thickness[i] <= CritNDepth)",
                    "                    weights[i] = (CritNDepth - (cumDepth - soilPhysical.Thickness[i])) / soilPhysical.Thickness[i];",
                    "                else",
                    "                    weights[i] = 0;",
                    "            }",
                    "",
                    "            return weights;",
                    "        }",
                    "",
                    "        private bool SameDate(DateTime d1, DateTime d2)",
                    "        {",
                    "            return d1.Year == d2.Year && d1.DayOfYear == d2.DayOfYear;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "EachYear",
                      "Value": "True"
                    },
                    {
                      "Key": "Dates",
                      "Value": "15-jan"
                    },
                    {
                      "Key": "UseCritNThreshold",
                      "Value": "False"
                    },
                    {
                      "Key": "CritNThreshold",
                      "Value": "50"
                    },
                    {
                      "Key": "CritNDepth",
                      "Value": "75"
                    },
                    {
                      "Key": "Depth",
                      "Value": "0"
                    },
                    {
                      "Key": "Amount",
                      "Value": "50"
                    },
                    {
                      "Key": "FertiliserType",
                      "Value": "NH4N"
                    }
                  ],
                  "Name": "Fertilise",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Newtonsoft.Json;",
                    "using APSIM.Shared.Utilities;",
                    "using System.Xml.Serialization;",
                    "using Models.Soils;",
                    "using Models.PMF;",
                    "using Models.Core;",
                    "using System;",
                    "using System.Linq;",
                    "using Models.Interfaces;",
                    "",
                    "",
                    "        ",
                    "namespace Models",
                    "{",
                    "    [Serializable] ",
                    "    [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Irrigation Irrigation;",
                    "        [Link] private Clock Clock;",
                    "        [Link] private Soil Soil;",
                    "        [Link(IsOptional = true)] private IPlant existingCrop;",
                    "        private DateTime StartDate;",
                    "        private DateTime EndDate;",
                    "        private double TopDUL;",
                    "        private double TopLL;",
                    "        private int nLayers;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private ISoilWater waterBalance;",
                    "        //Communication to other modules",
                    "       ",
                    "        //User inputs from properties tab",
                    "        [Description(\"Turn irrigation on?\")]",
                    "        public bool allowIrrigation { get; set; }",
                    "        [Description(\"Start of irrigation season (dd-MMM)\")]",
                    "        public string seasonStart { get; set; }",
                    "        [Description(\"End of irrigation season (dd-MMM)\")]",
                    "        public string seasonEnd { get; set; }",
                    "        [Description(\"Season allocation (mm)\")]",
                    "        public double seasonsAllocation { get; set; }",
                    "        [Description(\"Deficit to trigger irrigation (% PAWC)\")]",
                    "        public double triggerDeficit { get; set; }",
                    "        [Description(\"Deficit to stop irrigaton (% PAWC)\")]",
                    "        public double targetDeficit { get; set; }",
                    "        [Description(\"Minimum days for irrigation to return\")]",
                    "        public double returndays { get; set; }",
                    "        [Description(\"Maximum irrigation application (mm/day)\")]",
                    "        public double maximumAmount { get; set; }",
                    "        [Description(\"Depth to calculate PAWC (mm)\")]",
                    "        public double depthPAWC { get; set; }",
                    "",
                    "        //Class members",
                    "        [JsonIgnore] public double TopSWdeficit { get; set; }",
                    "        [JsonIgnore] public double TopSWC { get; set; }",
                    "        [JsonIgnore] public double DaysSinceIrrigation { get; set; }",
                    "        [JsonIgnore] public double AmountToApply { get; set; }",
                    "        [JsonIgnore] public double SeasonAppliedAmount { get; set; }",
                    "        ",
                    "        private bool IrrigationIsAllowed { get; set; }",
                    "        private bool SeasonIsOpen { get; set; }",
                    "        private bool CropIsActive { get; set; }",
                    "        private bool IrrigatorIsAvailable { get; set; }",
                    "        private bool SoilIsDry { get; set; }",
                    "",
                    "    ",
                    "        //Calculate static soil variables",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void OnStartOfSimulation(object sender, EventArgs e)",
                    "        {   ",
                    "            //Set the season dates",
                    "            StartDate = DateTime.Parse(seasonStart + \"-\" + Clock.Today.Year.ToString());",
                    "            EndDate = DateTime.Parse(seasonEnd + \"-\" + Clock.Today.Year.ToString());",
                    "            ",
                    "            //Can we irrigate at all?",
                    "            IrrigationIsAllowed = false; ",
                    "            if (allowIrrigation)",
                    "                IrrigationIsAllowed = true; ",
                    "",
                    "            //Calculate soil water variables",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            nLayers = soilPhysical.Thickness.Length;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopLL += soilPhysical.LL15mm[layer] * fracLayer;",
                    "                TopDUL += soilPhysical.DULmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "        }",
                    "             ",
                    "        //Determine daily requirement for irrigation",
                    "        [EventSubscribe(\"StartOfDay\")]",
                    "        private void OnStartOfDay(object sender, EventArgs e)",
                    "        {",
                    "            //Can we irrigate today?          ",
                    "            SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);",
                    "            if (!SeasonIsOpen)",
                    "                SeasonAppliedAmount = 0;",
                    "",
                    "            //Is there a crop in the ground that needs irrigation?",
                    "            CropIsActive = false;",
                    "            if ((existingCrop != null) && (existingCrop.IsAlive))",
                    "                CropIsActive = true;",
                    "            //if ((existingCrop.Phenology.Stage >= 3.0) && (existingCrop.Phenology.Stage < 6.0))",
                    "          ",
                    "            //Is the irrigator available?",
                    "            IrrigatorIsAvailable = false;",
                    "            DaysSinceIrrigation += 1;",
                    "            if (DaysSinceIrrigation >= returndays)",
                    "                IrrigatorIsAvailable = true;",
                    "          ",
                    "            //Is the soil dry enough to require irrigation?",
                    "            SoilIsDry = false;",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            TopSWC = 0.0;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            //for (int layer = 0; depthFromSurface < depthPAWC + soilPhysical.Thickness[layer]; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopSWC += waterBalance.SWmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "            ",
                    "            TopSWdeficit = TopSWC - TopDUL;",
                    "            if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)",
                    "                SoilIsDry = true;",
                    "                ",
                    "            //Are all the conditions ratifying irrigation",
                    "            if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)",
                    "            {",
                    "                //Lets bloody well irrigate then!!!!",
                    "                AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;",
                    "                AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));",
                    "                Irrigation.Apply(AmountToApply);",
                    "                DaysSinceIrrigation = 0;",
                    "                SeasonAppliedAmount += AmountToApply;",
                    "            }",
                    "        }",
                    "        ",
                    "        ///Checks whether theDate is between iniDate and endDate (non-year specific)",
                    "        private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)",
                    "        {",
                    "            bool result = false;",
                    "            if (iniDate.DayOfYear < endDate.DayOfYear)",
                    "            {",
                    "                // period is within one year, ex: summer in the northern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            else",
                    "            {",
                    "                // period goes over the end of the year, ex: summer in the southern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            ",
                    "            return result;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "allowIrrigation",
                      "Value": "True"
                    },
                    {
                      "Key": "seasonStart",
                      "Value": "1-sep"
                    },
                    {
                      "Key": "seasonEnd",
                      "Value": "30-apr"
                    },
                    {
                      "Key": "seasonsAllocation",
                      "Value": "10000"
                    },
                    {
                      "Key": "triggerDeficit",
                      "Value": "99"
                    },
                    {
                      "Key": "targetDeficit",
                      "Value": "100"
                    },
                    {
                      "Key": "returndays",
                      "Value": "1"
                    },
                    {
                      "Key": "maximumAmount",
                      "Value": "100"
                    },
                    {
                      "Key": "depthPAWC",
                      "Value": "300"
                    }
                  ],
                  "Name": "AutomaticIrrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Irrigation, Models",
                  "Name": "Irrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Fertiliser, Models",
                  "Name": "Fertiliser",
                  "ResourceName": "Fertiliser",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Surface.SurfaceOrganicMatter, Models",
                  "SurfOM": [],
                  "Canopies": [],
                  "InitialResidueName": "Sward",
                  "InitialResidueType": "grass",
                  "InitialResidueMass": 1000.0,
                  "InitialStandingFraction": 0.0,
                  "InitialCPR": 0.0,
                  "InitialCNR": 15.0,
                  "Name": "SurfaceOrganicMatter",
                  "ResourceName": "SurfaceOrganicMatter",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 1500.0,
                  "InitialRootDM": 450.0,
                  "InitialRootDepth": 750.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPRyegrass",
                  "ResourceName": "AGPRyegrass",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 500.0,
                  "InitialRootDM": 150.0,
                  "InitialRootDepth": 350.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPWhiteClover",
                  "ResourceName": "AGPWhiteClover",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Soil, Models",
                  "RecordNumber": 1241,
                  "ASCOrder": "Pumice",
                  "ASCSubOrder": null,
                  "SoilType": "Sandy loam",
                  "LocalName": "Oropi (Sandy loam (Te Puke No1329))",
                  "Site": "No.2 Rd",
                  "NearestTown": "Te Puke",
                  "Region": "BayOfPlenty",
                  "State": null,
                  "Country": "New Zealand",
                  "NaturalVegetation": "long term grass",
                  "ApsoilNumber": "1329",
                  "Latitude": -37.863,
                  "Longitude": 176.291,
                  "LocationAccuracy": "+/-50 m",
                  "YearOfSampling": "1982",
                  "DataSource": "The database of New Zealand soils was compiled by AgResearch (www.agresearch.co.nz) and based on soil properties gathered, mainly from publications, in the course of conducting several simulation-based research projects but particularly from the Pastoral 21 Environment program which was funded by the New Zealand Ministry for Business, Innovation and Employment,  Dairy NZ, Fonterra and Meat & Wool NZ.",
                  "Comments": "The data is a combination of published or supplied measurements, pedotransfer functions, and expert opinion. See Cichota et al. (2013; Soil Research 51: 92-111, http://dx.doi.org/10.1071/SR12338) for a description of the pedotransfer functions. The soil carbon and fresh organic matter settings have been set as those broadly appropriate for permanent productive pastoral systems, see Cichota el al. (2012; Soil Research 50: 694-707, http://dx.doi.org/10.1071/SR12208). Users should take care to adapt these to local conditions before using the data in simulations. FOM values estimated to be 900 kg/ha of FOM in top 600mm of soil and another 100 kg/ha below.",
                  "Name": "Soil",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.Physical, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0
                      ],
                      "ParticleSizeSand": [
                        59.63,
                        63.7,
                        50.12,
                        61.19
                      ],
                      "ParticleSizeSilt": [
                        34.37,
                        31.68,
                        38.56,
                        25.3
                      ],
                      "ParticleSizeClay": [
                        6.0,
                        4.62,
                        11.32,
                        13.51
                      ],
                      "Rocks": [
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "Texture": null,
                      "BD": [
                        0.91,
                        0.93,
                        0.81,
                        0.82
                      ],
                      "AirDry": [
                        0.054,
                        0.043,
                        0.072,
                        0.073
                      ],
                      "LL15": [
                        0.165,
                        0.13,
                        0.219,
                        0.221
                      ],
                      "DUL": [
                        0.403,
                        0.321,
                        0.409,
                        0.388
                      ],
                      "SAT": [
                        0.56,
                        0.566,
                        0.606,
                        0.615
                      ],
                      "KS": [
                        20963.266,
                        16928.41,
                        10150.978,
                        9243.651
                      ],
                      "BDMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "AirDryMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "LL15Metadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "DULMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "SATMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "KSMetadata": null,
                      "RocksMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "TextureMetadata": null,
                      "ParticleSizeSandMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "ParticleSizeSiltMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "ParticleSizeClayMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "Name": "Physical",
                      "ResourceName": null,
                      "Children": [
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.165,
                            0.13,
                            0.219,
                            0.221
                          ],
                          "KL": [
                            0.06,
                            0.06,
                            0.057,
                            0.04
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPRyegrassSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        },
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.165,
                            0.13,
                            0.219,
                            0.221
                          ],
                          "KL": [
                            0.06,
                            0.06,
                            0.057,
                            0.04
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPWhiteCloverSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Organic, Models",
                      "FOMCNRatio": 40.0,
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "Carbon": [
                        5.4,
                        2.5,
                        2.6,
                        0.9,
                        0.8
                      ],
                      "CarbonUnits": 0,
                      "SoilCNRatio": [
                        12.273,
                        12.273,
                        12.273,
                        12.273,
                        12.273
                      ],
                      "FBiom": [
                        0.075,
                        0.017,
                        0.008,
                        0.008,
                        0.008
                      ],
                      "FInert": [
                        0.638,
                        0.801,
                        0.924,
                        0.97,
                        0.994
                      ],
                      "FOM": [
                        123.78494877889968,
                        91.70214550156204,
                        50.32720450604473,
                        24.991750138606616,
                        9.193951074886918
                      ],
                      "CarbonMetadata": null,
                      "FOMMetadata": null,
                      "Name": "Organic",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Chemical, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "PH": [
                        6.5,
                        6.5,
                        6.5,
                        6.5,
                        6.5
                      ],
                      "PHUnits": 0,
                      "EC": null,
                      "ESP": null,
                      "CEC": [
                        15.7,
                        9.4,
                        10.4,
                        8.1,
                        10.1
                      ],
                      "ECMetadata": null,
                      "CLMetadata": null,
                      "CECMetadata": null,
                      "ESPMetadata": null,
                      "PHMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "Name": "Chemical",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Swim3, Models",
                      "Salb": 0.13,
                      "CN2Bare": 0.0,
                      "CNRed": 0.0,
                      "CNCov": 0.8,
                      "KDul": 1.0,
                      "PSIDul": -100.0,
                      "VC": true,
                      "DTMin": 0.0,
                      "DTMax": 1400.0,
                      "MaxWaterIncrement": 10.0,
                      "SpaceWeightingFactor": 0.0,
                      "SoluteSpaceWeightingFactor": 1.0,
                      "Dis": 0.0,
                      "Disp": 1.0,
                      "A": 2.0,
                      "DTHC": 0.1,
                      "DTHP": 2.0,
                      "vcon1": 7.28E-09,
                      "vcon2": 7.26E-07,
                      "eo_time": "06:00",
                      "eo_durn": 720.0,
                      "default_rain_time": "00:00",
                      "default_rain_duration": 720.0,
                      "Diagnostics": false,
                      "Name": "Swim3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Nutrients.Nutrient, Models",
                      "Name": "Nutrient",
                      "ResourceName": "Nutrient",
                      "Children": [
                        {
                          "$type": "Models.Soils.Nutrients.NH3Volatilisation, Models",
                          "DepthEmissable1": 30.0,
                          "DepthEmissable2": 100.0,
                          "k_BC": 0.03,
                          "k_pH_hyd": 1.0,
                          "k_pH_nit": 1.0,
                          "k_pH_x": 0.2,
                          "k_AFPV": 300.0,
                          "f_AV": 0.5,
                          "CritRain1": 3.0,
                          "CritRain2": 10.0,
                          "pH": null,
                          "EmissabilityNH3": null,
                          "NH3ppm": null,
                          "NH3": null,
                          "NH3Gas": null,
                          "EmissionNH3": null,
                          "NH4Sol": null,
                          "PotGasExchangeNH": 0.0,
                          "GasExchangeNH": null,
                          "AirFilledPoreVolume": null,
                          "NH3toNHxRatio": null,
                          "NH3GtoNH3ARatio": null,
                          "pK_NHx": null,
                          "pG_NH3": null,
                          "RainFactor": 0.0,
                          "Name": "NH3Volatilisation",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Water, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.403,
                        0.321,
                        0.409,
                        0.388,
                        0.489
                      ],
                      "InitialPAWmm": 727.7,
                      "RelativeTo": "LL15",
                      "FilledFromTop": false,
                      "Name": "Water",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        6.0,
                        2.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NO3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        3000.0
                      ],
                      "InitialValues": [
                        0.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        0.5
                      ],
                      "FIP": [
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NH4",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 1,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "Urea",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.LayerStructure, Models",
                      "Thickness": [
                        5.0,
                        5.0,
                        10.0,
                        10.0,
                        20.0,
                        50.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0
                      ],
                      "Name": "LayerStructure",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                      "Thickness": null,
                      "InitialValues": null,
                      "Name": "Temperature",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Report, Models",
                  "VariableNames": [
                    "[Clock].Today as Date",
                    "[Nutrient].NH4.kgha[1]",
                    "[Nutrient].NH4.AmountInSolution[1]",
                    "",
                    "[SWIM3].ConcWaterNH4[1]",
                    "sum([Nutrient].NH3Volatilisation.EmissionNH3) as Volat",
                    "[Nutrient].NH4.AmountInSolution[1] / [Nutrient].NH4.kgha[1] as PropInSolution"
                  ],
                  "EventNames": [
                    "",
                    "[Clock].EndOfDay",
                    "",
                    "//Clock.Today >= new DateTime(1980, 1, 10) && [Clock].EndOfDay"
                  ],
                  "GroupByVariableName": null,
                  "Name": "Report",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "GraphsPerPage": 6,
          "Name": "Folder",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Exchange",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 8,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Nutrient.NH4.kgha(1)",
                  "YFieldName": "Nutrient.NH4.AmountInSolution(1)",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Ratio",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "Volat",
                  "Position": 2,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Volatilisation",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 2,
                  "ColourArgb": -2793984,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 8,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": true,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Factorial.Experiment, Models",
      "DisabledSimNames": null,
      "Name": "NoVolatilisationWithSoilWater",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Factorial.Factors, Models",
          "Name": "Factors",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Factorial.Factor, Models",
              "Specification": "[ModifyRain].Script.AssertedRainfallAmount = 0 to 15 step 2",
              "Name": "Factor",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Simulation, Models",
          "Descriptors": null,
          "Name": "Sim5",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Clock, Models",
              "Start": "1980-01-03T00:00:00",
              "End": "1980-01-31T00:00:00",
              "Name": "Clock",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Climate.Weather, Models",
              "ConstantsFile": null,
              "FileName": "%root%/Examples/WeatherFiles/NZ_Lincoln.met",
              "ExcelWorkSheetName": null,
              "Latitude": -43.624,
              "Tav": 11.4,
              "Amp": 11.5,
              "Name": "Weather",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Interfaces;",
                "using System.Linq;",
                "using APSIM.Shared.Utilities;",
                "using Models.PMF;",
                "using Models.Soils;",
                "using Models.Soils.Nutrients;",
                "using Models.Core;",
                "using System;",
                "using Models.Soils.Nutrients;",
                "",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] private Clock clock;",
                "        [Link] private IWeather weather;",
                "",
                "        [Separator(\"???\")]",
                "        [Description(\"Amount of rainfall\")]",
                "        public double AssertedRainfallAmount { get; set; }",
                "",
                "        [Description(\"Date of first rain day\")]",
                "        public DateTime AssertedRainfallDate { get; set; }",
                "",
                "        [Description(\"Duration of the rainfall event (days)\")]",
                "        public double AssertedRainfallDuration { get; set; }",
                "",
                "        [EventSubscribe(\"StartOfSimulation\")]",
                "        private void FindSoilNOrNutrient(object sender, EventArgs e)",
                "        {",
                "        }",
                "",
                "        [EventSubscribe(\"DoManagement\")]",
                "        private void OnDoManagement(object sender, EventArgs e)",
                "        {",
                "            if ((clock.Today >= AssertedRainfallDate) && (clock.Today <= AssertedRainfallDate.AddDays(AssertedRainfallDuration))) ",
                "                weather.Rain = AssertedRainfallAmount;           ",
                "            else ",
                "                weather.Rain = 0.0;",
                "        }",
                "",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "AssertedRainfallAmount",
                  "Value": "6"
                },
                {
                  "Key": "AssertedRainfallDate",
                  "Value": "01/15/1980 00:00:00"
                },
                {
                  "Key": "AssertedRainfallDuration",
                  "Value": "6"
                }
              ],
              "Name": "ModifyRain",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": "MicroClimate",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.ForageDigestibility.Forages, Models",
              "Parameters": [
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "SurfaceOrganicMatter.Residue",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Leaf",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stem",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stolon",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Leaf",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stem",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stolon",
                  "LiveDigestibility": "FromModel",
                  "DeadDigestibility": "FromModel",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                }
              ],
              "Name": "Forages",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
              "Name": "SoilArbitrator",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Summary, Models",
              "Verbosity": 100,
              "Name": "Summary",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Core.Zone, Models",
              "Area": 1.0,
              "Slope": 0.0,
              "AspectAngle": 0.0,
              "Altitude": 50.0,
              "Name": "Field",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.AgPasture.SimpleGrazing, Models",
                  "GrazingRotationType": 0,
                  "SimpleGrazingFrequencyString": "end of month",
                  "SimpleMinGrazable": 0.0,
                  "SimpleGrazingResidual": 1500.0,
                  "PreGrazeDMArray": null,
                  "PostGrazeDMArray": null,
                  "FlexibleExpressionForTimingOfGrazing": null,
                  "FlexibleGrazePostDM": 0.0,
                  "MaximumRotationLengthArray": null,
                  "MinimumRotationLengthArray": null,
                  "NoGrazingStartString": null,
                  "NoGrazingEndString": null,
                  "FractionDefoliatedBiomassToSoil": [
                    0.0
                  ],
                  "FractionDefoliatedNToSoil": [
                    0.0
                  ],
                  "FractionExcretedNToDung": [
                    0.0
                  ],
                  "CNRatioDung": 0.0,
                  "DepthUrineIsAdded": 0.0,
                  "SendDungElsewhere": 0.0,
                  "SendUrineElsewhere": 0.0,
                  "FractionPopulationDecline": 0.0,
                  "TramplingOn": false,
                  "MaximumPropLitterMovedToSoil": 0.1,
                  "PastureConsumedAtMaximumRateOfLitterRemoval": 1200.0,
                  "SpeciesCutProportions": null,
                  "Name": "SimpleGrazing",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Models.Interfaces;",
                    "using System.Linq;",
                    "using APSIM.Shared.Utilities;",
                    "using Models.PMF;",
                    "using Models.Soils;",
                    "using Models.Soils.Nutrients;",
                    "using Models.Core;",
                    "using System;",
                    "using Models.Soils.Nutrients;",
                    "",
                    "namespace Models",
                    "{",
                    "    [Serializable]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private Clock clock;",
                    "        [Link] private Fertiliser fertiliser;",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Soil soil;",
                    "        private Nutrient nutrient;",
                    "        private Nutrient soilN;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private Nutrient Nutrient;",
                    "        [Link(Path=\"[SurfaceOrganicMatter].SurfaceResidue.Decomposition\")]",
                    "        private OrganicFlow ResidueDecomposition;",
                    "",
                    "",
                    "        [Separator(\"Fertiliser will be applied on the date(s) below\")]",
                    "        [Description(\"Apply fertiliser on the same day(s) each year? If no, then must include the year of appliaction below\")]",
                    "        public bool EachYear { get; set; }",
                    "",
                    "        [Description(\"Dates for one or more fertiliser applications (dd-mmm or dd-mmm-yyyy) as a list with a comma between dates\")]",
                    "        public string[] Dates { get; set; }",
                    "",
                    "        [Separator(\"Test for the mineral N in the soil and don't apply the fertiliser if greater than X kgN/ha is stored in the soil above a depth of Y mm\")]",
                    "        [Description(\"Use a critical soil mineral N to prevent application above a threshold?\")]",
                    "        public bool UseCritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Don't add fertiliser if N in the soil to the depth below exceeds (kg/ha)\")]",
                    "        public double CritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Depth to which the amount of N in the soil should be calculated (mm)\")]",
                    "        public double CritNDepth { get; set; }",
                    "",
                    "        [Separator(\"Fertiliser application details\")]",
                    "        [Description(\"Depth at which to apply the fertiliser (mm)\")]",
                    "        public double Depth { get; set; }",
                    "",
                    "        [Description(\"Amount of fertiliser to apply (kg N /ha) per application\")]",
                    "        public double Amount { get; set; }",
                    "",
                    "        [Description(\"Fertiliser type - select from the list\")]",
                    "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                    "",
                    "",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void FindSoilNOrNutrient(object sender, EventArgs e)",
                    "        {",
                    "            nutrient = this.FindInScope<Nutrient>() as Nutrient;",
                    "            soilN = this.FindInScope<Nutrient>() as Nutrient;",
                    "",
                    "            if (nutrient == null && soilN == null)",
                    "                throw new Exception(string.Format(\"Error in script {0}: Unable to find nutrient or soilN.\", Name));",
                    "        }",
                    "",
                    "        [EventSubscribe(\"DoManagement\")]",
                    "        private void OnDoManagement(object sender, EventArgs e)",
                    "        {",
                    "            if (OnApplicationDate())",
                    "            {",
                    "                if (NContentBelowThreshold())",
                    "                    fertiliser.Apply(Amount, FertiliserType, Depth);",
                    "                else",
                    "                    summary.WriteMessage(this, \"Skipping fertiliser application due to soil mineral N content being above critical threshold.\", MessageType.Diagnostic);",
                    "            }",
                    "        }",
                    "",
                    "        /// <summary>Checks if today's date is one of the specified fertiliser application dates.</summary>",
                    "        private bool OnApplicationDate()",
                    "        {",
                    "            if (EachYear)",
                    "                return Dates.Any(d => DateUtilities.DatesEqual(d, clock.Today));",
                    "            ",
                    "            DateTime[] dates = Dates.Select(d => DateTime.ParseExact(d, \"d-MMM-yyyy\", null)).ToArray();",
                    "            return dates.Any(d => SameDate(d, clock.Today));",
                    "        }",
                    "",
                    "        /// <summary>Checks if N content in soil is below critical threshold.</summary>",
                    "        private bool NContentBelowThreshold()",
                    "        {",
                    "            if (!UseCritNThreshold)",
                    "                return true;",
                    "            ",
                    "            double[] weights = GetLayerWeights();",
                    "            double cumSoilN = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                if (nutrient != null)",
                    "                    cumSoilN += weights[i] * nutrient.MineralN[i];",
                    "                else if (soilN != null)",
                    "                    cumSoilN += weights[i] * soilN.MineralN[i];",
                    "            }",
                    "",
                    "            return cumSoilN <= CritNThreshold;",
                    "        }",
                    "",
                    "        private double[] GetLayerWeights()",
                    "        {",
                    "            double[] weights = new double[soilPhysical.Thickness.Length];",
                    "            double cumDepth = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                cumDepth += soilPhysical.Thickness[i];",
                    "                if (cumDepth < CritNDepth)",
                    "                    weights[i] = 1;",
                    "                else if (cumDepth - soilPhysical.Thickness[i] <= CritNDepth)",
                    "                    weights[i] = (CritNDepth - (cumDepth - soilPhysical.Thickness[i])) / soilPhysical.Thickness[i];",
                    "                else",
                    "                    weights[i] = 0;",
                    "            }",
                    "",
                    "            return weights;",
                    "        }",
                    "",
                    "        private bool SameDate(DateTime d1, DateTime d2)",
                    "        {",
                    "            return d1.Year == d2.Year && d1.DayOfYear == d2.DayOfYear;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "EachYear",
                      "Value": "True"
                    },
                    {
                      "Key": "Dates",
                      "Value": "15-jan"
                    },
                    {
                      "Key": "UseCritNThreshold",
                      "Value": "False"
                    },
                    {
                      "Key": "CritNThreshold",
                      "Value": "50"
                    },
                    {
                      "Key": "CritNDepth",
                      "Value": "75"
                    },
                    {
                      "Key": "Depth",
                      "Value": "0"
                    },
                    {
                      "Key": "Amount",
                      "Value": "50"
                    },
                    {
                      "Key": "FertiliserType",
                      "Value": "UreaN"
                    }
                  ],
                  "Name": "Fertilise",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Newtonsoft.Json;",
                    "using APSIM.Shared.Utilities;",
                    "using System.Xml.Serialization;",
                    "using Models.Soils;",
                    "using Models.PMF;",
                    "using Models.Core;",
                    "using System;",
                    "using System.Linq;",
                    "using Models.Interfaces;",
                    "",
                    "",
                    "        ",
                    "namespace Models",
                    "{",
                    "    [Serializable] ",
                    "    [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Irrigation Irrigation;",
                    "        [Link] private Clock Clock;",
                    "        [Link] private Soil Soil;",
                    "        [Link(IsOptional = true)] private IPlant existingCrop;",
                    "        private DateTime StartDate;",
                    "        private DateTime EndDate;",
                    "        private double TopDUL;",
                    "        private double TopLL;",
                    "        private int nLayers;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private ISoilWater waterBalance;",
                    "        //Communication to other modules",
                    "       ",
                    "        //User inputs from properties tab",
                    "        [Description(\"Turn irrigation on?\")]",
                    "        public bool allowIrrigation { get; set; }",
                    "        [Description(\"Start of irrigation season (dd-MMM)\")]",
                    "        public string seasonStart { get; set; }",
                    "        [Description(\"End of irrigation season (dd-MMM)\")]",
                    "        public string seasonEnd { get; set; }",
                    "        [Description(\"Season allocation (mm)\")]",
                    "        public double seasonsAllocation { get; set; }",
                    "        [Description(\"Deficit to trigger irrigation (% PAWC)\")]",
                    "        public double triggerDeficit { get; set; }",
                    "        [Description(\"Deficit to stop irrigaton (% PAWC)\")]",
                    "        public double targetDeficit { get; set; }",
                    "        [Description(\"Minimum days for irrigation to return\")]",
                    "        public double returndays { get; set; }",
                    "        [Description(\"Maximum irrigation application (mm/day)\")]",
                    "        public double maximumAmount { get; set; }",
                    "        [Description(\"Depth to calculate PAWC (mm)\")]",
                    "        public double depthPAWC { get; set; }",
                    "",
                    "        //Class members",
                    "        [JsonIgnore] public double TopSWdeficit { get; set; }",
                    "        [JsonIgnore] public double TopSWC { get; set; }",
                    "        [JsonIgnore] public double DaysSinceIrrigation { get; set; }",
                    "        [JsonIgnore] public double AmountToApply { get; set; }",
                    "        [JsonIgnore] public double SeasonAppliedAmount { get; set; }",
                    "        ",
                    "        private bool IrrigationIsAllowed { get; set; }",
                    "        private bool SeasonIsOpen { get; set; }",
                    "        private bool CropIsActive { get; set; }",
                    "        private bool IrrigatorIsAvailable { get; set; }",
                    "        private bool SoilIsDry { get; set; }",
                    "",
                    "    ",
                    "        //Calculate static soil variables",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void OnStartOfSimulation(object sender, EventArgs e)",
                    "        {   ",
                    "            //Set the season dates",
                    "            StartDate = DateTime.Parse(seasonStart + \"-\" + Clock.Today.Year.ToString());",
                    "            EndDate = DateTime.Parse(seasonEnd + \"-\" + Clock.Today.Year.ToString());",
                    "            ",
                    "            //Can we irrigate at all?",
                    "            IrrigationIsAllowed = false; ",
                    "            if (allowIrrigation)",
                    "                IrrigationIsAllowed = true; ",
                    "",
                    "            //Calculate soil water variables",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            nLayers = soilPhysical.Thickness.Length;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopLL += soilPhysical.LL15mm[layer] * fracLayer;",
                    "                TopDUL += soilPhysical.DULmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "        }",
                    "             ",
                    "        //Determine daily requirement for irrigation",
                    "        [EventSubscribe(\"StartOfDay\")]",
                    "        private void OnStartOfDay(object sender, EventArgs e)",
                    "        {",
                    "            //Can we irrigate today?          ",
                    "            SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);",
                    "            if (!SeasonIsOpen)",
                    "                SeasonAppliedAmount = 0;",
                    "",
                    "            //Is there a crop in the ground that needs irrigation?",
                    "            CropIsActive = false;",
                    "            if ((existingCrop != null) && (existingCrop.IsAlive))",
                    "                CropIsActive = true;",
                    "            //if ((existingCrop.Phenology.Stage >= 3.0) && (existingCrop.Phenology.Stage < 6.0))",
                    "          ",
                    "            //Is the irrigator available?",
                    "            IrrigatorIsAvailable = false;",
                    "            DaysSinceIrrigation += 1;",
                    "            if (DaysSinceIrrigation >= returndays)",
                    "                IrrigatorIsAvailable = true;",
                    "          ",
                    "            //Is the soil dry enough to require irrigation?",
                    "            SoilIsDry = false;",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            TopSWC = 0.0;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            //for (int layer = 0; depthFromSurface < depthPAWC + soilPhysical.Thickness[layer]; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopSWC += waterBalance.SWmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "            ",
                    "            TopSWdeficit = TopSWC - TopDUL;",
                    "            if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)",
                    "                SoilIsDry = true;",
                    "                ",
                    "            //Are all the conditions ratifying irrigation",
                    "            if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)",
                    "            {",
                    "                //Lets bloody well irrigate then!!!!",
                    "                AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;",
                    "                AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));",
                    "                Irrigation.Apply(AmountToApply);",
                    "                DaysSinceIrrigation = 0;",
                    "                SeasonAppliedAmount += AmountToApply;",
                    "            }",
                    "        }",
                    "        ",
                    "        ///Checks whether theDate is between iniDate and endDate (non-year specific)",
                    "        private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)",
                    "        {",
                    "            bool result = false;",
                    "            if (iniDate.DayOfYear < endDate.DayOfYear)",
                    "            {",
                    "                // period is within one year, ex: summer in the northern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            else",
                    "            {",
                    "                // period goes over the end of the year, ex: summer in the southern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            ",
                    "            return result;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "allowIrrigation",
                      "Value": "False"
                    },
                    {
                      "Key": "seasonStart",
                      "Value": "1-sep"
                    },
                    {
                      "Key": "seasonEnd",
                      "Value": "30-apr"
                    },
                    {
                      "Key": "seasonsAllocation",
                      "Value": "10000"
                    },
                    {
                      "Key": "triggerDeficit",
                      "Value": "50"
                    },
                    {
                      "Key": "targetDeficit",
                      "Value": "100"
                    },
                    {
                      "Key": "returndays",
                      "Value": "21"
                    },
                    {
                      "Key": "maximumAmount",
                      "Value": "100"
                    },
                    {
                      "Key": "depthPAWC",
                      "Value": "300"
                    }
                  ],
                  "Name": "AutomaticIrrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Irrigation, Models",
                  "Name": "Irrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Fertiliser, Models",
                  "Name": "Fertiliser",
                  "ResourceName": "Fertiliser",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Surface.SurfaceOrganicMatter, Models",
                  "SurfOM": [],
                  "Canopies": [],
                  "InitialResidueName": "Sward",
                  "InitialResidueType": "grass",
                  "InitialResidueMass": 1000.0,
                  "InitialStandingFraction": 0.0,
                  "InitialCPR": 0.0,
                  "InitialCNR": 15.0,
                  "Name": "SurfaceOrganicMatter",
                  "ResourceName": "SurfaceOrganicMatter",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Soil, Models",
                  "RecordNumber": 0,
                  "ASCOrder": null,
                  "ASCSubOrder": null,
                  "SoilType": "NZ_Sedimentary",
                  "LocalName": "Lismore",
                  "Site": "Winchmore",
                  "NearestTown": "Ashburton",
                  "Region": "Canterbury",
                  "State": null,
                  "Country": "New Zealand",
                  "NaturalVegetation": null,
                  "ApsoilNumber": null,
                  "Latitude": -48.48,
                  "Longitude": 0.0,
                  "LocationAccuracy": null,
                  "YearOfSampling": null,
                  "DataSource": null,
                  "Comments": null,
                  "Name": "Soil",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.Chemical, Models",
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "PH": [
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0,
                        6.0
                      ],
                      "PHUnits": 0,
                      "EC": null,
                      "ESP": null,
                      "CEC": [
                        13.966,
                        8.24825,
                        6.6176,
                        5.1934000000000005,
                        4.3688,
                        3.90025,
                        3.7877500000000004
                      ],
                      "ECMetadata": null,
                      "CLMetadata": null,
                      "CECMetadata": [
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated"
                      ],
                      "ESPMetadata": null,
                      "PHMetadata": null,
                      "Name": "Chemical",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Physical, Models",
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "ParticleSizeSand": [
                        28.0,
                        29.75,
                        30.799999999999997,
                        32.199999999999996,
                        32.9,
                        33.25,
                        33.25
                      ],
                      "ParticleSizeSilt": [
                        52.0,
                        55.25,
                        57.2,
                        59.800000000000004,
                        61.1,
                        61.75,
                        61.75
                      ],
                      "ParticleSizeClay": [
                        20.0,
                        15.0,
                        12.0,
                        8.0,
                        6.0,
                        5.0,
                        5.0
                      ],
                      "Rocks": [
                        0.0,
                        0.0,
                        0.5682632779406973,
                        0.7983870967741936,
                        0.8660509144380112,
                        0.8666209105467857,
                        0.8666209105467857
                      ],
                      "Texture": null,
                      "BD": [
                        1.3,
                        1.35,
                        1.0,
                        0.53,
                        0.31,
                        0.3,
                        0.3
                      ],
                      "AirDry": [
                        0.05,
                        0.12,
                        0.055,
                        0.015,
                        0.01,
                        0.01,
                        0.01
                      ],
                      "LL15": [
                        0.15,
                        0.14,
                        0.055,
                        0.015,
                        0.01,
                        0.01,
                        0.01
                      ],
                      "DUL": [
                        0.36,
                        0.34,
                        0.19,
                        0.065,
                        0.04,
                        0.03,
                        0.03
                      ],
                      "SAT": [
                        0.45,
                        0.43,
                        0.25,
                        0.15,
                        0.11,
                        0.11,
                        0.11
                      ],
                      "KS": [
                        5000.0,
                        2500.0,
                        3000.0,
                        10000.0,
                        17500.0,
                        20000.0,
                        20000.0
                      ],
                      "BDMetadata": null,
                      "AirDryMetadata": null,
                      "LL15Metadata": null,
                      "DULMetadata": null,
                      "SATMetadata": null,
                      "KSMetadata": null,
                      "RocksMetadata": [
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated"
                      ],
                      "TextureMetadata": null,
                      "ParticleSizeSandMetadata": [
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated"
                      ],
                      "ParticleSizeSiltMetadata": [
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated",
                        "Calculated"
                      ],
                      "ParticleSizeClayMetadata": [
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null
                      ],
                      "Name": "Physical",
                      "ResourceName": null,
                      "Children": [
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.15,
                            0.14,
                            0.06,
                            0.02,
                            0.01,
                            0.01,
                            0.01
                          ],
                          "KL": [
                            0.1,
                            0.1,
                            0.08,
                            0.04,
                            0.01,
                            0.0,
                            0.0
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            0.0,
                            0.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPRyegrassSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        },
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.15,
                            0.14,
                            0.06,
                            0.02,
                            0.01,
                            0.01,
                            0.01
                          ],
                          "KL": [
                            0.1,
                            0.1,
                            0.08,
                            0.04,
                            0.01,
                            0.0,
                            0.0
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            1.0,
                            0.0,
                            0.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPWhiteCloverSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.WaterModel.WaterBalance, Models",
                      "SummerDate": "1-Nov",
                      "SummerU": 6.0,
                      "SummerCona": 3.5,
                      "WinterDate": "1-apr",
                      "WinterU": 2.0,
                      "WinterCona": 2.0,
                      "DiffusConst": 88.0,
                      "DiffusSlope": 35.0,
                      "Salb": 0.13,
                      "CN2Bare": 73.0,
                      "CNRed": 20.0,
                      "CNCov": 0.8,
                      "DischargeWidth": 0.0,
                      "CatchmentArea": 0.0,
                      "PSIDul": -100.0,
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "SWCON": [
                        0.5,
                        0.52,
                        0.55,
                        0.6,
                        0.65,
                        0.65,
                        0.65
                      ],
                      "KLAT": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "Name": "SoilWater",
                      "ResourceName": "WaterBalance",
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Organic, Models",
                      "FOMCNRatio": 40.0,
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "Carbon": [
                        3.0,
                        1.0,
                        0.6,
                        0.4,
                        0.25,
                        0.15,
                        0.1
                      ],
                      "CarbonUnits": 0,
                      "SoilCNRatio": [
                        12.0,
                        12.0,
                        12.0,
                        12.0,
                        12.0,
                        12.0,
                        12.0
                      ],
                      "FBiom": [
                        0.04,
                        0.02,
                        0.02,
                        0.01,
                        0.01,
                        0.0,
                        0.0
                      ],
                      "FInert": [
                        0.5,
                        0.7,
                        0.83,
                        0.9,
                        0.95,
                        0.99,
                        0.99
                      ],
                      "FOM": [
                        331.337020409173,
                        245.4605019055056,
                        164.53709493722965,
                        121.89207790753734,
                        73.93128242700234,
                        40.57434806729268,
                        22.267674346259405
                      ],
                      "CarbonMetadata": null,
                      "FOMMetadata": null,
                      "Name": "Organic",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Water, Models",
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "InitialValues": [
                        0.3495,
                        0.33000000000000007,
                        0.18325,
                        0.0625,
                        0.0385,
                        0.028999999999999998,
                        0.028999999999999998
                      ],
                      "InitialPAWmm": 109.72500000000002,
                      "RelativeTo": "LL15",
                      "FilledFromTop": false,
                      "Name": "Water",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Nutrients.Nutrient, Models",
                      "Name": "Nutrient",
                      "ResourceName": "Nutrient",
                      "Children": [
                        {
                          "$type": "Models.Soils.Nutrients.NH3Volatilisation, Models",
                          "DepthEmissable1": 30.0,
                          "DepthEmissable2": 100.0,
                          "k_BC": 0.03,
                          "k_pH_hyd": 1.0,
                          "k_pH_nit": 1.0,
                          "k_pH_x": 0.2,
                          "k_AFPV": 300.0,
                          "f_AV": 0.5,
                          "CritRain1": 3.0,
                          "CritRain2": 10.0,
                          "pH": null,
                          "EmissabilityNH3": null,
                          "NH3ppm": null,
                          "NH3": null,
                          "NH3Gas": null,
                          "EmissionNH3": null,
                          "NH4Sol": null,
                          "PotGasExchangeNH": 0.0,
                          "GasExchangeNH": null,
                          "AirFilledPoreVolume": null,
                          "NH3toNHxRatio": null,
                          "NH3GtoNH3ARatio": null,
                          "pK_NHx": null,
                          "pG_NH3": null,
                          "RainFactor": 0.0,
                          "Name": "NH3Volatilisation",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "InitialValues": [
                        5.0,
                        2.5,
                        1.0,
                        0.75,
                        0.5,
                        0.5,
                        0.5
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NO3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "InitialValues": [
                        0.1,
                        0.1,
                        0.1,
                        0.1,
                        0.1,
                        0.1,
                        0.1
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NH4",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        150.0,
                        150.0,
                        200.0,
                        150.0,
                        250.0,
                        300.0,
                        300.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 1,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": null,
                      "FIP": null,
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "Urea",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                      "Thickness": null,
                      "InitialValues": null,
                      "Name": "Temperature",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 1500.0,
                  "InitialRootDM": 450.0,
                  "InitialRootDepth": 750.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPRyegrass",
                  "ResourceName": "AGPRyegrass",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 500.0,
                  "InitialRootDM": 150.0,
                  "InitialRootDepth": 350.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPWhiteClover",
                  "ResourceName": "AGPWhiteClover",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Report, Models",
                  "VariableNames": [
                    "[Clock].Today as Date",
                    "[Weather].Rain as Rain",
                    "[Irrigation].IrrigationApplied as Irrigation",
                    "",
                    "sum([Nutrient].NH3Volatilisation.EmissionNH3) as Volat",
                    "sum([Nutrient].Urea.kgha[1:2]) as Urea30mm",
                    "sum([Nutrient].NH4.kgha[1:2]) as NH430mm",
                    "sum([Nutrient].NO3.kgha[1:2]) as NO330mm",
                    "mean([Nutrient].NH3Volatilisation.pH[1:2]) as pH",
                    "[Nutrient].NH3Volatilisation.RainFactor as RainFactor"
                  ],
                  "EventNames": [
                    "[Clock].EndOfDay"
                  ],
                  "GroupByVariableName": null,
                  "Name": "Report",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "GraphsPerPage": 6,
          "Name": "Folder",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Volatilisation",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "Volat",
                  "Position": 2,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "VolatilisationCum",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 2,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": true,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "RainFactor",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Factor",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "RainFactor",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "RainFactor",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "Rainfall",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -11094807,
                  "FactorToVaryColours": null,
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Rain",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": null,
                  "Name": "Rain",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Factorial.Experiment, Models",
      "DisabledSimNames": null,
      "Name": "QuickTestsForTidying",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Factorial.Factors, Models",
          "Name": "Factors",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Factorial.Permutation, Models",
              "Name": "Permutation",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Factorial.Factor, Models",
                  "Specification": "",
                  "Name": "Climate",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[Weather].FileName = C:\\aaUnderVC\\ApsimX\\Examples\\WeatherFiles\\NZ_Lincoln.met"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Lincoln",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Factorial.CompositeFactor, Models",
                      "Specifications": [
                        "[Weather].FileName = C:\\aaUnderVC\\ApsimX\\Examples\\WeatherFiles\\NZ_Hamilton.met"
                      ],
                      "Paths": null,
                      "Values": null,
                      "Name": "Hamilton",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Factorial.Factor, Models",
                  "Specification": "[FertiliseFixedDates].Script.Dates = 15-jan, 15-mar, 15-may, 15-jul, 15-sep, 15-nov",
                  "Name": "Season",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Simulation, Models",
          "Descriptors": null,
          "Name": "AgPastureExample",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Clock, Models",
              "Start": "1980-01-01T00:00:00",
              "End": "1980-12-31T00:00:00",
              "Name": "Clock",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Climate.Weather, Models",
              "ConstantsFile": null,
              "FileName": "%root%\\Examples\\WeatherFiles\\NZ_Lincoln.met",
              "ExcelWorkSheetName": "",
              "Latitude": -43.624,
              "Tav": 11.4,
              "Amp": 11.5,
              "Name": "Weather",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": "MicroClimate",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
              "Name": "SoilArbitrator",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.ForageDigestibility.Forages, Models",
              "Parameters": [
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "SurfaceOrganicMatter.Residue",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Leaf",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stem",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPRyegrass.Stolon",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Leaf",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stem",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                },
                {
                  "$type": "Models.ForageDigestibility.ForageMaterialParameters, Models",
                  "Name": "AGPWhiteClover.Stolon",
                  "LiveDigestibility": "0.7",
                  "DeadDigestibility": "0.3",
                  "LiveFractionConsumable": 1.0,
                  "DeadFractionConsumable": 1.0,
                  "LiveMinimumBiomass": 100.0,
                  "DeadMinimumBiomass": 0.0
                }
              ],
              "Name": "Forages",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Summary, Models",
              "Verbosity": 100,
              "Name": "Summary",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Core.Zone, Models",
              "Area": 1.0,
              "Slope": 0.0,
              "AspectAngle": 0.0,
              "Altitude": 50.0,
              "Name": "Field",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.AgPasture.SimpleGrazing, Models",
                  "GrazingRotationType": 0,
                  "SimpleGrazingFrequencyString": "21",
                  "SimpleMinGrazable": 0.0,
                  "SimpleGrazingResidual": 1500.0,
                  "PreGrazeDMArray": [
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0,
                    1000.0
                  ],
                  "PostGrazeDMArray": [
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0,
                    2000.0
                  ],
                  "FlexibleExpressionForTimingOfGrazing": null,
                  "FlexibleGrazePostDM": 0.0,
                  "MaximumRotationLengthArray": null,
                  "MinimumRotationLengthArray": null,
                  "NoGrazingStartString": null,
                  "NoGrazingEndString": null,
                  "FractionDefoliatedBiomassToSoil": [
                    1.0
                  ],
                  "FractionDefoliatedNToSoil": [
                    0.7
                  ],
                  "FractionExcretedNToDung": [
                    0.45
                  ],
                  "CNRatioDung": "NaN",
                  "DepthUrineIsAdded": 250.0,
                  "SendDungElsewhere": 1.0,
                  "SendUrineElsewhere": 1.0,
                  "FractionPopulationDecline": 0.0,
                  "TramplingOn": false,
                  "MaximumPropLitterMovedToSoil": 0.1,
                  "PastureConsumedAtMaximumRateOfLitterRemoval": 1200.0,
                  "SpeciesCutProportions": null,
                  "Name": "SimpleGrazing",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Models.Interfaces;",
                    "using System.Linq;",
                    "using APSIM.Shared.Utilities;",
                    "using Models.PMF;",
                    "using Models.Soils;",
                    "using Models.Soils.Nutrients;",
                    "using Models.Core;",
                    "using System;",
                    "using Models.Soils.Nutrients;",
                    "",
                    "namespace Models",
                    "{",
                    "    [Serializable]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private Clock clock;",
                    "        [Link] private Fertiliser fertiliser;",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Soil soil;",
                    "        private Nutrient nutrient;",
                    "        private Nutrient soilN;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private Nutrient Nutrient;",
                    "        [Link(Path=\"[SurfaceOrganicMatter].SurfaceResidue.Decomposition\")]",
                    "        private OrganicFlow ResidueDecomposition;",
                    "",
                    "",
                    "        [Separator(\"Fertiliser will be applied on the date(s) below\")]",
                    "        [Description(\"Apply fertiliser on the same day(s) each year? If no, then must include the year of appliaction below\")]",
                    "        public bool EachYear { get; set; }",
                    "",
                    "        [Description(\"Dates for one or more fertiliser applications (dd-mmm or dd-mmm-yyyy) as a list with a comma between dates\")]",
                    "        public string[] Dates { get; set; }",
                    "",
                    "        [Separator(\"Test for the mineral N in the soil and don't apply the fertiliser if greater than X kgN/ha is stored in the soil above a depth of Y mm\")]",
                    "        [Description(\"Use a critical soil mineral N to prevent application above a threshold?\")]",
                    "        public bool UseCritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Don't add fertiliser if N in the soil to the depth below exceeds (kg/ha)\")]",
                    "        public double CritNThreshold { get; set; }",
                    "",
                    "        [Description(\"Depth to which the amount of N in the soil should be calculated (mm)\")]",
                    "        public double CritNDepth { get; set; }",
                    "",
                    "        [Separator(\"Fertiliser application details\")]",
                    "        [Description(\"Depth at which to apply the fertiliser (mm)\")]",
                    "        public double Depth { get; set; }",
                    "",
                    "        [Description(\"Amount of fertiliser to apply (kg N /ha) per application\")]",
                    "        public double Amount { get; set; }",
                    "",
                    "        [Description(\"Fertiliser type - select from the list\")]",
                    "        [Display(Type = DisplayType.FertiliserType)]public string FertiliserType { get; set; }",
                    "",
                    "",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void FindSoilNOrNutrient(object sender, EventArgs e)",
                    "        {",
                    "            nutrient = this.FindInScope<Nutrient>() as Nutrient;",
                    "            soilN = this.FindInScope<Nutrient>() as Nutrient;",
                    "",
                    "            if (nutrient == null && soilN == null)",
                    "                throw new Exception(string.Format(\"Error in script {0}: Unable to find nutrient or soilN.\", Name));",
                    "        }",
                    "",
                    "        [EventSubscribe(\"DoManagement\")]",
                    "        private void OnDoManagement(object sender, EventArgs e)",
                    "        {",
                    "            if (OnApplicationDate())",
                    "            {",
                    "                if (NContentBelowThreshold())",
                    "                    fertiliser.Apply(Amount, FertiliserType, Depth);",
                    "                else",
                    "                    summary.WriteMessage(this, \"Skipping fertiliser application due to soil mineral N content being above critical threshold.\", MessageType.Diagnostic);",
                    "            }",
                    "        }",
                    "",
                    "        /// <summary>Checks if today's date is one of the specified fertiliser application dates.</summary>",
                    "        private bool OnApplicationDate()",
                    "        {",
                    "            if (EachYear)",
                    "                return Dates.Any(d => DateUtilities.DatesEqual(d, clock.Today));",
                    "            ",
                    "            DateTime[] dates = Dates.Select(d => DateTime.ParseExact(d, \"d-MMM-yyyy\", null)).ToArray();",
                    "            return dates.Any(d => SameDate(d, clock.Today));",
                    "        }",
                    "",
                    "        /// <summary>Checks if N content in soil is below critical threshold.</summary>",
                    "        private bool NContentBelowThreshold()",
                    "        {",
                    "            if (!UseCritNThreshold)",
                    "                return true;",
                    "            ",
                    "            double[] weights = GetLayerWeights();",
                    "            double cumSoilN = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                if (nutrient != null)",
                    "                    cumSoilN += weights[i] * nutrient.MineralN[i];",
                    "                else if (soilN != null)",
                    "                    cumSoilN += weights[i] * soilN.MineralN[i];",
                    "            }",
                    "",
                    "            return cumSoilN <= CritNThreshold;",
                    "        }",
                    "",
                    "        private double[] GetLayerWeights()",
                    "        {",
                    "            double[] weights = new double[soilPhysical.Thickness.Length];",
                    "            double cumDepth = 0;",
                    "",
                    "            for (int i = 0; i < soilPhysical.Thickness.Length; i++)",
                    "            {",
                    "                cumDepth += soilPhysical.Thickness[i];",
                    "                if (cumDepth < CritNDepth)",
                    "                    weights[i] = 1;",
                    "                else if (cumDepth - soilPhysical.Thickness[i] <= CritNDepth)",
                    "                    weights[i] = (CritNDepth - (cumDepth - soilPhysical.Thickness[i])) / soilPhysical.Thickness[i];",
                    "                else",
                    "                    weights[i] = 0;",
                    "            }",
                    "",
                    "            return weights;",
                    "        }",
                    "",
                    "        private bool SameDate(DateTime d1, DateTime d2)",
                    "        {",
                    "            return d1.Year == d2.Year && d1.DayOfYear == d2.DayOfYear;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "EachYear",
                      "Value": "True"
                    },
                    {
                      "Key": "Dates",
                      "Value": "5-jan"
                    },
                    {
                      "Key": "UseCritNThreshold",
                      "Value": "False"
                    },
                    {
                      "Key": "CritNThreshold",
                      "Value": "50"
                    },
                    {
                      "Key": "CritNDepth",
                      "Value": "75"
                    },
                    {
                      "Key": "Depth",
                      "Value": "0"
                    },
                    {
                      "Key": "Amount",
                      "Value": "50"
                    },
                    {
                      "Key": "FertiliserType",
                      "Value": "UreaN"
                    }
                  ],
                  "Name": "FertiliseFixedDates",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Manager, Models",
                  "CodeArray": [
                    "using Newtonsoft.Json;",
                    "using APSIM.Shared.Utilities;",
                    "using System.Xml.Serialization;",
                    "using Models.Soils;",
                    "using Models.PMF;",
                    "using Models.Core;",
                    "using System;",
                    "using System.Linq;",
                    "using Models.Interfaces;",
                    "",
                    "",
                    "        ",
                    "namespace Models",
                    "{",
                    "    [Serializable] ",
                    "    [System.Xml.Serialization.XmlInclude(typeof(Model))]",
                    "    public class Script : Model",
                    "    {",
                    "        [Link] private ISummary summary;",
                    "        [Link] private Irrigation Irrigation;",
                    "        [Link] private Clock Clock;",
                    "        [Link] private Soil Soil;",
                    "        [Link(IsOptional = true)] private IPlant existingCrop;",
                    "        private DateTime StartDate;",
                    "        private DateTime EndDate;",
                    "        private double TopDUL;",
                    "        private double TopLL;",
                    "        private int nLayers;",
                    "        [Link]",
                    "        private IPhysical soilPhysical;",
                    "        [Link]",
                    "        private ISoilWater waterBalance;",
                    "        //Communication to other modules",
                    "       ",
                    "        //User inputs from properties tab",
                    "        [Description(\"Turn irrigation on?\")]",
                    "        public bool allowIrrigation { get; set; }",
                    "        [Description(\"Start of irrigation season (dd-MMM)\")]",
                    "        public string seasonStart { get; set; }",
                    "        [Description(\"End of irrigation season (dd-MMM)\")]",
                    "        public string seasonEnd { get; set; }",
                    "        [Description(\"Season allocation (mm)\")]",
                    "        public double seasonsAllocation { get; set; }",
                    "        [Description(\"Deficit to trigger irrigation (% PAWC)\")]",
                    "        public double triggerDeficit { get; set; }",
                    "        [Description(\"Deficit to stop irrigaton (% PAWC)\")]",
                    "        public double targetDeficit { get; set; }",
                    "        [Description(\"Minimum days for irrigation to return\")]",
                    "        public double returndays { get; set; }",
                    "        [Description(\"Maximum irrigation application (mm/day)\")]",
                    "        public double maximumAmount { get; set; }",
                    "        [Description(\"Depth to calculate PAWC (mm)\")]",
                    "        public double depthPAWC { get; set; }",
                    "",
                    "        //Class members",
                    "        [JsonIgnore] public double TopSWdeficit { get; set; }",
                    "        [JsonIgnore] public double TopSWC { get; set; }",
                    "        [JsonIgnore] public double DaysSinceIrrigation { get; set; }",
                    "        [JsonIgnore] public double AmountToApply { get; set; }",
                    "        [JsonIgnore] public double SeasonAppliedAmount { get; set; }",
                    "        ",
                    "        private bool IrrigationIsAllowed { get; set; }",
                    "        private bool SeasonIsOpen { get; set; }",
                    "        private bool CropIsActive { get; set; }",
                    "        private bool IrrigatorIsAvailable { get; set; }",
                    "        private bool SoilIsDry { get; set; }",
                    "",
                    "    ",
                    "        //Calculate static soil variables",
                    "        [EventSubscribe(\"StartOfSimulation\")]",
                    "        private void OnStartOfSimulation(object sender, EventArgs e)",
                    "        {   ",
                    "            //Set the season dates",
                    "            StartDate = DateTime.Parse(seasonStart + \"-\" + Clock.Today.Year.ToString());",
                    "            EndDate = DateTime.Parse(seasonEnd + \"-\" + Clock.Today.Year.ToString());",
                    "            ",
                    "            //Can we irrigate at all?",
                    "            IrrigationIsAllowed = false; ",
                    "            if (allowIrrigation)",
                    "                IrrigationIsAllowed = true; ",
                    "",
                    "            //Calculate soil water variables",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            nLayers = soilPhysical.Thickness.Length;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopLL += soilPhysical.LL15mm[layer] * fracLayer;",
                    "                TopDUL += soilPhysical.DULmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "        }",
                    "             ",
                    "        //Determine daily requirement for irrigation",
                    "        [EventSubscribe(\"StartOfDay\")]",
                    "        private void OnStartOfDay(object sender, EventArgs e)",
                    "        {",
                    "            //Can we irrigate today?          ",
                    "            SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);",
                    "            if (!SeasonIsOpen)",
                    "                SeasonAppliedAmount = 0;",
                    "",
                    "            //Is there a crop in the ground that needs irrigation?",
                    "            CropIsActive = false;",
                    "            if ((existingCrop != null) && (existingCrop.IsAlive))",
                    "                CropIsActive = true;",
                    "            //if ((existingCrop.Phenology.Stage >= 3.0) && (existingCrop.Phenology.Stage < 6.0))",
                    "          ",
                    "            //Is the irrigator available?",
                    "            IrrigatorIsAvailable = false;",
                    "            DaysSinceIrrigation += 1;",
                    "            if (DaysSinceIrrigation >= returndays)",
                    "                IrrigatorIsAvailable = true;",
                    "          ",
                    "            //Is the soil dry enough to require irrigation?",
                    "            SoilIsDry = false;",
                    "            double depthFromSurface = 0.0;",
                    "            double fracLayer = 0.0;",
                    "            TopSWC = 0.0;",
                    "            for (int layer = 0; layer < nLayers; layer++)",
                    "            //for (int layer = 0; depthFromSurface < depthPAWC + soilPhysical.Thickness[layer]; layer++)",
                    "            {",
                    "                fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / soilPhysical.Thickness[layer]);",
                    "                TopSWC += waterBalance.SWmm[layer] * fracLayer;",
                    "                depthFromSurface += soilPhysical.Thickness[layer];",
                    "                if (depthFromSurface >= depthPAWC)",
                    "                    layer = nLayers;",
                    "            }",
                    "            ",
                    "            TopSWdeficit = TopSWC - TopDUL;",
                    "            if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)",
                    "                SoilIsDry = true;",
                    "                ",
                    "            //Are all the conditions ratifying irrigation",
                    "            if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)",
                    "            {",
                    "                //Lets bloody well irrigate then!!!!",
                    "                AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;",
                    "                AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));",
                    "                Irrigation.Apply(AmountToApply);",
                    "                DaysSinceIrrigation = 0;",
                    "                SeasonAppliedAmount += AmountToApply;",
                    "            }",
                    "        }",
                    "        ",
                    "        ///Checks whether theDate is between iniDate and endDate (non-year specific)",
                    "        private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)",
                    "        {",
                    "            bool result = false;",
                    "            if (iniDate.DayOfYear < endDate.DayOfYear)",
                    "            {",
                    "                // period is within one year, ex: summer in the northern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            else",
                    "            {",
                    "                // period goes over the end of the year, ex: summer in the southern hemisphere",
                    "                if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))",
                    "                    result = true;",
                    "            }",
                    "            ",
                    "            return result;",
                    "        }",
                    "    }",
                    "}"
                  ],
                  "Parameters": [
                    {
                      "Key": "allowIrrigation",
                      "Value": "True"
                    },
                    {
                      "Key": "seasonStart",
                      "Value": "1-sep"
                    },
                    {
                      "Key": "seasonEnd",
                      "Value": "30-apr"
                    },
                    {
                      "Key": "seasonsAllocation",
                      "Value": "10000"
                    },
                    {
                      "Key": "triggerDeficit",
                      "Value": "75"
                    },
                    {
                      "Key": "targetDeficit",
                      "Value": "95"
                    },
                    {
                      "Key": "returndays",
                      "Value": "3"
                    },
                    {
                      "Key": "maximumAmount",
                      "Value": "30"
                    },
                    {
                      "Key": "depthPAWC",
                      "Value": "300"
                    }
                  ],
                  "Name": "AutomaticIrrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Irrigation, Models",
                  "Name": "Irrigation",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Fertiliser, Models",
                  "Name": "Fertiliser",
                  "ResourceName": "Fertiliser",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Surface.SurfaceOrganicMatter, Models",
                  "SurfOM": [],
                  "Canopies": [],
                  "InitialResidueName": "Sward",
                  "InitialResidueType": "grass",
                  "InitialResidueMass": 1000.0,
                  "InitialStandingFraction": 0.0,
                  "InitialCPR": 0.0,
                  "InitialCNR": 15.0,
                  "Name": "SurfaceOrganicMatter",
                  "ResourceName": "SurfaceOrganicMatter",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 1500.0,
                  "InitialRootDM": 450.0,
                  "InitialRootDepth": 750.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPRyegrass",
                  "ResourceName": "AGPRyegrass",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.AgPasture.PastureSpecies, Models",
                  "doyGermination": 275,
                  "daysEmergenceToAnthesis": 120,
                  "daysAnthesisToMaturity": 85,
                  "degreesDayForAnthesis": 1100.0,
                  "degreesDayForMaturity": 900.0,
                  "daysAnnualsFactor": 45,
                  "FVPDFunction": {
                    "$type": "Models.Functions.LinearInterpolationFunction, Models",
                    "Name": "LinearInterpolationFunction",
                    "ResourceName": null,
                    "Children": [],
                    "Enabled": true,
                    "ReadOnly": false
                  },
                  "CanopyType": "PastureSpecies",
                  "LightProfile": null,
                  "InitialShootDM": 500.0,
                  "InitialRootDM": 150.0,
                  "InitialRootDepth": 350.0,
                  "initialDMFractionsGrasses": [
                    0.15,
                    0.25,
                    0.25,
                    0.05,
                    0.05,
                    0.1,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "initialDMFractionsLegumes": [
                    0.16,
                    0.23,
                    0.22,
                    0.05,
                    0.03,
                    0.05,
                    0.05,
                    0.01,
                    0.04,
                    0.08,
                    0.08
                  ],
                  "initialDMFractionsForbs": [
                    0.2,
                    0.2,
                    0.15,
                    0.05,
                    0.1,
                    0.15,
                    0.1,
                    0.05,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "PhotosyntheticEfficiency": 0.01,
                  "PhotosynthesisCurveFactor": 0.8,
                  "FractionPAR": 0.5,
                  "ReferenceCO2": 380.0,
                  "CO2EffectScaleFactor": 700.0,
                  "CO2EffectOffsetFactor": 600.0,
                  "CO2EffectMinimum": 0.7,
                  "CO2EffectExponent": 2.0,
                  "ReproSeasonDurationCoeff": 2.0,
                  "ReproSeasonShouldersLengthFactor": 1.0,
                  "ReproSeasonOnsetDurationFactor": 0.6,
                  "RelativeTurnoverEmerging": 2.0,
                  "DetachmentDroughtCoefficient": 3.0,
                  "DetachmentDroughtEffectMin": 0.1,
                  "TurnoverStockFactor": 0.01,
                  "TurnoverDefoliationEffectMin": 0.025,
                  "MinimumGreenLeafProp": 0.8,
                  "MinimumGreenRootProp": 0.5,
                  "Name": "AGPWhiteClover",
                  "ResourceName": "AGPWhiteClover",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Soil, Models",
                  "RecordNumber": 1241,
                  "ASCOrder": "Pumice",
                  "ASCSubOrder": null,
                  "SoilType": "Sandy loam",
                  "LocalName": "Oropi (Sandy loam (Te Puke No1329))",
                  "Site": "No.2 Rd",
                  "NearestTown": "Te Puke",
                  "Region": "BayOfPlenty",
                  "State": null,
                  "Country": "New Zealand",
                  "NaturalVegetation": "long term grass",
                  "ApsoilNumber": "1329",
                  "Latitude": -37.863,
                  "Longitude": 176.291,
                  "LocationAccuracy": "+/-50 m",
                  "YearOfSampling": "1982",
                  "DataSource": "The database of New Zealand soils was compiled by AgResearch (www.agresearch.co.nz) and based on soil properties gathered, mainly from publications, in the course of conducting several simulation-based research projects but particularly from the Pastoral 21 Environment program which was funded by the New Zealand Ministry for Business, Innovation and Employment,  Dairy NZ, Fonterra and Meat & Wool NZ.",
                  "Comments": "The data is a combination of published or supplied measurements, pedotransfer functions, and expert opinion. See Cichota et al. (2013; Soil Research 51: 92-111, http://dx.doi.org/10.1071/SR12338) for a description of the pedotransfer functions. The soil carbon and fresh organic matter settings have been set as those broadly appropriate for permanent productive pastoral systems, see Cichota el al. (2012; Soil Research 50: 694-707, http://dx.doi.org/10.1071/SR12208). Users should take care to adapt these to local conditions before using the data in simulations. FOM values estimated to be 900 kg/ha of FOM in top 600mm of soil and another 100 kg/ha below.",
                  "Name": "Soil",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.Physical, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0
                      ],
                      "ParticleSizeSand": [
                        59.63,
                        63.7,
                        50.12,
                        61.19
                      ],
                      "ParticleSizeSilt": [
                        34.37,
                        31.68,
                        38.56,
                        25.3
                      ],
                      "ParticleSizeClay": [
                        6.0,
                        4.62,
                        11.32,
                        13.51
                      ],
                      "Rocks": [
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "Texture": null,
                      "BD": [
                        0.91,
                        0.93,
                        0.81,
                        0.82
                      ],
                      "AirDry": [
                        0.054,
                        0.043,
                        0.072,
                        0.073
                      ],
                      "LL15": [
                        0.165,
                        0.13,
                        0.219,
                        0.221
                      ],
                      "DUL": [
                        0.403,
                        0.321,
                        0.409,
                        0.388
                      ],
                      "SAT": [
                        0.56,
                        0.566,
                        0.606,
                        0.615
                      ],
                      "KS": [
                        20963.266,
                        16928.41,
                        10150.978,
                        9243.651
                      ],
                      "BDMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "AirDryMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "LL15Metadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "DULMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "SATMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "KSMetadata": null,
                      "RocksMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "TextureMetadata": null,
                      "ParticleSizeSandMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "ParticleSizeSiltMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "ParticleSizeClayMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "Name": "Physical",
                      "ResourceName": null,
                      "Children": [
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.165,
                            0.13,
                            0.219,
                            0.221
                          ],
                          "KL": [
                            0.06,
                            0.06,
                            0.057,
                            0.04
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPRyegrassSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        },
                        {
                          "$type": "Models.Soils.SoilCrop, Models",
                          "LL": [
                            0.165,
                            0.13,
                            0.219,
                            0.221
                          ],
                          "KL": [
                            0.06,
                            0.06,
                            0.057,
                            0.04
                          ],
                          "XF": [
                            1.0,
                            1.0,
                            1.0,
                            1.0
                          ],
                          "LLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "KLMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "XFMetadata": [
                            null,
                            null,
                            null,
                            null
                          ],
                          "Name": "AGPWhiteCloverSoil",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Organic, Models",
                      "FOMCNRatio": 40.0,
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "Carbon": [
                        5.4,
                        2.5,
                        2.6,
                        0.9,
                        0.8
                      ],
                      "CarbonUnits": 0,
                      "SoilCNRatio": [
                        12.273,
                        12.273,
                        12.273,
                        12.273,
                        12.273
                      ],
                      "FBiom": [
                        0.075,
                        0.017,
                        0.008,
                        0.008,
                        0.008
                      ],
                      "FInert": [
                        0.638,
                        0.801,
                        0.924,
                        0.97,
                        0.994
                      ],
                      "FOM": [
                        123.78494877889968,
                        91.70214550156204,
                        50.32720450604473,
                        24.991750138606616,
                        9.193951074886918
                      ],
                      "CarbonMetadata": null,
                      "FOMMetadata": null,
                      "Name": "Organic",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Chemical, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "PH": [
                        6.5,
                        6.5,
                        6.5,
                        6.5,
                        6.5
                      ],
                      "PHUnits": 0,
                      "EC": null,
                      "ESP": null,
                      "CEC": [
                        15.7,
                        9.4,
                        10.4,
                        8.1,
                        10.1
                      ],
                      "ECMetadata": null,
                      "CLMetadata": null,
                      "CECMetadata": null,
                      "ESPMetadata": null,
                      "PHMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "Name": "Chemical",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Nutrients.Nutrient, Models",
                      "Name": "Nutrient",
                      "ResourceName": "Nutrient",
                      "Children": [
                        {
                          "$type": "Models.Soils.Nutrients.NH3Volatilisation, Models",
                          "DepthEmissable1": 30.0,
                          "DepthEmissable2": 100.0,
                          "k_BC": 0.03,
                          "k_pH_hyd": 1.0,
                          "k_pH_nit": 1.0,
                          "k_pH_x": 0.2,
                          "k_AFPV": 300.0,
                          "f_AV": 0.5,
                          "CritRain1": 3.0,
                          "CritRain2": 10.0,
                          "pH": null,
                          "EmissabilityNH3": null,
                          "NH3ppm": null,
                          "NH3": null,
                          "NH3Gas": null,
                          "EmissionNH3": null,
                          "NH4Sol": null,
                          "PotGasExchangeNH": 0.0,
                          "GasExchangeNH": null,
                          "AirFilledPoreVolume": null,
                          "NH3toNHxRatio": null,
                          "NH3GtoNH3ARatio": null,
                          "pK_NHx": null,
                          "pG_NH3": null,
                          "RainFactor": 0.0,
                          "Name": "NH3Volatilisation",
                          "ResourceName": null,
                          "Children": [],
                          "Enabled": true,
                          "ReadOnly": false
                        }
                      ],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Swim3, Models",
                      "Salb": 0.13,
                      "CN2Bare": 0.0,
                      "CNRed": 0.0,
                      "CNCov": 0.8,
                      "KDul": 1.0,
                      "PSIDul": -100.0,
                      "VC": true,
                      "DTMin": 0.0,
                      "DTMax": 1400.0,
                      "MaxWaterIncrement": 10.0,
                      "SpaceWeightingFactor": 0.0,
                      "SoluteSpaceWeightingFactor": 1.0,
                      "Dis": 0.0,
                      "Disp": 1.0,
                      "A": 2.0,
                      "DTHC": 0.1,
                      "DTHP": 2.0,
                      "vcon1": 7.28E-09,
                      "vcon2": 7.26E-07,
                      "eo_time": "06:00",
                      "eo_durn": 720.0,
                      "default_rain_time": "00:00",
                      "default_rain_duration": 720.0,
                      "Diagnostics": false,
                      "Name": "Swim3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Water, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.403,
                        0.321,
                        0.409,
                        0.388,
                        0.489
                      ],
                      "InitialPAWmm": 727.7,
                      "RelativeTo": "LL15",
                      "FilledFromTop": false,
                      "Name": "Water",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        6.0,
                        2.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NO3",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 0,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "NH4",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.Solute, Models",
                      "Thickness": [
                        200.0,
                        150.0,
                        300.0,
                        350.0,
                        2000.0
                      ],
                      "InitialValues": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "InitialValuesUnits": 1,
                      "WaterTableConcentration": 0.0,
                      "D0": 0.0,
                      "Exco": [
                        0.0,
                        0.0,
                        0.0,
                        0.0,
                        0.0
                      ],
                      "FIP": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "DepthConstant": 0.0,
                      "MaxDepthSoluteAccessible": 0.0,
                      "RunoffEffectivenessAtMovingSolute": 0.0,
                      "MaxEffectiveRunoff": 0.0,
                      "ConcInSolution": null,
                      "Name": "Urea",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.LayerStructure, Models",
                      "Thickness": [
                        5.0,
                        5.0,
                        10.0,
                        10.0,
                        20.0,
                        50.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0,
                        100.0
                      ],
                      "Name": "LayerStructure",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                      "Thickness": null,
                      "InitialValues": null,
                      "Name": "Temperature",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Report, Models",
                  "VariableNames": [
                    "[Clock].Today as Date",
                    "sum([Nutrient].NH3Volatilisation.EmissionNH3) as Volat",
                    "sum([Nutrient].Urea.kgha[1:2]) as Urea30mm"
                  ],
                  "EventNames": [
                    "[Clock].EndOfDay"
                  ],
                  "GroupByVariableName": null,
                  "Name": "Report",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Folder, Models",
          "ShowInDocs": false,
          "GraphsPerPage": 6,
          "Name": "Folder",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "VolatilisationWarm",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -16777216,
                  "FactorToVaryColours": "SimulationName",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": "[SimulationName] LIKE '%Hamilton%'",
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "Volat",
                  "Position": 2,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "VolatilisationCumWarm",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 2,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Season",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": true,
                  "CumulativeX": false,
                  "Filter": "[SimulationName] LIKE '%Hamilton%'",
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 0,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "VolatilisationCool",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 0,
                  "ColourArgb": -16777216,
                  "FactorToVaryColours": "SimulationName",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": false,
                  "CumulativeX": false,
                  "Filter": "[SimulationName] LIKE '%Lincoln%'",
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Graph, Models",
              "Caption": null,
              "Axis": [
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": null,
                  "Position": 3,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                },
                {
                  "$type": "APSIM.Shared.Graphing.Axis, APSIM.Shared",
                  "Title": "Volat",
                  "Position": 2,
                  "Inverted": false,
                  "CrossesAtZero": false,
                  "LabelOnOneLine": false,
                  "Minimum": null,
                  "Maximum": null,
                  "Interval": null
                }
              ],
              "LegendPosition": 0,
              "LegendOrientation": 0,
              "AnnotationLocation": 0,
              "DisabledSeries": [],
              "LegendOutsideGraph": false,
              "Name": "VolatilisationCumCool",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Series, Models",
                  "Type": 1,
                  "XAxis": 3,
                  "YAxis": 2,
                  "ColourArgb": 0,
                  "FactorToVaryColours": "Season",
                  "FactorToVaryMarkers": null,
                  "FactorToVaryLines": null,
                  "Marker": 11,
                  "MarkerSize": 0,
                  "Line": 0,
                  "LineThickness": 0,
                  "TableName": "Report",
                  "XFieldName": "Date",
                  "YFieldName": "Volat",
                  "X2FieldName": null,
                  "Y2FieldName": null,
                  "ShowInLegend": true,
                  "IncludeSeriesNameInLegend": false,
                  "Cumulative": true,
                  "CumulativeX": false,
                  "Filter": "[SimulationName] LIKE '%Lincoln%'",
                  "Name": "Volat",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Core.Simulation, Models",
      "Descriptors": null,
      "Name": "FundamentalTesting",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Clock, Models",
          "Start": "2000-01-01T00:00:00",
          "End": "2000-12-31T00:00:00",
          "Name": "Clock",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Climate.Weather, Models",
          "ConstantsFile": null,
          "FileName": "C:\\aaUnderVC\\ApsimX\\Tests\\Validation\\SoilTemperature\\AnalyticalWeather.xlsx",
          "ExcelWorkSheetName": "Warm",
          "Latitude": 0.0,
          "Tav": 20.174378437570745,
          "Amp": 19.360864940876226,
          "Name": "Weather",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.MicroClimate, Models",
          "a_interception": 0.0,
          "b_interception": 0.0,
          "c_interception": 0.0,
          "d_interception": 0.0,
          "SoilHeatFluxFraction": 0.0,
          "MinimumHeightDiffForNewLayer": 0.0,
          "NightInterceptionFraction": 0.0,
          "ReferenceHeight": 2.0,
          "Name": "MicroClimate",
          "ResourceName": "MicroClimate",
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Summary, Models",
          "Verbosity": 100,
          "Name": "Summary",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Zone, Models",
          "Area": 1.0,
          "Slope": 0.0,
          "AspectAngle": 0.0,
          "Altitude": 50.0,
          "Name": "FieldThin",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.PMF;",
                "using Models.Core;",
                "using System;",
                "using Models.Interfaces;",
                "using Models.Soils;",
                "using APSIM.Shared.Utilities;",
                "using Newtonsoft.Json;",
                "",
                "namespace Models",
                "{",
                "    [Serializable] ",
                "    public class Script : Model, ISoilWater",
                "    {",
                "        [Link]",
                "        private Physical physical;",
                "        [Link]",
                "        private IPhysical soilPhysical;",
                "        [Link]",
                "        private Water water;",
                "",
                "        ///<summary>Gets or sets soil thickness for each layer (mm)(</summary>",
                "        public double[] Thickness { get { return soilPhysical.Thickness; } }",
                "",
                "        ///<summary>Gets or sets soil thickness for each layer (mm)(</summary>",
                "        public double[] LayerThickness { get { return soilPhysical.Thickness; } }",
                "",
                "        ///<summary>Gets or sets volumetric soil water content (mm/mm)(</summary>",
                "        //[Description(\"Soil water content (mm/mm), comma separated values\")]",
                "        public double[] SW { get {return water.Volumetric;} set {water.Volumetric = value;} }",
                "",
                "        ///<summary>Gets soil water content (mm)</summary>",
                "        public double[] SWmm { get { return MathUtilities.Multiply(SW, Thickness); } }",
                "",
                "        ///<summary>Gets extractable soil water relative to LL15(mm)</summary>",
                "        public double[] ESW { get { throw new NotImplementedException(); } }",
                "",
                "        ///<summary>Gets extractable soil water relative to LL15(mm)</summary>",
                "        public double[] PSI { get { throw new NotImplementedException(); } }",
                "",
                "        ///<summary>Gets K</summary>",
                "        public double[] K { get { throw new NotImplementedException(); } }",
                "        ",
                "        ///<summary>Gets PoreInteractionIndex</summary>",
                "        [JsonIgnore]",
                "        public double[] PoreInteractionIndex { get { throw new NotImplementedException(); } set { throw new NotImplementedException(); }}",
                "                ",
                "        ///<summary>Gets potential evaporation from soil surface (mm)</summary>",
                "        [Description(\"Eos (mm)\")]",
                "        public double Eos { get; set; }",
                "",
                "        /// <summary>Gets the actual (realised) soil water evaporation (mm)</summary>",
                "        [Description(\"Es (mm)\")]",
                "        public double Es { get; set; }",
                "",
                "        /// <summary>Gets potential evapotranspiration of the whole soil-plant system (mm)</summary>",
                "        [Description(\"Eo (mm)\")]",
                "        public double Eo { get; set; }",
                "",
                "        /// <summary>Gets the amount of water runoff (mm)</summary>",
                "        public double Runoff { get { return 0; } }",
                "        ",
                "        /// <summary>Gets the amount of water drainage from bottom of profile(mm)</summary>",
                "        public double Drainage { get { return 0; } }",
                "",
                "        /// <summary>Fraction of incoming radiation reflected from bare soil</summary>",
                "        [Description(\"Salb\")]",
                "        public double Salb { get; set; }",
                "",
                "        /// <summary>Amount of water moving laterally out of the profile (mm)</summary>",
                "        public double[] LateralOutflow { get { throw new NotImplementedException(); } }",
                "",
                "        /// <summary>Amount of N leaching as NO3-N from the deepest soil layer (kg /ha)</summary>",
                "        public double LeachNO3 { get { return 0; } }",
                "",
                "        /// <summary>Amount of N leaching as NH4-N from the deepest soil layer (kg /ha)</summary>",
                "        public double LeachNH4 { get { return 0; } }",
                "        ",
                "        /// <summary>Amount of N leaching as urea-N  from the deepest soil layer (kg /ha)</summary>",
                "        public double LeachUrea { get { return 0; } }",
                "",
                "        /// <summary>Amount of Cl leaching  from the deepest soil layer (kg /ha)</summary>",
                "        public double LeachCl { get { return 0; } }",
                "        ",
                "        /// <summary>Amount of N leaching as NO3 from each soil layer (kg /ha)</summary>",
                "        public double[] FlowNO3 { get { throw new NotImplementedException(); } }",
                "",
                "        /// <summary>Amount of N leaching as NH4 from each soil layer (kg /ha)</summary>",
                "        public double[] FlowNH4 { get { throw new NotImplementedException(); } }",
                "",
                "        /// <summary>Amount of N leaching as urea from each soil layer (kg /ha)</summary>",
                "        public double[] FlowUrea { get { throw new NotImplementedException(); } }",
                "",
                "        /// <summary>Amount of N leaching as urea from each soil layer (kg /ha)</summary>",
                "        public double[] FlowCl { get { throw new NotImplementedException(); } }",
                "",
                "        /// <summary>Amount of water moving upward from each soil layer during unsaturated flow (negative value means downward movement) (mm)</summary>",
                "        public double[] Flow  { get { throw new NotImplementedException(); } }",
                "",
                "        /// <summary>Amount of water moving downward out of each soil layer due to gravity drainage (above DUL) (mm)</summary>",
                "        public double[] Flux { get { throw new NotImplementedException(); } }",
                "",
                "        /// <summary> This is set by Microclimate and is rainfall less that intercepted by the canopy and residue components </summary>",
                "        public double PotentialInfiltration { get; set; }",
                "        ",
                "        /// <summary> The amount of rainfall intercepted by crop and residue canopies </summary>",
                "        public double PrecipitationInterception { get; set; }",
                "",
                "        /// <summary>Water table depth (mm)</summary>",
                "        public double WaterTable { get; set; }",
                "        ",
                "        /// <summary>Pond depth (mm)</summary>",
                "        public double Pond { get; set; }",
                "",
                "        /// <summary>Pond depth (mm)</summary>",
                "        public double SubsurfaceDrain { get; set; }",
                "",
                "        /// <summary>Sets the water table.</summary>",
                "        /// <param name=\"InitialDepth\">The initial depth.</param> ",
                "        public void SetWaterTable(double InitialDepth)",
                "        {",
                "            throw new NotImplementedException();",
                "        }",
                "",
                "        /// <summary>The efficiency (0-1) that solutes move down with water.</summary>",
                "        public double[] SoluteFluxEfficiency { get; set; }",
                "",
                "        /// <summary>The efficiency (0-1) that solutes move up with water.</summary>",
                "        public double[] SoluteFlowEfficiency { get; set; }",
                "",
                "        ///<summary>Perform a reset</summary>",
                "        public void Reset()",
                "        {",
                "            throw new NotImplementedException();",
                "        }",
                "",
                "        ///<summary>Perform tillage</summary>",
                "        public void Tillage(TillageType Data)",
                "        {",
                "            throw new NotImplementedException();",
                "        }",
                "",
                "        ///<summary>Perform tillage</summary>",
                "        public void Tillage(string tillageType)",
                "        {",
                "            throw new NotImplementedException();",
                "        }",
                "",
                "        ///<summary>Remove water from the profile</summary>",
                "        public void RemoveWater(double[] amountToRemove)",
                "        {",
                "            throw new NotImplementedException();",
                "        }",
                "        public void Standardise(double[] targetThickness)",
                "        {",
                "        ",
                "        ",
                "        }",
                "        ",
                "        /// <summary>Plant available water SW-LL15 (mm/mm).</summary>",
                "        [Units(\"mm/mm\")]",
                "        public double[] PAW",
                "        {",
                "            get",
                "            {",
                "                return SoilUtilities.CalcPAWC(soilPhysical.Thickness,",
                "                                              soilPhysical.LL15,",
                "                                              SW,",
                "                                              null);",
                "            }",
                "        }",
                "",
                "        /// <summary>Plant available water SW-LL15 (mm).</summary>",
                "        [Units(\"mm\")]",
                "        public double[] PAWmm",
                "        {",
                "            get",
                "            {",
                "                return MathUtilities.Multiply(PAW, soilPhysical.Thickness);",
                "            }",
                "        }",
                "",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Eos",
                  "Value": "0"
                },
                {
                  "Key": "Es",
                  "Value": "0"
                },
                {
                  "Key": "Eo",
                  "Value": "0"
                },
                {
                  "Key": "Salb",
                  "Value": "0"
                }
              ],
              "Name": "DummyWaterBalance",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Surface.SurfaceOrganicMatter, Models",
              "SurfOM": [],
              "Canopies": [],
              "InitialResidueName": "Sward",
              "InitialResidueType": "grass",
              "InitialResidueMass": 1000.0,
              "InitialStandingFraction": 0.0,
              "InitialCPR": 0.0,
              "InitialCNR": 15.0,
              "Name": "SurfaceOrganicMatter",
              "ResourceName": "SurfaceOrganicMatter",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Irrigation, Models",
              "Name": "Irrigation",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Fertiliser, Models",
              "Name": "Fertiliser",
              "ResourceName": "Fertiliser",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Soils.Soil, Models",
              "RecordNumber": 1241,
              "ASCOrder": "Pumice",
              "ASCSubOrder": null,
              "SoilType": "Sandy loam",
              "LocalName": "Oropi (Sandy loam (Te Puke No1329))",
              "Site": "No.2 Rd",
              "NearestTown": "Te Puke",
              "Region": "BayOfPlenty",
              "State": null,
              "Country": "New Zealand",
              "NaturalVegetation": "long term grass",
              "ApsoilNumber": "1329",
              "Latitude": -37.863,
              "Longitude": 176.291,
              "LocationAccuracy": "+/-50 m",
              "YearOfSampling": "1982",
              "DataSource": "The database of New Zealand soils was compiled by AgResearch (www.agresearch.co.nz) and based on soil properties gathered, mainly from publications, in the course of conducting several simulation-based research projects but particularly from the Pastoral 21 Environment program which was funded by the New Zealand Ministry for Business, Innovation and Employment,  Dairy NZ, Fonterra and Meat & Wool NZ.",
              "Comments": "The data is a combination of published or supplied measurements, pedotransfer functions, and expert opinion. See Cichota et al. (2013; Soil Research 51: 92-111, http://dx.doi.org/10.1071/SR12338) for a description of the pedotransfer functions. The soil carbon and fresh organic matter settings have been set as those broadly appropriate for permanent productive pastoral systems, see Cichota el al. (2012; Soil Research 50: 694-707, http://dx.doi.org/10.1071/SR12208). Users should take care to adapt these to local conditions before using the data in simulations. FOM values estimated to be 900 kg/ha of FOM in top 600mm of soil and another 100 kg/ha below.",
              "Name": "Soil",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Soils.Physical, Models",
                  "Thickness": [
                    200.0,
                    150.0,
                    300.0,
                    350.0
                  ],
                  "ParticleSizeSand": [
                    59.63,
                    63.7,
                    50.12,
                    61.19
                  ],
                  "ParticleSizeSilt": [
                    34.37,
                    31.68,
                    38.56,
                    25.3
                  ],
                  "ParticleSizeClay": [
                    6.0,
                    4.62,
                    11.32,
                    13.51
                  ],
                  "Rocks": [
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "Texture": null,
                  "BD": [
                    0.91,
                    0.93,
                    0.81,
                    0.82
                  ],
                  "AirDry": [
                    0.054,
                    0.043,
                    0.072,
                    0.073
                  ],
                  "LL15": [
                    0.165,
                    0.13,
                    0.219,
                    0.221
                  ],
                  "DUL": [
                    0.403,
                    0.321,
                    0.409,
                    0.388
                  ],
                  "SAT": [
                    0.56,
                    0.566,
                    0.606,
                    0.615
                  ],
                  "KS": [
                    20963.266,
                    16928.41,
                    10150.978,
                    9243.651
                  ],
                  "BDMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "AirDryMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "LL15Metadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "DULMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "SATMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "KSMetadata": null,
                  "RocksMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "TextureMetadata": null,
                  "ParticleSizeSandMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "ParticleSizeSiltMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "ParticleSizeClayMetadata": [
                    null,
                    null,
                    null,
                    null
                  ],
                  "Name": "Physical",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.165,
                        0.13,
                        0.219,
                        0.221
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.057,
                        0.04
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "KLMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "XFMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "Name": "AGPRyegrassSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.165,
                        0.13,
                        0.219,
                        0.221
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.057,
                        0.04
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "KLMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "XFMetadata": [
                        null,
                        null,
                        null,
                        null
                      ],
                      "Name": "AGPWhiteCloverSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Organic, Models",
                  "FOMCNRatio": 40.0,
                  "Thickness": [
                    200.0,
                    150.0,
                    300.0,
                    350.0,
                    2000.0
                  ],
                  "Carbon": [
                    5.4,
                    2.5,
                    2.6,
                    0.9,
                    0.8
                  ],
                  "CarbonUnits": 0,
                  "SoilCNRatio": [
                    12.273,
                    12.273,
                    12.273,
                    12.273,
                    12.273
                  ],
                  "FBiom": [
                    0.075,
                    0.017,
                    0.008,
                    0.008,
                    0.008
                  ],
                  "FInert": [
                    0.638,
                    0.801,
                    0.924,
                    0.97,
                    0.994
                  ],
                  "FOM": [
                    123.78494877889968,
                    91.70214550156204,
                    50.32720450604473,
                    24.991750138606616,
                    9.193951074886918
                  ],
                  "CarbonMetadata": null,
                  "FOMMetadata": null,
                  "Name": "Organic",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Chemical, Models",
                  "Thickness": [
                    200.0,
                    150.0,
                    300.0,
                    350.0,
                    2000.0
                  ],
                  "PH": [
                    6.5,
                    6.5,
                    6.5,
                    6.5,
                    6.5
                  ],
                  "PHUnits": 0,
                  "EC": null,
                  "ESP": null,
                  "CEC": [
                    15.7,
                    9.4,
                    10.4,
                    8.1,
                    10.1
                  ],
                  "ECMetadata": null,
                  "CLMetadata": null,
                  "CECMetadata": null,
                  "ESPMetadata": null,
                  "PHMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "Name": "Chemical",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Nutrients.Nutrient, Models",
                  "Name": "Nutrient",
                  "ResourceName": "Nutrient",
                  "Children": [
                    {
                      "$type": "Models.Soils.Nutrients.NH3Volatilisation, Models",
                      "DepthEmissable1": 30.0,
                      "DepthEmissable2": 100.0,
                      "k_BC": 0.03,
                      "k_pH_hyd": 1.0,
                      "k_pH_nit": 1.0,
                      "k_pH_x": 0.2,
                      "k_AFPV": 300.0,
                      "f_AV": 0.5,
                      "CritRain1": 3.0,
                      "CritRain2": 10.0,
                      "pH": null,
                      "EmissabilityNH3": null,
                      "NH3ppm": null,
                      "NH3": null,
                      "NH3Gas": null,
                      "EmissionNH3": null,
                      "NH4Sol": null,
                      "PotGasExchangeNH": 0.0,
                      "GasExchangeNH": null,
                      "AirFilledPoreVolume": null,
                      "NH3toNHxRatio": null,
                      "NH3GtoNH3ARatio": null,
                      "pK_NHx": null,
                      "pG_NH3": null,
                      "RainFactor": 0.0,
                      "Name": "NH3Volatilisation",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Swim3, Models",
                  "Salb": 0.13,
                  "CN2Bare": 0.0,
                  "CNRed": 0.0,
                  "CNCov": 0.8,
                  "KDul": 1.0,
                  "PSIDul": -100.0,
                  "VC": true,
                  "DTMin": 0.0,
                  "DTMax": 1400.0,
                  "MaxWaterIncrement": 10.0,
                  "SpaceWeightingFactor": 0.0,
                  "SoluteSpaceWeightingFactor": 1.0,
                  "Dis": 0.0,
                  "Disp": 1.0,
                  "A": 2.0,
                  "DTHC": 0.1,
                  "DTHP": 2.0,
                  "vcon1": 7.28E-09,
                  "vcon2": 7.26E-07,
                  "eo_time": "06:00",
                  "eo_durn": 720.0,
                  "default_rain_time": "00:00",
                  "default_rain_duration": 720.0,
                  "Diagnostics": false,
                  "Name": "Swim3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": false,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Water, Models",
                  "Thickness": [
                    3000.0
                  ],
                  "InitialValues": [
                    0.56
                  ],
                  "InitialPAWmm": 1042.4500000000003,
                  "RelativeTo": "LL15",
                  "FilledFromTop": false,
                  "Name": "Water",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    200.0,
                    150.0,
                    300.0,
                    350.0,
                    2000.0
                  ],
                  "InitialValues": [
                    6.0,
                    2.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "FIP": [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "NO3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    200.0,
                    150.0,
                    300.0,
                    350.0,
                    2000.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "FIP": [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "NH4",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    200.0,
                    150.0,
                    300.0,
                    350.0,
                    2000.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 1,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "FIP": [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "ConcInSolution": null,
                  "Name": "Urea",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.LayerStructure, Models",
                  "Thickness": [
                    5.0,
                    5.0,
                    10.0,
                    10.0,
                    20.0,
                    50.0,
                    100.0,
                    100.0,
                    100.0,
                    100.0,
                    100.0,
                    100.0,
                    100.0,
                    100.0,
                    100.0
                  ],
                  "Name": "LayerStructure",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.SoilTemp.SoilTemperature, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "Name": "SoilTemperature",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Report, Models",
              "VariableNames": [
                "[Clock].Today as Date",
                "[Soil].SoilTemperature.AverageSoilTemperature[1] as AverageSoilTemp@0001mm",
                "[Soil].SoilTemperature.AverageSoilTemperature[3] as AverageSoilTemp@0008mm",
                "[Soil].SoilTemperature.AverageSoilTemperature[4] as AverageSoilTemp@0015mm",
                "[Soil].SoilTemperature.AverageSoilTemperature[8] as AverageSoilTemp@0150mm",
                "[Soil].SoilTemperature.AverageSoilTemperature[11] as AverageSoilTemp@1000mm",
                "[Soil].SoilTemperature.MaximumSoilTemperature[1] as MaxSoilTemp@0001mm",
                "[Soil].SoilTemperature.MaximumSoilTemperature[3] as MaxSoilTemp@0008mm",
                "[Soil].SoilTemperature.MaximumSoilTemperature[4] as MaxSoilTemp@0015mm",
                "[Soil].SoilTemperature.MaximumSoilTemperature[8] as MaxSoilTemp@0150mm",
                "[Soil].SoilTemperature.MaximumSoilTemperature[11] as MaxSoilTemp@1000mm"
              ],
              "EventNames": [
                "[Clock].DoReport"
              ],
              "GroupByVariableName": null,
              "Name": "ReportLayering",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    }
  ],
  "Enabled": true,
  "ReadOnly": false
}