{
  "$type": "Models.Core.Simulations, Models",
  "Version": 171,
  "Name": "Simulations",
  "ResourceName": null,
  "Children": [
    {
      "$type": "Models.Storage.DataStore, Models",
      "useFirebird": false,
      "CustomFileName": null,
      "Name": "DataStore",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Core.Simulation, Models",
      "Descriptors": null,
      "Name": "Farm",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Clock, Models",
          "Start": "1990-01-01T00:00:00",
          "End": "1995-04-30T00:00:00",
          "Name": "Clock",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Summary, Models",
          "Verbosity": 100,
          "Name": "SummaryFile",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Climate.Weather, Models",
          "ConstantsFile": null,
          "FileName": "%root%/Examples/WeatherFiles/Dalby.met",
          "ExcelWorkSheetName": "",
          "Name": "Weather",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
          "Name": "Soil Arbitrator",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Zone, Models",
          "Area": 1.0,
          "Slope": 0.0,
          "AspectAngle": 0.0,
          "Altitude": 50.0,
          "Name": "Field 1",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Soils.Soil, Models",
              "RecordNumber": 30,
              "ASCOrder": "Vertosol",
              "ASCSubOrder": "Black",
              "SoilType": "Clay",
              "LocalName": null,
              "Site": "Dalby",
              "NearestTown": "Dalby, Q 4405",
              "Region": "Darling Downs and Granite Belt",
              "State": "Queensland",
              "Country": "Australia",
              "NaturalVegetation": null,
              "ApsoilNumber": "27",
              "Latitude": -27.1229551,
              "Longitude": 151.3054008,
              "LocationAccuracy": " +/- 20m",
              "YearOfSampling": "0",
              "DataSource": "CSIRO Sustainable Ecosystems, Toowoomba",
              "Comments": "Clay - Toowoomba - Wheat ll,xf copied from sorghum. Wheat kl is just default apsim kl values for wheat. ",
              "Name": "Black Vertosol-Bongeen (Dalby No027)",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Soils.Physical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "ParticleSizeClay": null,
                  "ParticleSizeSand": null,
                  "ParticleSizeSilt": null,
                  "Rocks": null,
                  "Texture": null,
                  "BD": [
                    1.25,
                    1.31,
                    1.23,
                    1.24,
                    1.25,
                    1.26,
                    1.29
                  ],
                  "AirDry": [
                    0.115,
                    0.184,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "LL15": [
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "DUL": [
                    0.45,
                    0.43,
                    0.46,
                    0.45,
                    0.45,
                    0.44,
                    0.43
                  ],
                  "SAT": [
                    0.5,
                    0.48,
                    0.51,
                    0.5,
                    0.5,
                    0.49,
                    0.48
                  ],
                  "KS": null,
                  "BDMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "AirDryMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "LL15Metadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "DULMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "SATMetadata": [
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD"
                  ],
                  "KSMetadata": null,
                  "RocksMetadata": null,
                  "TextureMetadata": null,
                  "ParticleSizeSandMetadata": null,
                  "ParticleSizeSiltMetadata": null,
                  "ParticleSizeClayMetadata": null,
                  "Name": "Physical",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "wheatSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.23,
                        0.23,
                        0.26,
                        0.3,
                        0.33,
                        0.37
                      ],
                      "KL": [
                        0.1,
                        0.1,
                        0.1,
                        0.1,
                        0.09,
                        0.07,
                        0.05
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "cottonSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "sorghumSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "SCRUMSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "MaizeSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.WaterModel.WaterBalance, Models",
                  "SummerDate": "1-Nov",
                  "SummerU": 6.0,
                  "SummerCona": 3.5,
                  "WinterDate": "1-Apr",
                  "WinterU": 4.0,
                  "WinterCona": 2.5,
                  "DiffusConst": 40.0,
                  "DiffusSlope": 16.0,
                  "Salb": 0.12,
                  "CN2Bare": 73.0,
                  "CNRed": 20.0,
                  "CNCov": 0.8,
                  "DischargeWidth": "NaN",
                  "CatchmentArea": "NaN",
                  "PSIDul": -100.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "SWCON": [
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3
                  ],
                  "KLAT": null,
                  "Name": "SoilWater",
                  "ResourceName": "WaterBalance",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Organic, Models",
                  "FOMCNRatio": 40.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "Carbon": [
                    0.915384615384615,
                    0.776923076923077,
                    0.346153846153846,
                    0.230769230769231,
                    0.153846153846154,
                    0.123076923076923,
                    0.130769230769231
                  ],
                  "CarbonUnits": 1,
                  "SoilCNRatio": [
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0
                  ],
                  "FBiom": [
                    0.04,
                    0.02,
                    0.02,
                    0.02,
                    0.01,
                    0.01,
                    0.01
                  ],
                  "FInert": [
                    0.4,
                    0.6,
                    0.8,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "FOM": [
                    347.1290323127564,
                    270.3443621919937,
                    163.97214434990104,
                    99.45413288704063,
                    60.32198083112468,
                    36.58713082867487,
                    22.1912165985086
                  ],
                  "CarbonMetadata": null,
                  "FOMMetadata": null,
                  "Name": "Organic",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Chemical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "PH": [
                    8.2,
                    8.5,
                    8.6,
                    8.6,
                    7.4,
                    5.3,
                    5.3
                  ],
                  "PHUnits": 0,
                  "EC": null,
                  "ESP": null,
                  "CEC": null,
                  "ECMetadata": null,
                  "CLMetadata": null,
                  "ESPMetadata": null,
                  "PHMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "Name": "Chemical",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Nutrients.Nutrient, Models",
                  "Name": "Nutrient",
                  "ResourceName": "Nutrient",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NO3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NH4",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 1,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "Urea",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Water, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.406,
                    0.39,
                    0.414,
                    0.406,
                    0.406,
                    0.398,
                    0.39
                  ],
                  "InitialPAWmm": 309.6,
                  "RelativeTo": "LL15",
                  "FilledFromTop": true,
                  "Name": "Water",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.CERESSoilTemperature, Models",
                  "Name": "CERESSoilTemperature",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Fertiliser, Models",
              "Name": "Fertiliser",
              "ResourceName": "Fertiliser",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Surface.SurfaceOrganicMatter, Models",
              "SurfOM": [],
              "Canopies": [],
              "InitialResidueName": "wheat_stubble",
              "InitialResidueType": "wheat",
              "InitialResidueMass": 500.0,
              "InitialStandingFraction": 0.0,
              "InitialCPR": 0.0,
              "InitialCNR": 100.0,
              "Name": "SurfaceOrganicMatter",
              "ResourceName": "SurfaceOrganicMatter",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Maize",
              "ResourceName": "Maize",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Wheat",
              "ResourceName": "Wheat",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "maize"
                }
              ],
              "Name": "SowingFertiliserMaize",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "wheat"
                }
              ],
              "Name": "SowingFertiliserWheat",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Report, Models",
              "VariableNames": [
                "[Clock].Today",
                "[Manager].Script.CurrentStateCSV as CurrentState",
                "[Wheat].Phenology.Zadok.Stage",
                "[Wheat].Phenology.CurrentStageName",
                "[Wheat].IsAlive",
                "[Wheat].IsReadyForHarvesting",
                "[Wheat].AboveGround.Wt",
                "[Wheat].AboveGround.N",
                "[Wheat].Grain.Total.Wt*10 as WheatYield",
                "[Maize].Grain.Total.Wt*10 as MaizeYield",
                "[Wheat].Grain.Protein",
                "[Wheat].Grain.Size",
                "[Wheat].Grain.Number",
                "[Wheat].Grain.Total.Wt",
                "[Wheat].Grain.Total.N",
                "[Wheat].Total.Wt",
                "",
                "Sum([Soil].SoilWater.ESW) as ESW",
                "[Soil].SoilWater.Es as ESoil"
              ],
              "EventNames": [
                "[Clock].EndOfDay"
              ],
              "GroupByVariableName": null,
              "Name": "Report",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Zone, Models",
          "Area": 1.0,
          "Slope": 0.0,
          "AspectAngle": 0.0,
          "Altitude": 50.0,
          "Name": "Field 2",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Soils.Soil, Models",
              "RecordNumber": 30,
              "ASCOrder": "Vertosol",
              "ASCSubOrder": "Black",
              "SoilType": "Clay",
              "LocalName": null,
              "Site": "Dalby",
              "NearestTown": "Dalby, Q 4405",
              "Region": "Darling Downs and Granite Belt",
              "State": "Queensland",
              "Country": "Australia",
              "NaturalVegetation": null,
              "ApsoilNumber": "27",
              "Latitude": -27.1229551,
              "Longitude": 151.3054008,
              "LocationAccuracy": " +/- 20m",
              "YearOfSampling": "0",
              "DataSource": "CSIRO Sustainable Ecosystems, Toowoomba",
              "Comments": "Clay - Toowoomba - Wheat ll,xf copied from sorghum. Wheat kl is just default apsim kl values for wheat. ",
              "Name": "Black Vertosol-Bongeen (Dalby No027)",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Soils.Physical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "ParticleSizeClay": null,
                  "ParticleSizeSand": null,
                  "ParticleSizeSilt": null,
                  "Rocks": null,
                  "Texture": null,
                  "BD": [
                    1.25,
                    1.31,
                    1.23,
                    1.24,
                    1.25,
                    1.26,
                    1.29
                  ],
                  "AirDry": [
                    0.115,
                    0.184,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "LL15": [
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "DUL": [
                    0.45,
                    0.43,
                    0.46,
                    0.45,
                    0.45,
                    0.44,
                    0.43
                  ],
                  "SAT": [
                    0.5,
                    0.48,
                    0.51,
                    0.5,
                    0.5,
                    0.49,
                    0.48
                  ],
                  "KS": null,
                  "BDMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "AirDryMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "LL15Metadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "DULMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "SATMetadata": [
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD"
                  ],
                  "KSMetadata": null,
                  "RocksMetadata": null,
                  "TextureMetadata": null,
                  "ParticleSizeSandMetadata": null,
                  "ParticleSizeSiltMetadata": null,
                  "ParticleSizeClayMetadata": null,
                  "Name": "Physical",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "wheatSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.23,
                        0.23,
                        0.26,
                        0.3,
                        0.33,
                        0.37
                      ],
                      "KL": [
                        0.1,
                        0.1,
                        0.1,
                        0.1,
                        0.09,
                        0.07,
                        0.05
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "cottonSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "sorghumSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "SCRUMSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "MaizeSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.WaterModel.WaterBalance, Models",
                  "SummerDate": "1-Nov",
                  "SummerU": 6.0,
                  "SummerCona": 3.5,
                  "WinterDate": "1-Apr",
                  "WinterU": 4.0,
                  "WinterCona": 2.5,
                  "DiffusConst": 40.0,
                  "DiffusSlope": 16.0,
                  "Salb": 0.12,
                  "CN2Bare": 73.0,
                  "CNRed": 20.0,
                  "CNCov": 0.8,
                  "DischargeWidth": "NaN",
                  "CatchmentArea": "NaN",
                  "PSIDul": -100.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "SWCON": [
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3
                  ],
                  "KLAT": null,
                  "Name": "SoilWater",
                  "ResourceName": "WaterBalance",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Organic, Models",
                  "FOMCNRatio": 40.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "Carbon": [
                    0.915384615384615,
                    0.776923076923077,
                    0.346153846153846,
                    0.230769230769231,
                    0.153846153846154,
                    0.123076923076923,
                    0.130769230769231
                  ],
                  "CarbonUnits": 1,
                  "SoilCNRatio": [
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0
                  ],
                  "FBiom": [
                    0.04,
                    0.02,
                    0.02,
                    0.02,
                    0.01,
                    0.01,
                    0.01
                  ],
                  "FInert": [
                    0.4,
                    0.6,
                    0.8,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "FOM": [
                    347.1290323127564,
                    270.3443621919937,
                    163.97214434990104,
                    99.45413288704063,
                    60.32198083112468,
                    36.58713082867487,
                    22.1912165985086
                  ],
                  "CarbonMetadata": null,
                  "FOMMetadata": null,
                  "Name": "Organic",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Chemical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "PH": [
                    8.2,
                    8.5,
                    8.6,
                    8.6,
                    7.4,
                    5.3,
                    5.3
                  ],
                  "PHUnits": 0,
                  "EC": null,
                  "ESP": null,
                  "CEC": null,
                  "ECMetadata": null,
                  "CLMetadata": null,
                  "ESPMetadata": null,
                  "PHMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "Name": "Chemical",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Nutrients.Nutrient, Models",
                  "Name": "Nutrient",
                  "ResourceName": "Nutrient",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NO3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NH4",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 1,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "Urea",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Water, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.406,
                    0.39,
                    0.414,
                    0.406,
                    0.406,
                    0.398,
                    0.39
                  ],
                  "InitialPAWmm": 309.6,
                  "RelativeTo": "LL15",
                  "FilledFromTop": true,
                  "Name": "Water",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.CERESSoilTemperature, Models",
                  "Name": "CERESSoilTemperature",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Fertiliser, Models",
              "Name": "Fertiliser",
              "ResourceName": "Fertiliser",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Surface.SurfaceOrganicMatter, Models",
              "SurfOM": [],
              "Canopies": [],
              "InitialResidueName": "wheat_stubble",
              "InitialResidueType": "wheat",
              "InitialResidueMass": 500.0,
              "InitialStandingFraction": 0.0,
              "InitialCPR": 0.0,
              "InitialCNR": 100.0,
              "Name": "SurfaceOrganicMatter",
              "ResourceName": "SurfaceOrganicMatter",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Maize",
              "ResourceName": "Maize",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Wheat",
              "ResourceName": "Wheat",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "maize"
                }
              ],
              "Name": "SowingFertiliserMaize",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "wheat"
                }
              ],
              "Name": "SowingFertiliserWheat",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Report, Models",
              "VariableNames": [
                "[Clock].Today",
                "[Manager].Script.CurrentStateCSV as CurrentState",
                "[Wheat].Phenology.Zadok.Stage",
                "[Wheat].Phenology.CurrentStageName",
                "[Wheat].IsAlive",
                "[Wheat].IsReadyForHarvesting",
                "[Wheat].AboveGround.Wt",
                "[Wheat].AboveGround.N",
                "[Wheat].Grain.Total.Wt*10 as WheatYield",
                "[Maize].Grain.Total.Wt*10 as MaizeYield",
                "[Wheat].Grain.Protein",
                "[Wheat].Grain.Size",
                "[Wheat].Grain.Number",
                "[Wheat].Grain.Total.Wt",
                "[Wheat].Grain.Total.N",
                "[Wheat].Total.Wt",
                "",
                "Sum([Soil].SoilWater.ESW) as ESW",
                "[Soil].SoilWater.Es as ESoil"
              ],
              "EventNames": [
                "[Clock].EndOfDay"
              ],
              "GroupByVariableName": null,
              "Name": "Report",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Manager, Models",
          "CodeArray": [
            "using System;",
            "using System.Linq;",
            "using System.Collections.Generic;",
            "using Models.Core;",
            "using Models.Interfaces;",
            "using Models.Functions;",
            "using Models.PMF;",
            "using Models.Soils;",
            "using Models.WaterModel;",
            "using Models.Soils.Nutrients;",
            "using Models.Management;",
            "using Models.Utilities;",
            "using Models.Climate;",
            "using APSIM.Shared.Utilities;",
            "",
            "namespace Models",
            "{",
            "    [Serializable]",
            "    public class MScript : Model",
            "    {",
            "        // The paddocks and initial states of each",
            "        public List<string> myPaddockNames = new List<string> { \"Field 1\", \"Field 2\" };",
            "        public Dictionary<string, string> initialStates = new Dictionary<string, string> { {\"Field 1\", \"initial\"}, {\"Field 2\",\"summer fallow\"}};",
            "        public Dictionary<string, int> initialDays = new Dictionary<string, int> { {\"Field 1\", 30}, {\"Field 2\",  180}};",
            " ",
            "        // Default parameters for crops we manage.",
            "        //    **needs a better presentation** ",
            "        // Crop aliases: \"Early Wheat\" and \"Late Wheat\" both mean \"Wheat\", but different parameters ",
            "        [NonSerialized]",
            "        private static readonly Dictionary<string, cropDefault> cropDefaults = new Dictionary<string, cropDefault> { ",
            "           {\"Early Wheat\", new cropDefault {RealName = \"Wheat\", ",
            "                                      StartDate = \"1-apr\", EndDate = \"1-may\", RainDays = 7, MinRain = 30, MinESW = 80, MustSow = true,  ",
            "                                      CultivarName = \"hartog\", Population = 50, SowingDepth = 30, RowSpacing = 250,",
            "                                      maxArea = 0.5 }},",
            "           {\"Wheat\", new cropDefault {RealName = \"Wheat\", ",
            "                                      StartDate = \"1-may\", EndDate = \"10-jun\", RainDays = 7, MinRain = 10, MinESW = 50, MustSow = true,  ",
            "                                      CultivarName = \"hartog\", Population = 50, SowingDepth = 30, RowSpacing = 250,",
            "                                      maxArea = 0.5 }},",
            "           {\"Maize\", new cropDefault {RealName = \"Maize\", ",
            "                                      StartDate = \"1-nov\", EndDate = \"30-dec\", RainDays = 7, MinRain = 20, MinESW = 80, MustSow = true,",
            "                                      CultivarName = \"sc501\", Population =  6, SowingDepth = 50, RowSpacing = 1000,",
            "                                      maxArea = 0.5 }}",
            "        };",
            "        ",
            "        // Helpers for rotation arc rules",
            "        public double CanSowEarlyWheat {get { return(canSow(\"Early Wheat\")); } set {} }",
            "        public double CanSowWheat {get { return(canSow(\"Wheat\")); } set {} }",
            "        public double CanSowMaize {get { return(canSow(\"Maize\")); } set {} }",
            "         ",
            "        public double CanHarvestEarlyWheat {get { return(canHarvest(\"Early Wheat\")); } set {} }",
            "        public double CanHarvestWheat {get { return(canHarvest(\"Wheat\")); } set {} }",
            "        public double CanHarvestMaize {get { return(canHarvest(\"Maize\")); } set {} }",
            "        ",
            "",
            "        [Link] private Clock Clock;",
            "        [Link] private Summary Summary;",
            "        [Link] private RotationManager RotationManager;",
            "        //[Link] private Economics economics;",
            "",
            "        [NonSerialized] private Events myEvents;",
            "        ",
            "        // This is set during the management phase to the current paddock being managed.        ",
            "        public string _currentPaddock ;       ",
            "        public string currentPaddock {get => _currentPaddock; set => _currentPaddock = value; }",
            "        ",
            "        // Keep these around as they're tedious to find ",
            "        private Dictionary<string, Accumulator> accumulatedRain;",
            "        private Dictionary<string, Zone> myPaddockZones;",
            "        private Dictionary<string, WaterBalance> myWaterBalances;",
            "        ",
            "        // The current state of each paddock",
            "        private Dictionary<string, string> currentState;",
            "        public string[] CurrentState {get { return currentState.Values.ToArray();} set {}}",
            "        public string CurrentStateCSV {get { return string.Join(\",\", currentState.Values);} set {}}",
            "",
            "        private Dictionary<string, int> daysSinceLastHarvests;",
            "           ",
            "        private bool afterInit = false;",
            "        [EventSubscribe(\"StartOfSimulation\")]",
            "        private void OnSimulationCommencing(object sender, EventArgs e)",
            "        {",
            "            afterInit = true;",
            "            accumulatedRain = new Dictionary<string, Accumulator>();",
            "            foreach (var crop in cropDefaults.Keys) {",
            "               accumulatedRain.Add(crop, new Accumulator(this, \"[Weather].Rain\", cropDefaults[crop].RainDays));",
            "            }",
            "            myEvents = new Events(this);",
            "            ",
            "            myPaddockZones = new Dictionary<string, Zone>();",
            "            myWaterBalances = new Dictionary<string, WaterBalance>();",
            "            currentState = new Dictionary<string, string>();",
            "            daysSinceLastHarvests = new Dictionary<string, int>();",
            "            foreach (var paddock in myPaddockNames) {",
            "                myPaddockZones[ paddock ] = FindInScope(paddock) as Zone; ",
            "                if (myPaddockZones[ paddock ]  == null) { throw new Exception(\"Can't find a paddock called '\" + paddock + \"'\");}",
            " ",
            "                myWaterBalances[ paddock ] = myPaddockZones[ paddock ].FindInScope(\"SoilWater\") as WaterBalance;",
            "                if (myWaterBalances[ paddock ] == null) { throw new Exception(\"Can't find a waterbalance in '\" + paddock + \"'\");}",
            "                ",
            "                currentState[paddock] = initialStates[paddock];",
            "                daysSinceLastHarvests[paddock] = initialDays[paddock];",
            "            }",
            "        }",
            "",
            "        [EventSubscribe(\"StartOfDay\")]",
            "        private void DoStartOfDay(object sender, EventArgs e) ",
            "        {",
            "        }",
            "        ",
            "        [EventSubscribe(\"EndOfDay\")]",
            "        private void DoEndOfDay(object sender, EventArgs e) ",
            "        {",
            "            foreach (var paddock in myPaddockNames) {",
            "               var cropIn = false;",
            "               var cropModules = cropDefaults.Values.Select(c => c.RealName).Distinct();",
            "               foreach (var crop in cropModules) {",
            "                  IPlant Crop = myPaddockZones[paddock].FindInScope(crop) as IPlant;",
            "                  if (Crop.IsAlive)",
            "                     cropIn = true;",
            "               }",
            "               if (!cropIn) ",
            "                  daysSinceLastHarvests[paddock]++;",
            "            }",
            "        }",
            "",
            "        [EventSubscribe(\"DoManagement\")]",
            "        private void DoManagement(object sender, EventArgs e)",
            "        {",
            "            foreach (var crop in cropDefaults.Keys) {",
            "               accumulatedRain[crop].Update();",
            "            }",
            "            bool moreToDo = true;",
            "            while (moreToDo) {",
            "               foreach (var paddock in myPaddockNames) {",
            "                  currentPaddock = paddock;",
            "                  RotationManager.CurrentState = currentState[paddock];",
            "                  //Summary.WriteMessage(this, $\"Calling DoManagement for {currentPaddock}\", MessageType.Diagnostic);",
            "                  moreToDo = RotationManager.DoManagement();",
            "                  currentState[paddock] = RotationManager.CurrentState;",
            "               }",
            "            }",
            "            currentPaddock = \"\";",
            "        }",
            "",
            "        // Rotation arc rules & actions. These depend on currentPaddock being set ",
            "        private double canSow (string crop) {",
            "            //Summary.WriteMessage(this, $\"Being asked for crop {crop} in {currentPaddock}\", MessageType.Diagnostic);",
            "            var Crop = findMyCrop(cropDefaults[crop].RealName);",
            "",
            "            if ((DateUtilities.WithinDates(cropDefaults[crop].StartDate, Clock.Today, cropDefaults[crop].EndDate) &&",
            "                 !Crop.IsAlive &&",
            "                 MathUtilities.Sum(myWaterBalances[currentPaddock].ESW) > cropDefaults[crop].MinESW &&",
            "                 accumulatedRain[crop].Sum > cropDefaults[crop].MinRain) ||",
            "                (!Crop.IsAlive && DateUtilities.DatesAreEqual(cropDefaults[crop].EndDate, Clock.Today) && ",
            "                 cropDefaults[crop].MustSow)) ",
            "                return 1; ",
            "            return 0; ",
            "        }",
            "               ",
            "        private double canHarvest (string crop) {",
            "            var Crop = findMyCrop(cropDefaults[crop].RealName);",
            "            if (Crop.IsReadyForHarvesting) {",
            "               return(1);",
            "            }",
            "            return(0);   ",
            "        }",
            "               ",
            "        public void SowCrop(string crop) ",
            "        {   ",
            "            crop = crop.Replace(\"\\\"\", \"\"); //NFI why the quotes are added in??",
            "            var myPaddock = FindInScope(currentPaddock) as Zone; ",
            "            if (myPaddock == null) { throw new Exception(\"Can't find a paddock called '\" + currentPaddock + \"'\");}",
            "            ",
            "            Plant Crop = myPaddock.FindInScope(cropDefaults[crop].RealName) as Plant;",
            "            if (Crop == null) { throw new Exception(\"Can't find crop called '\" + currentPaddock + \".\" + crop + \"'\");}",
            "",
            "            Summary.WriteMessage(this, this.FullPath + \" -  sowing \" + Crop.FullPath, MessageType.Diagnostic);",
            "            Crop.Sow(population: cropDefaults[crop].Population, cultivar: cropDefaults[crop].CultivarName, ",
            "                     depth: cropDefaults[crop].SowingDepth, rowSpacing: cropDefaults[crop].RowSpacing);",
            " ",
            "        }",
            "        ",
            "        public void HarvestCrop(string crop)",
            "        {",
            "            crop = crop.Replace(\"\\\"\", \"\");",
            "            var myPaddock = FindInScope(currentPaddock) as Zone; ",
            "            Plant Crop = myPaddock.FindInScope(cropDefaults[crop].RealName) as Plant;",
            "",
            "            Summary.WriteMessage(this, this.FullPath + \" -  harvesting \" + Crop.FullPath, MessageType.Diagnostic);",
            "            Crop.Harvest();",
            "            Crop.EndCrop();",
            "            daysSinceLastHarvests[currentPaddock] = 0;",
            "        }",
            "",
            "        private Plant findMyCrop(string crop) {",
            "            var myPaddock = FindInScope(currentPaddock) as Zone; ",
            "            if (myPaddock == null) { throw new Exception(\"Can't find a paddock called '\" + currentPaddock + \"'\");}",
            "            ",
            "            Plant Crop = myPaddock.FindInScope(cropDefaults[crop].RealName) as Plant;",
            "            if (Crop == null) { throw new Exception(\"Can't find crop called '\" + currentPaddock + \".\" + crop + \"'\");}",
            "            return (Crop);        ",
            "        }",
            "        ",
            "        private double GetValuebyName(object value) ",
            "        {",
            "            double result;",
            "            if (value is IFunction function)",
            "                value = function.Value();",
            "                ",
            "            result = (double) Convert.ChangeType(value, typeof(double));",
            "            return(result);",
            "        }",
            "",
            "        // More helpers for rotation arc rules. These rules also depend on currentPaddock being set ",
            "        // earlier (ie we're calling the rotation graph, and in turn, it's asking us for something)",
            "",
            "        // See if the potential area planted for this crop is less or equal to the total area allowed         ",
            "        public int AreaPlantedOk (string crop) {",
            "           double areaCrop = 0;",
            "           double areaTot = 0;",
            "           foreach (var paddockZone in myPaddockZones.Values) {",
            "               IPlant Crop = paddockZone.FindInScope(cropDefaults[crop].RealName) as IPlant;",
            "               if (Crop == null) { throw new Exception($\"Can't find crop {crop} in '{paddockZone.Name}'\");}",
            "               if (Crop.IsAlive) ",
            "                  areaCrop  += paddockZone.Area;",
            "               areaTot += paddockZone.Area;",
            "           }",
            "           var thisPaddockArea = myPaddockZones [ currentPaddock ].Area;",
            "           var areaFrac = (thisPaddockArea + areaCrop) / areaTot ; ",
            "           int result = areaFrac <= cropDefaults[crop].maxArea ? 1 : 0;",
            "           //Summary.WriteMessage(this, $\"area rule for crop {crop} is {result}: this = {thisPaddockArea}, pot= {(areaCrop + thisPaddockArea)}, tot={areaTot}\", MessageType.Diagnostic);",
            "           return(result);        ",
            "        }",
            "        ",
            "        // The number of days since the last crop was harvested",
            "        public int daysSinceLastHarvest {",
            "           get { ",
            "             return(daysSinceLastHarvests[currentPaddock]);",
            "           }",
            "           set {}",
            "        }",
            "        ",
            "        public int daysSinceLastHarvest_gt_30 {get {return (daysSinceLastHarvest > 30 ? 1 : 0); } set {}}",
            "        public int daysSinceLastHarvest_gt_180 {get {return (daysSinceLastHarvest > 180 ? 1 : 0); } set {}}",
            "        ",
            "        private class cropDefault {",
            "           public string RealName;",
            "           public int RainDays;",
            "           public string StartDate;",
            "           public string EndDate;",
            "           public double MinRain;",
            "           public double MinESW;",
            "           public bool MustSow;",
            "           public double Population;",
            "           public string CultivarName;",
            "           public double SowingDepth;",
            "           public double RowSpacing;",
            "           public double maxArea;",
            "        }",
            "   }",
            "}"
          ],
          "Parameters": [],
          "Name": "Manager",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Manager, Models",
          "CodeArray": [
            "using System;",
            "using System.Linq;",
            "using System.Collections.Generic;",
            "",
            "using Models.Core;",
            "using Models.Interfaces;",
            "using Models.Functions;",
            "using Models.Climate;",
            "using Models.Soils;",
            "using Models.WaterModel;",
            "using Models.Soils.Nutrients;",
            "using Models.Management;",
            "using Models.Utilities;",
            "",
            "using Models.PMF;",
            "using APSIM.Shared.Utilities;",
            "",
            "// General accumulator for rotations. Reports on each transition in each paddock",
            "namespace Models",
            "{",
            "    [Serializable]",
            "    public class Script : Model",
            "    {",
            "        [Link] Simulation Simulation;",
            "        [Link] IClock Clock;",
            "        [Link] Weather Weather;",
            "        [Link] ISummary Summary;",
            "",
            "        [Link(ByName=true, IsOptional = true)] private MScript Manager;",
            "        ",
            "        [Link(IsOptional = true)] private RotationManager RotationManager;",
            "        [Link(IsOptional = true)] private Zone defaultZone;",
            "",
            "        private Dictionary<string, Zone> myPaddockZones = null;",
            "        private Dictionary<string, WaterBalance> myWaterBalances;",
            "        private Dictionary<string, Nutrient> myNutrient;",
            "        private Dictionary<string, Solute> myNO3;",
            "        private Dictionary<string, Fertiliser> myFert;",
            "        private Dictionary<string, Plant> myCrops; // eg [\"paddockName,cropName\"]",
            "        ",
            "        // A state / accumulator for each thing in each paddock",
            "        private Dictionary<string, double> me = new Dictionary<string, double>();",
            "        private Dictionary<string, double[]> meArray = new Dictionary<string, double[]>();",
            "        private Dictionary<string, int> meInt = new Dictionary<string, int>();",
            "        ",
            "        private string currentPaddock {get { ",
            "           return((Manager is null) ? ",
            "             defaultZone.Name : ",
            "                Manager.currentPaddock); } set {}} ",
            "",
            "        [EventSubscribe(\"StartOfSimulation\")]",
            "        public void OnStart_Simulation(object sender, EventArgs e) { ",
            "            myPaddockZones = new Dictionary<string, Zone>();",
            "            myWaterBalances = new Dictionary<string, WaterBalance>();",
            "            myNO3 = new Dictionary<string, Solute>();",
            "            myFert = new Dictionary<string, Fertiliser>();",
            "            myNutrient = new Dictionary<string, Nutrient>();",
            "            myCrops = new Dictionary<string, Plant>();",
            "            foreach (var z in Simulation.FindAllChildren<Zone>() ) {",
            "               myPaddockZones.Add(z.Name, z);",
            "               ",
            "               var w = (z as Zone).FindInScope(\"SoilWater\") as WaterBalance;",
            "               myWaterBalances.Add(z.Name, w);",
            "",
            "               var no3 = (z as Zone).FindInScope(\"NO3\") as Solute;",
            "               myNO3.Add(z.Name, no3);",
            "",
            "               var nut = (z as Zone).FindInScope(\"Nutrient\") as Nutrient;",
            "               myNutrient.Add(z.Name, nut);",
            "",
            "               var fert = (z as Zone).FindInScope(\"Fertiliser\") as Fertiliser;",
            "               myFert.Add(z.Name, fert);",
            "               ",
            "               foreach (var c in z.FindAllChildren<Plant>() ) {",
            "                   myCrops.Add(z.Name + \",\" + c.Name, c);",
            "               }",
            "            }  ",
            "                    ",
            "            foreach (string paddockName in myPaddockZones.Keys) {",
            "               me.Add(paddockName + \"__NeedReset\", 1);",
            "",
            "               Summary.WriteMessage(this, \"Adding \" + paddockName, MessageType.Diagnostic);",
            "               me.Add(paddockName + \"_eswStart\", 0);",
            "               me.Add(paddockName + \"_eswYesterday\", 0);",
            "               me.Add(paddockName + \"_Ep\", 0);",
            "               me.Add(paddockName + \"_drainage\", 0);",
            "               me.Add(paddockName + \"_runoff\", 0);",
            "               me.Add(paddockName + \"_no3Start\", 0);",
            "               me.Add(paddockName + \"_no3Yesterday\", 0);",
            "               me.Add(paddockName + \"_rain\", 0);",
            "               me.Add(paddockName + \"_evaporation\", 0);",
            "               me.Add(paddockName + \"_applied_fert\", 0);",
            "               ",
            "               double[] TotalC = myNutrient[paddockName].TotalC.ToArray(); // ",
            "               meArray.Add(paddockName + \"_CStart\", new double[TotalC.Length]);",
            "               meArray.Add(paddockName + \"_CYesterday\", new double[TotalC.Length]);",
            "               meArray.Add(paddockName + \"_dlt_carbon_tot\", new double[TotalC.Length]);",
            "               meArray.Add(paddockName + \"_n2o_tot\", new double[TotalC.Length]);",
            "               meInt.Add(paddockName + \"_daysInPhase\", 0);",
            "               ",
            "",
            "               double[] dlayer = myWaterBalances[paddockName].Thickness.ToArray();",
            "               double dep = 0;",
            "               int iLayer = 0;",
            "               for (iLayer = 0; iLayer < dlayer.Length && dep < 300; iLayer++)",
            "                    dep += dlayer[iLayer];",
            "               if (dep != 300) { throw new Exception($\"Layer structure is not aligned to 300mm boundary in {paddockName}\"); }",
            "               meInt.Add(paddockName + \"_iLayer_300mm\", iLayer);",
            "               Summary.WriteMessage(this, \"L @300 = \" + iLayer.ToString(), MessageType.Diagnostic);",
            "      ",
            "               for ( ;iLayer < dlayer.Length && dep < 1000; iLayer++)",
            "                    dep += dlayer[iLayer];",
            "               //if (dep > 1000) { throw new Exception($\"Layer structure is not aligned to 1000mm boundary in {paddockName}\"); }",
            "               meInt.Add(paddockName + \"iLayer_300_1000mm\", iLayer);",
            "               Summary.WriteMessage(this, $\"L @1000 = {iLayer}  (= {dep} mm)\", MessageType.Diagnostic);",
            "",
            "           }",
            "       } ",
            "       ",
            "       [EventSubscribe(\"Transition\")] ",
            "       public void OnTransition(object sender, EventArgs e) {",
            "               //Console.WriteLine(\"T ransition to\"); ",
            "          me[currentPaddock + \"__NeedReset\"] = 1;",
            "               //Console.WriteLine(\"T ransition from\"); ",
            "       } ",
            "   ",
            "   [EventSubscribe(\"StartOfDay\")] ",
            "   public void OnStartOfDay(object sender, EventArgs e) { ",
            "      foreach (string paddockName in myPaddockZones.Keys) {",
            "         if (me[paddockName + \"__NeedReset\"] > 0) {",
            "            me[paddockName + \"__NeedReset\"] = 0;",
            "            me[paddockName + \"_eswStart\"] = MathUtilities.Sum(myWaterBalances[paddockName].ESW);",
            "            me[paddockName + \"_swYesterday\"] = me[paddockName + \"_eswStart\"];",
            "            me[paddockName + \"_Ep\"] = 0;",
            "            me[paddockName + \"_drainage\"] = 0;",
            "            me[paddockName + \"_runoff\"] = 0;",
            "            me[paddockName + \"_no3Start\"] = myNO3[paddockName].kgha.Sum();",
            "            me[paddockName + \"_no3Yesterday\"] = me[paddockName + \"_no3Start\"];",
            "            me[paddockName + \"_rain\"] = 0;",
            "            me[paddockName + \"_evaporation\"] = 0;",
            "            me[paddockName + \"_applied_fert\"] = 0;",
            "            ",
            "            // C pools aren't initialised properly until the end of the 1st day. Fudge it for now.",
            "            var TotalC = myNutrient[paddockName].TotalC.ToArray();",
            "            meArray[paddockName + \"_CStart\"] = TotalC;",
            "            meArray[paddockName + \"_CYesterday\"] = TotalC;",
            "            meArray[paddockName + \"_dlt_carbon_tot\"] = new double[TotalC.Length];",
            "            meArray[paddockName + \"_n2o_tot\"] = new double[TotalC.Length];",
            "            meInt[paddockName + \"_daysInPhase\"] = 0;",
            "            ",
            "         }",
            "      }",
            "   }",
            "    ",
            "   private IEnumerable<string> listCropsIn(string paddock) {",
            "      return(myCrops.Keys.ToList().",
            "          Where(c => c.StartsWith(paddock + \",\" )).",
            "          Select(s => s.Substring(s.IndexOf(',') + 1)));",
            "   }",
            "   ",
            "   [EventSubscribe(\"EndOfDay\")] ",
            "   public void OnEndOfDay(object sender, EventArgs e) { ",
            "      foreach (string paddockName in myPaddockZones.Keys) ",
            "      {",
            "         foreach (var cropName in listCropsIn(paddockName))",
            "         {",
            "            double Ep =  GetValuebyName(myPaddockZones[paddockName].Get($\"[{cropName}].Leaf.WaterAllocation\"));  ",
            "            me[paddockName + \"_Ep\"] += Ep;",
            "         }",
            "         ",
            "         me[paddockName + \"_swYesterday\"] = MathUtilities.Sum(myWaterBalances[paddockName].ESW);",
            "",
            "         me[paddockName + \"_drainage\"] += myWaterBalances[paddockName].Drainage;",
            "",
            "         me[paddockName + \"_runoff\"] += myWaterBalances[paddockName].Runoff;",
            "",
            "         me[paddockName + \"_rain\"] += Weather.Rain;",
            "         ",
            "         me[paddockName + \"_evaporation\"] += myWaterBalances[paddockName].Es;",
            "",
            "         me[paddockName + \"_applied_fert\"] += myFert[paddockName].NitrogenApplied;",
            "",
            "         me[paddockName + \"_no3Yesterday\"] = myNO3[paddockName].kgha.Sum();",
            "",
            "         var TotalC = myNutrient[paddockName].TotalC.ToArray();",
            "         if (MathUtilities.Sum( meArray[paddockName + \"_CStart\"] ) <= 0) {  // only occurs on the 1st day of simulation",
            "            meArray[paddockName + \"_CStart\"] = TotalC;  ",
            "         }",
            "         meArray[paddockName + \"_CYesterday\"] = TotalC;  ",
            "         for (int i = 0; i < TotalC.Length; i++) {",
            "            meArray[paddockName + \"_dlt_carbon_tot\"][i] = TotalC[i] - meArray[paddockName + \"_CStart\"][i];",
            "            meArray[paddockName + \"_n2o_tot\"][i] += myNutrient[paddockName].N2Oatm[i];",
            "         }",
            "         meInt[paddockName + \"_daysInPhase\"]++;",
            "      }",
            "    }",
            "",
            "   // Cumulative Ep: The total transpiration since the last transition",
            "   public double TEp {",
            "      get {return(getv(currentPaddock + \"_Ep\"));}",
            "      set {}",
            "   }",
            "   // Cumulative Drainage",
            "   public double TDrainage {",
            "      get {return(getv(currentPaddock + \"_drainage\"));}",
            "   }",
            "   // Cumulative Runoff",
            "   public double TRunoff {",
            "      get {return(getv(currentPaddock + \"_runoff\"));}",
            "   }",
            "   // <summary> The total rain since the last transition</summary>",
            "   public double TRainfall {",
            "      get {return(getv(currentPaddock + \"_rain\"));}",
            "   }",
            "   ",
            "   public double TEs {",
            "      get {return(getv(currentPaddock + \"_evaporation\"));}",
            "      set {}",
            "   }",
            "   // <summary> The total NO3 applied since the last transition </summary>",
            "   public double TFertAsNO3 {",
            "      get {return(getv(currentPaddock + \"_applied_fert\"));}",
            "      set {}",
            "   }",
            "",
            "   // <summary> Instantaneous sw at start </summary>",
            "   public double eswStart {",
            "      get { return(getv(currentPaddock + \"_eswStart\"));} ",
            "      set {}",
            "   }",
            "   // <summary> Instantaneous sw at end </summary>",
            "   public double eswYesterday {",
            "      get {return(getv(currentPaddock + \"_eswYesterday\"));} ",
            "      set {}",
            "   }",
            "   // <summary> Instantaneous no3 at start of a phase </summary>",
            "   public double no3Start { ",
            "      get {return(getv(currentPaddock + \"_no3Start\"));}",
            "   }",
            "   // <summary> Instantaneous no3 at end of a phase </summary>",
            "   public double no3Yesterday {",
            "      get {return(getv(currentPaddock + \"_no3Yesterday\"));}",
            "   }",
            "",
            "   // <summary> Instantaneous total carbon at start of a phase </summary>",
            "   public double[] totCStart { ",
            "      get {return(geta(currentPaddock + \"_CStart\"));}",
            "   }",
            "   // <summary> Instantaneous no3 at end of a phase </summary>",
            "   public double[] totCYesterday {",
            "      get {return(geta(currentPaddock + \"_CYesterday\"));}",
            "   }",
            "   ",
            "   // <summary> Change in total carbon to 300mm over water year </summary>",
            "   public double dlt_carbon_tot_300mm {",
            "      get {",
            "         double res = 0;",
            "         int n = getInt( currentPaddock + \"_iLayer_300mm\" );",
            "         for (var i = 0; i < n; i++)",
            "            res += geta(currentPaddock + \"_dlt_carbon_tot\", i);",
            "         return(res);",
            "      }",
            "   }",
            "    // <summary> Change in total carbon from 300mm - 1000mm over water year</summary>",
            "    public double dlt_carbon_tot_300_1000mm {",
            "      get {",
            "         double res = 0;",
            "         int n1 = getInt( currentPaddock + \"_iLayer_300mm\" );",
            "         int n2 = getInt( currentPaddock + \"_iLayer_300mm_1000mm\" );",
            "         for (var i = n1; i < n2; i++)",
            "            res += geta(currentPaddock + \"_dlt_carbon_tot\", i);",
            "         return(res);",
            "      }",
            "   }",
            "   ",
            "   ",
            "   // <summary> N2O emitted from top300mm since start of water year </summary>",
            "   public double n2o_300mm {",
            "      get {",
            "         double res = 0;",
            "         int n = getInt( currentPaddock + \"_iLayer_300mm\" );",
            "         for (var i = 0; i < n; i++)",
            "            res += geta(currentPaddock + \"_n2o_tot\", i);",
            "         return(res);",
            "      }",
            "   }",
            "   // <summary> N2O emitted from 300mm - 1000mm since start of water year</summary>",
            "   public double n2o_300_1000mm {",
            "      get {",
            "         double res = 0;",
            "         int n1 = getInt( currentPaddock + \"_iLayer_300mm\" );",
            "         int n2 = getInt( currentPaddock + \"_iLayer_300mm_1000mm\" );",
            "         for (var i = n1; i < n2; i++)",
            "            res += geta(currentPaddock + \"_n2o_tot\", i);",
            "         return(res);",
            "      }",
            "   }",
            "   ",
            "    //<summary>CO2 equivalent emissions to 300mm since transition</summary> ",
            "   public double co2_equiv_300mm {",
            "      get {",
            "         return((-1 * dlt_carbon_tot_300mm * 3.67 + ",
            "                 n2o_300mm * 298) / 1000.0);",
            "      }",
            "   }",
            "    //<summary>CO2 equivalent emissions from 300mm -  1000mm since transition</summary>",
            "   public double co2_equiv_300_1000mm {",
            "      get {",
            "         return((-1 * dlt_carbon_tot_300_1000mm * 3.67 + ",
            "            n2o_300_1000mm * 298) / 1000.0);",
            "      }",
            "   }",
            "",
            "   // <summary> Instantaneous yield (kg/ha, sum of all crops) </summary>",
            "   public double yield_kgha {",
            "      get{",
            "         double yld2 = 0;",
            "         foreach (var cropName in listCropsIn(currentPaddock))",
            "         {",
            "            // This is quite a mouthful. Should be an easier way to do this..",
            "            var yld =  GetValuebyName(myPaddockZones[currentPaddock].Get($\"[{cropName}].Grain.Total.Wt\")) * 10;  // g/m2 -> kg/ha",
            "            yld2 = yld2 + yld;",
            "         }",
            "         return yld2 ;",
            "      }",
            "      set {}",
            "   }",
            "",
            "   //<summary> Instantaneous yield (kg) of all crops </summary>",
            "   public double yield_kg {",
            "      get{",
            "         double yld2 = 0;",
            "         foreach (var cropName in listCropsIn(currentPaddock))",
            "         {",
            "            // This is quite a mouthful. Should be an easier way to do this..",
            "            var yld =  GetValuebyName(myPaddockZones[currentPaddock].Get($\"[{cropName}].Grain.Total.Wt\")) * 10;  // g/m2 -> kg/ha",
            "            yld2 = yld2 + yld * myPaddockZones[currentPaddock].Area;",
            "         }",
            "         return yld2 ;",
            "      }",
            "      set {}",
            "   }",
            "",
            "   //<summary> Instantaneous biomass (kg/ha) of all crops</summary>",
            "   public double biomass_kgha {",
            "      get{",
            "         double biomass2 = 0;",
            "         foreach (var cropName in listCropsIn(currentPaddock))",
            "         {",
            "            // This is quite a mouthful. Should be an easier way to do this..",
            "            var biomass =  GetValuebyName(myPaddockZones[currentPaddock].Get($\"[{cropName}].AboveGround.Wt\")) * 10;  // g/m2 -> kg/ha",
            "            biomass2 = biomass2 + biomass;",
            "         }",
            "         return biomass2 ;}",
            "      set {}",
            "   }",
            "   // <summary>Instantaneous biomass (kg) of all crops</summary>",
            "   public double biomass_kg {",
            "      get{",
            "         double biomass2 = 0;",
            "         foreach (var cropName in listCropsIn(currentPaddock))",
            "         {",
            "            // This is quite a mouthful. Should be an easier way to do this..",
            "            var biomass =  GetValuebyName(myPaddockZones[currentPaddock].Get($\"[{cropName}].AboveGround.Wt\")) * 10;  // g/m2 -> kg/ha",
            "            biomass2 = biomass2 + biomass * myPaddockZones[currentPaddock].Area;",
            "         }",
            "         return biomass2 ;}",
            "   }",
            "#if false",
            "   // Instantaneous protein of all crops",
            "   [Output, Description(\"Grain Protein\"), Units(\"%\")] public double protein {",
            "      get{",
            "         double pro2 = 0;",
            "         Paddock p = (Paddock) MySimulation.LinkByName(currentPaddock());",
            "         foreach (Component crop in p.Crops)",
            "         {",
            "            double pro = 0;",
            "            crop.Get(\"grain_protein\", out pro);",
            "            pro2 = pro2 + pro;",
            "         }",
            "        ",
            "         return pro2 ;}",
            "   }",
            "   ",
            "   // Instantaneous N of all crops",
            "   [Output, Description(\"Grain N\"), Units(\"g/m2\")] public double GrainN_gm2 {",
            "      get{",
            "         double GN2 = 0;",
            "         Paddock p = (Paddock) MySimulation.LinkByName(currentPaddock());",
            "         foreach (Component crop in p.Crops)",
            "         {",
            "            double GN = 0;",
            "            if (crop.Get(\"grain_N\", out GN))",
            "               GN2 = GN2 + GN;",
            "            else if (crop.Get(\"GrainGreenN\", out GN))",
            "               GN2 = GN2 + GN;",
            "         }",
            "         return GN2 ;}",
            "   }",
            "",
            "#endif",
            "   ",
            "   public int daysInPhase {",
            "      get {",
            "        return(getInt( currentPaddock + \"_daysInPhase\"));",
            "      }",
            "   }",
            "   ",
            "        private double[] geta(string key) {",
            "           if (meArray.ContainsKey(key)) return(meArray[key]);",
            "           return(null);",
            "        }",
            "",
            "        private double geta(string key, int i) {",
            "           if (meArray.ContainsKey(key)) return(meArray[key] [i]);",
            "           return(-1.0);",
            "        }",
            "        ",
            "        private double getv(string key) {",
            "           if (me.ContainsKey(key)) return(me[key]);",
            "           return(-1.0);",
            "        }",
            "        ",
            "        private int getInt(string key) {",
            "           if (meInt.ContainsKey(key)) return(meInt[key]);",
            "           return(0);",
            "        }",
            "        ",
            "        private double GetValuebyName(object value) ",
            "        {",
            "            double result;",
            "            if (value is IFunction function)",
            "                value = function.Value();",
            "            result = (double) Convert.ChangeType(value, typeof(double));",
            "            return(result);",
            "        }",
            "",
            "    ",
            "        [EventSubscribe(\"DoManagement\")]",
            "        private void DoDailyCalculations(object sender, EventArgs e)",
            "        {",
            "            // Called once per day",
            "        }",
            "    }",
            "}",
            ""
          ],
          "Parameters": [],
          "Name": "PhaseAccumulations",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Management.RotationManager, Models",
          "Nodes": [
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "summer fallow",
              "Location": "454, 271",
              "Colour": "143, 89, 2",
              "OutlineColour": "Black",
              "Transparent": false
            },
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "Wheat",
              "Location": "256, 50",
              "Colour": "Red",
              "OutlineColour": "Black",
              "Transparent": false
            },
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "Maize",
              "Location": "265, 426",
              "Colour": "96, 96, 217",
              "OutlineColour": "Black",
              "Transparent": false
            },
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "initial",
              "Location": "78, 276",
              "Colour": "Lime",
              "OutlineColour": "Black",
              "Transparent": false
            },
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "Early Wheat",
              "Location": "256, 193",
              "Colour": "173, 127, 168",
              "OutlineColour": "Black",
              "Transparent": false
            }
          ],
          "Arcs": [
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanHarvestWheat"
              ],
              "Actions": [
                "[Manager].Script.HarvestCrop(\"Wheat\");"
              ],
              "SourceName": "Wheat",
              "DestinationName": "summer fallow",
              "Location": "496, 67",
              "Colour": "Yellow",
              "Name": "Arc 1"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanSowMaize",
                "[Manager].Script.daysSinceLastHarvest_gt_180"
              ],
              "Actions": [
                "[Manager].Script.SowCrop(\"Maize\");"
              ],
              "SourceName": "summer fallow",
              "DestinationName": "Maize",
              "Location": "448, 409",
              "Colour": "Yellow",
              "Name": "Arc 2"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanHarvestMaize"
              ],
              "Actions": [
                "[Manager].Script.HarvestCrop(\"Maize\");"
              ],
              "SourceName": "Maize",
              "DestinationName": "initial",
              "Location": "55, 405",
              "Colour": "Yellow",
              "Name": "Arc 3"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanSowWheat",
                "[Manager].Script.AreaPlantedOk(\"Wheat\")"
              ],
              "Actions": [
                "[Manager].Script.SowCrop(\"Wheat\");"
              ],
              "SourceName": "initial",
              "DestinationName": "Wheat",
              "Location": "81, 59",
              "Colour": "Yellow",
              "Name": "Arc 4"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanSowEarlyWheat",
                "[Manager].Script.AreaPlantedOk(\"Early Wheat\")"
              ],
              "Actions": [
                "[Manager].Script.SowCrop(\"Early Wheat\");"
              ],
              "SourceName": "initial",
              "DestinationName": "Early Wheat",
              "Location": "119, 153",
              "Colour": "Yellow",
              "Name": "Arc 5"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanHarvestEarlyWheat"
              ],
              "Actions": [
                "[Manager].Script.HarvestCrop(\"Early Wheat\");"
              ],
              "SourceName": "Early Wheat",
              "DestinationName": "summer fallow",
              "Location": "385, 176",
              "Colour": "Yellow",
              "Name": "Arc 6"
            }
          ],
          "TopLevel": false,
          "InitialState": "initial",
          "Verbose": false,
          "Name": "RotationManager",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Management.RotationRugplot, Models",
              "SimulationName": "Farm",
              "CurrentPaddockString": "[Manager].Script.currentPaddock",
              "Name": "RotationRugplot",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Report, Models",
          "VariableNames": [
            "[Clock].Today",
            "[Manager].Script.currentPaddock as Paddock",
            "[Manager].Script.currentState as currentState",
            "[PhaseAccumulations].Script.TRainfall as Rain",
            "[PhaseAccumulations].Script.yield_kgha",
            "[PhaseAccumulations].Script.biomass_kgha"
          ],
          "EventNames": [
            "[RotationManager].Transition"
          ],
          "GroupByVariableName": null,
          "Name": "TransitionReport",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    }
  ],
  "Enabled": true,
  "ReadOnly": false
}